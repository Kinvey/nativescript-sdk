/**
 * @preserve
 * kinvey-nativescript-sdk v3.4.5
 * Kinvey JavaScript SDK for NativeScript applications.
 * http://www.kinvey.com
 *
 * Copyright (c) 2017, Kinvey.
 * All rights reserved.
 *
 * Released under the Apache-2.0 license.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nativescript-sqlite")):"function"==typeof define&&define.amd?define(["nativescript-sqlite"],t):"object"==typeof exports?exports.Kinvey=t(require("nativescript-sqlite")):e.Kinvey=t(e["nativescript-sqlite"])}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),o=n(353),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(407);r.CacheRack.useCacheMiddleware(new a.CacheMiddleware),e.exports=i.default,e.exports.Kinvey=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.SyncOperation=t.Storage=t.StatusCode=t.SocialIdentity=t.SerializeMiddleware=t.Response=t.RequestMethod=t.Request=t.Rack=t.Query=t.Properties=t.ParseMiddleware=t.NetworkRequest=t.NetworkRack=t.Middleware=t.Metadata=t.MemoryAdapter=t.KinveyResponse=t.KinveyRequest=t.Kinvey=t.HttpMiddleware=t.Headers=t.Files=t.DeltaFetchRequest=t.DataStoreType=t.DataStore=t.CustomEndpoint=t.Client=t.CacheRequest=t.CacheRack=t.CacheMiddleware=t.AuthType=t.AuthorizationGrant=t.Group=t.Aggregation=t.Acl=void 0;var o=n(2);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(41);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(66),u=r(a),s=n(341),c=n(327),l=n(234),f=r(l),p=n(283),h=r(p),d=n(269),y=r(d),v=n(351),m=r(v),b=n(352),g=r(b),w=n(272),_=r(w),O=new a.FileStore;t.Acl=s.Acl,t.Aggregation=h.default,t.Group=h.default,t.AuthorizationGrant=c.AuthorizationGrant,t.AuthType=l.AuthType,t.CacheMiddleware=l.CacheMiddleware,t.CacheRack=l.CacheRack,t.CacheRequest=l.CacheRequest,t.Client=y.default,t.CustomEndpoint=m.default,t.DataStore=u.default,t.DataStoreType=a.DataStoreType,t.DeltaFetchRequest=l.DeltaFetchRequest,t.Files=O,t.Headers=l.Headers,t.HttpMiddleware=l.HttpMiddleware,t.Kinvey=g.default,t.KinveyRequest=l.KinveyRequest,t.KinveyResponse=l.KinveyResponse,t.MemoryAdapter=l.MemoryAdapter,t.Metadata=s.Metadata,t.Middleware=l.Middleware,t.NetworkRack=l.NetworkRack,t.NetworkRequest=l.NetworkRequest,t.ParseMiddleware=l.ParseMiddleware,t.Properties=l.Properties,t.Query=_.default,t.Rack=l.Rack,t.Request=f.default,t.RequestMethod=l.RequestMethod,t.Response=l.Response,t.SerializeMiddleware=l.SerializeMiddleware,t.SocialIdentity=c.SocialIdentity,t.StatusCode=l.StatusCode,t.Storage=l.Storage,t.SyncOperation=a.SyncOperation,t.User=s.User,t.default=g.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WritesToCollectionDisallowedError=t.UserAlreadyExistsError=t.TimeoutError=t.SyncError=t.StaleRequestError=t.ServerError=t.QueryError=t.PopupError=t.ParameterValueOutOfRangeError=t.NotFoundError=t.NoResponseError=t.NoActiveUserError=t.NetworkConnectionError=t.MobileIdentityConnectError=t.MissingRequestParameterError=t.MissingRequestHeaderError=t.MissingQueryError=t.KinveyError=t.KinveyInternalErrorStop=t.KinveyInternalErrorRetry=t.JSONParseError=t.InvalidQuerySyntaxError=t.InvalidIdentifierError=t.InvalidCredentialsError=t.InsufficientCredentialsError=t.IndirectCollectionAccessDisallowedError=t.IncompleteRequestBodyError=t.FeatureUnavailableError=t.DuplicateEndUsersError=t.CORSDisabledError=t.BLError=t.BaseError=t.BadRequestError=t.AppProblemError=t.APIVersionNotImplementedError=t.APIVersionNotAvailableError=t.ActiveUserError=void 0;var o=n(3),i=r(o),a=n(6),u=r(a),s=n(7),c=r(s),l=n(8),f=r(l),p=n(9),h=r(p),d=n(4),y=r(d),v=n(10),m=r(v),b=n(11),g=r(b),w=n(12),_=r(w),O=n(13),E=r(O),k=n(14),j=r(k),x=n(15),P=r(x),T=n(16),S=r(T),A=n(17),R=r(A),C=n(18),I=r(C),M=n(19),q=r(M),D=n(20),N=r(D),L=n(21),U=r(L),K=n(22),F=r(K),B=n(23),H=r(B),z=n(24),$=r(z),V=n(25),Y=r(V),G=n(26),Q=r(G),J=n(27),W=r(J),X=n(28),Z=r(X),ee=n(29),te=r(ee),ne=n(30),re=r(ne),oe=n(31),ie=r(oe),ae=n(32),ue=r(ae),se=n(33),ce=r(se),le=n(34),fe=r(le),pe=n(35),he=r(pe),de=n(36),ye=r(de),ve=n(37),me=r(ve),be=n(38),ge=r(be),we=n(39),_e=r(we),Oe=n(40),Ee=r(Oe);t.ActiveUserError=i.default,t.APIVersionNotAvailableError=u.default,t.APIVersionNotImplementedError=c.default,t.AppProblemError=f.default,t.BadRequestError=h.default,t.BaseError=y.default,t.BLError=m.default,t.CORSDisabledError=g.default,t.DuplicateEndUsersError=_.default,t.FeatureUnavailableError=E.default,t.IncompleteRequestBodyError=j.default,t.IndirectCollectionAccessDisallowedError=P.default,t.InsufficientCredentialsError=S.default,t.InvalidCredentialsError=R.default,t.InvalidIdentifierError=I.default,t.InvalidQuerySyntaxError=q.default,t.JSONParseError=N.default,t.KinveyInternalErrorRetry=U.default,t.KinveyInternalErrorStop=F.default,t.KinveyError=H.default,t.MissingQueryError=$.default,t.MissingRequestHeaderError=Y.default,t.MissingRequestParameterError=Q.default,t.MobileIdentityConnectError=W.default,t.NetworkConnectionError=Z.default,t.NoActiveUserError=te.default,t.NoResponseError=re.default,t.NotFoundError=ie.default,t.ParameterValueOutOfRangeError=ue.default,t.PopupError=ce.default,t.QueryError=fe.default,t.ServerError=he.default,t.StaleRequestError=ye.default,t.SyncError=me.default,t.TimeoutError=ge.default,t.UserAlreadyExistsError=_e.default,t.WritesToCollectionDisallowedError=Ee.default,t.default=H.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An active user already exists.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ActiveUserError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An error occurred.",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=arguments[4];r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.name=e||s.constructor.name,s.message=n,s.debug=i,s.code=a,s.kinveyRequestId=u,s.stack=new Error(n).stack,s}return i(t,e),t}(u.default);t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(o,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(o,"name",{configurable:!0,enumerable:!1,value:o.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(o,o.constructor),r(o)):(Object.defineProperty(o,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),o)}return o(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This API version is not available for your app. Please retry your request with a supported API version.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"APIVersionNotAvailableError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This API version is not implemented. Please retry your request with a supported API version.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"APIVersionNotImplementedError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There is a problem with this app backend that prevents execution of this operation. Please contact support@kinvey.com for assistance.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"AppProblemError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to understand request.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"BadRequestError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Business Logic script did not complete. See debug message for details.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"BLError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cross Origin Support is disabled for this application.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"CORSDisabledError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"More than one user registered with this username for this application. Please contact support@kinvey.com for assistance.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"DuplicateEndUsersError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Requested functionality is unavailable in this API version.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"FeatureUnavailableError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request body is either missing or incomplete.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"IncompleteRequestBodyError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please use the appropriate API to access this collection for this app backend.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"IndirectCollectionAccessDisallowedError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The credentials used to authenticate this request are not authorized to run this operation. Please retry your request with appropriate credentials.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InsufficientCredentialsError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid credentials. Please retry your request with correct credentials.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InvalidCredentialsError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"One of more identifier names in the request has an invalid format.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InvalidIdentifierError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The query string in the request has an invalid syntax.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InvalidQuerySyntaxError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to parse the JSON in the request.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"JSONParseError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Kinvey server encountered an unexpected error. Please retry your request.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"KinveyInternalErrorRetry",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Kinvey server encountered an unexpected error. Please contact support@kinvey.com for assistance.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"KinveyInternalErrorStop",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(e,n,i,a){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"KinveyError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request is missing a query string.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"MissingQueryError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request is missing a required header.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"MissingRequestHeaderError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A required parameter is missing from the request.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"MissingRequestParameterError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error has occurred with Mobile Identity Connect.",n=arguments[1],i=arguments[2];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"MobileIdentityConnectError",e,n,i))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There was an error connecting to the network.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"NetworkConnectionError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There is not an active user.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"NoActiveUserError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No response was provided.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"NoResponseError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The entity was not found.",n=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:404,a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"NotFoundError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The value specified for one of the request parameters is out of range.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ParameterValueOutOfRangeError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to open a popup on this platform.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"PopupError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred with the query.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"QueryError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred on the server.",n=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ServerError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The time window for this request has expired.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StaleRequestError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred during sync.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"SyncError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request timed out.",n=arguments[1],i=arguments[2];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"TimeoutError",e,n,i))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This username is already taken. Please retry your request with a different username.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UserAlreadyExistsError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This collection is configured to disallow any modifications to an existing entity or creation of new entities.",n=arguments[1],i=arguments[2],a=arguments[3];return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"WritesToCollectionDisallowedError",e,n,i,a))}return i(t,e),t}(u.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=t.nested=t.isDefined=t.Log=t.KinveyObservable=void 0;var o=n(42),i=n(45),a=r(i),u=n(63),s=n(65),c=r(s);t.KinveyObservable=a.default,t.Log=c.default,t.isDefined=o.isDefined,t.nested=o.nested,t.randomString=u.randomString},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return!1===(0,c.default)(e)&&!1===(0,u.default)(e)}function i(e,t,n){if(!1===o(t))return e=n||e;for(var r=t.split("."),i=r.shift();i&&e;)e=e[i],i=r.shift();return n||e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=o,t.nested=i;var a=n(43),u=r(a),s=n(44),c=r(s)},function(e,t){function n(e){return null===e}e.exports=n},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(46),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(49),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"toPromise",value:function(){var e=this;return new s.default(function(t,n){var r=void 0;e.subscribe(function(e){r=e},n,function(){t(r)})})}}],[{key:"create",value:function(e){return new t(e)}}]),t}(c.Observable);t.default=l},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){$=e}function a(e){V=e}function u(){return void 0!==z?function(){z(c)}:s()}function s(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<H;e+=2){(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0}H=0}function l(e,t){var n=arguments,r=this,o=new this.constructor(p);void 0===o[ee]&&R(o);var i=r._state;return i?function(){var e=n[i-1];V(function(){return T(i,o,e,r._result)})}():k(r,o,e,t),o}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(p);return w(n,e),n}function p(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(e){return oe.error=e,oe}}function v(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function m(e,t,n){V(function(e){var r=!1,o=v(n,t,function(n){r||(r=!0,t!==n?w(e,n):O(e,n))},function(t){r||(r=!0,E(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,E(e,o))},e)}function b(e,t){t._state===ne?O(e,t._result):t._state===re?E(e,t._result):k(t,void 0,function(t){return w(e,t)},function(t){return E(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===oe?(E(e,oe.error),oe.error=null):void 0===n?O(e,t):o(n)?m(e,t,n):O(e,t)}function w(t,n){t===n?E(t,h()):e(n)?g(t,n,y(n)):O(t,n)}function _(e){e._onerror&&e._onerror(e._result),j(e)}function O(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&V(j,e))}function E(e,t){e._state===te&&(e._state=re,e._result=t,V(_,e))}function k(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ne]=n,o[i+re]=r,0===i&&e._state&&V(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?T(n,r,o,i):o(i);e._subscribers.length=0}}function x(){this.error=null}function P(e,t){try{return e(t)}catch(e){return ie.error=e,ie}}function T(e,t,n,r){var i=o(n),a=void 0,u=void 0,s=void 0,c=void 0;if(i){if(a=P(n,r),a===ie?(c=!0,u=a.error,a.error=null):s=!0,t===a)return void E(t,d())}else a=r,s=!0;t._state!==te||(i&&s?w(t,a):c?E(t,u):e===ne?O(t,a):e===re&&E(t,a))}function S(e,t){try{t(function(t){w(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}function A(){return ae++}function R(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(p),this.promise[ee]||R(this.promise),B(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):E(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function M(e){return new C(this,e).promise}function q(e){var t=this;return new t(B(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function D(e){var t=this,n=new t(p);return E(n,e),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[ee]=A(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&N(),this instanceof U?S(this,e):L())}function K(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=U}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var B=F,H=0,z=void 0,$=void 0,V=function(e,t){X[H]=e,X[H+1]=t,2===(H+=2)&&($?$(c):Z())},Y="undefined"!=typeof window?window:void 0,G=Y||{},Q=G.MutationObserver||G.WebKitMutationObserver,J="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),W="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=J?function(){return function(){return t.nextTick(c)}}():Q?function(){var e=0,t=new Q(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():W?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===Y?function(){try{var e=n(48);return z=e.runOnLoop||e.runOnContext,u()}catch(e){return s()}}():s();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,oe=new x,ie=new x,ae=0;return C.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===te&&n<e;n++)this._eachEntry(t[n],n)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var o=y(e);if(o===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===U){var i=new n(p);g(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?E(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;k(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},U.all=M,U.race=q,U.resolve=f,U.reject=D,U._setScheduler=i,U._setAsap=a,U._asap=V,U.prototype={constructor:U,then:l,catch:function(e){return this.then(null,e)}},U.polyfill=K,U.Promise=U,U})}).call(t,n(47),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){y&&h&&(y=!1,h.length?d=h.concat(d):v=-1,d.length&&u())}function u(){if(!y){var e=o(a);y=!0;for(var t=d.length;t;){for(h=d,d=[];++v<t;)h&&h[v].run();v=-1,t=d.length}h=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,d=[],y=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new s(e,t)),1!==d.length||y||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){},function(e,t,n){"use strict";var r=n(50),o=n(51),i=n(62),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=o.toSubscriber(e,t,n);if(r?r.call(i,this.source):i.add(this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var o=n.subscribe(function(t){if(o)try{e(t)}catch(e){r(e),o.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[i.$$observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t){(function(e){"use strict";if(t.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e,!t.root)throw new Error("RxJS could not find any global context (window, self, global)")}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof o.Subscriber)return e;if(e[i.$$rxSubscriber])return e[i.$$rxSubscriber]()}return e||t||n?new o.Subscriber(e,t,n):new o.Subscriber(a.empty)}var o=n(52),i=n(61),a=n(60);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(53),i=n(54),a=n(60),u=n(61),s=function(e){function t(n,r,o){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,o)}}return r(t,e),t.prototype[u.$$rxSubscriber]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(i.Subscription);t.Subscriber=s;var c=function(e){function t(t,n,r,i){e.call(this),this._parentSubscriber=t;var a,u=this;o.isFunction(n)?a=n:n&&(u=n,a=n.next,r=n.error,i=n.complete,o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this)),this._context=u,this._next=a,this._error=r,this._complete=i}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parentSubscriber;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(s)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var o=n(55),i=n(56),a=n(53),u=n(57),s=n(58),c=n(59),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,p=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,y=f?f.length:0;l;)l.remove(this),l=++d<y&&f[d]||null;if(a.isFunction(p)){var v=u.tryCatch(p).call(this);v===s.errorObject&&(t=!0,e=e||(s.errorObject.e instanceof c.UnsubscriptionError?r(s.errorObject.e.errors):[s.errorObject.e]))}if(o.isArray(h))for(d=-1,y=h.length;++d<y;){var m=h[d];if(i.isObject(m)){var v=u.tryCatch(m.unsubscribe).call(m);if(v===s.errorObject){t=!0,e=e||[];var b=s.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return i.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function o(e){return i=e,r}var i,a=n(58);t.tryCatch=o},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(50),o=r.root.Symbol;t.$$rxSubscriber="function"==typeof o&&"function"==typeof o.for?o.for("rxSubscriber"):"@@rxSubscriber"},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var o=n(50);t.getSymbolObservable=r,t.$$observable=r(o.root)},function(e,t,n){"use strict";function r(e){return""+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+(0,i.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=r;var o=n(64),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t){function n(e){return e=e||7,Math.random().toString(35).substr(2,e)}e.exports=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"debug",value:function(e,t){this.log("debug",e,t)}},{key:"info",value:function(e,t){this.log("info",e,t)}},{key:"warn",value:function(e,t){this.log("warn",e,t)}},{key:"error",value:function(e,t){this.log("error",e,t)}},{key:"log",value:function(e,t,n){console.log(e+" - "+t+" ("+JSON.stringify(n)+")")}}]),e}();t.default=new o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=t.SyncStore=t.SyncOperation=t.NetworkStore=t.FileStore=t.DataStoreType=t.CacheStore=void 0;var o=n(67),i=r(o),a=n(347),u=r(a),s=n(349),c=r(s),l=n(345),f=r(l),p=n(348),h=r(p),d=n(350),y=r(d),v=n(346);t.CacheStore=i.default,t.DataStoreType=a.DataStoreType,t.FileStore=c.default,t.NetworkStore=f.default,t.SyncOperation=v.SyncOperation,t.SyncStore=h.default,t.UserStore=y.default,t.default=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(68),l=r(c),f=n(203),p=r(f),h=n(209),d=r(h),y=n(218),v=r(y),m=n(126),b=r(m),g=n(223),w=r(g),_=n(226),O=r(_),E=n(228),k=r(E),j=n(234),x=n(2),P=n(272),T=r(P),S=n(283),A=r(S),R=n(341),C=n(41),I=n(345),M=r(I),q=n(346),D=r(q),N=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ttl=n.ttl||void 0,r.syncManager=new D.default(r.collection,n),r}return a(t,e),u(t,[{key:"find",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,p.default)({syncAutomatically:this.syncAutomatically},r);var o=!0===r.syncAutomatically;return C.KinveyObservable.create(function(i){return!e||e instanceof T.default?new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.next(a),!0===o?n.pendingSyncCount(e,r).then(function(t){return t>0?n.push(e,r).then(function(){return n.pendingSyncCount(e,r)}):t}).then(function(o){if(o>0)throw new x.KinveyError("Unable to fetch the entities on the backend. There are "+o+" entities that need to be synced.");return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"find",n).call(n,e,r).toPromise()}).then(function(e){var t=(0,l.default)(a,e,"_id"),o=Object.keys((0,d.default)(t,"_id")),i=(new T.default).contains("_id",o);return n.clear(i,r).then(function(){return e})}).then(function(e){return new j.CacheRequest({method:j.RequestMethod.PUT,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname}),properties:r.properties,body:e,timeout:r.timeout}).execute().then(function(e){return e.data})}):a}).then(function(e){i.next(e)}).then(function(){i.complete()}).catch(function(e){return i.error(e)}):i.error(new x.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"findById",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,p.default)({syncAutomatically:this.syncAutomatically},r);var o=!0===r.syncAutomatically;return C.KinveyObservable.create(function(i){return!1===(0,C.isDefined)(e)?(i.next(void 0),i.complete()):new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname+"/"+e}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data}).catch(function(){}).then(function(a){if(i.next(a),!0===o){var u=new T.default;return u.equalTo("_id",e),n.pendingSyncCount(u,r).then(function(e){return e>0?n.push(u,r).then(function(){return n.pendingSyncCount(u,r)}):e}).then(function(e){if(e>0)throw new x.KinveyError("Unable to find the entity on the backend. There are "+e+" entities that need to be synced.")}).then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findById",n).call(n,e,r).toPromise()}).then(function(e){return new j.CacheRequest({method:j.RequestMethod.PUT,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname}),properties:r.properties,body:e,timeout:r.timeout}).execute().then(function(e){return e.data})})}return a}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)})})}},{key:"group",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,p.default)({syncAutomatically:this.syncAutomatically},r);var o=!0===r.syncAutomatically;return C.KinveyObservable.create(function(i){return e instanceof A.default?new j.CacheRequest({method:j.RequestMethod.POST,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname+"/_group"}),properties:r.properties,aggregation:e,timeout:r.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.next(a),!0===o?n.pendingSyncCount(null,r).then(function(e){return e>0?n.push(null,r).then(function(){return n.pendingSyncCount(null,r)}):e}).then(function(o){if(o>0)throw new x.KinveyError("Unable to group entities on the backend. There are "+o+" entities that need to be synced.");return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"group",n).call(n,e,r).toPromise()}):a}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)}):i.error(new x.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,p.default)({syncAutomatically:this.syncAutomatically},r);var o=!0===r.syncAutomatically;return C.KinveyObservable.create(function(i){return!e||e instanceof T.default?new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:n.client.apiProtocol,host:n.client.apiHost,pathname:n.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length}).then(function(a){return i.next(a),!0===o?n.pendingSyncCount(e,r).then(function(t){return t>0?n.push(e,r).then(function(){return n.pendingSyncCount(e,r)}):t}).then(function(e){if(e>0)throw new x.KinveyError("Unable to count entities on the backend. There are "+e+" entities that need to be synced.")}).then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"count",n).call(n,e,r).toPromise()}):a}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)}):i.error(new x.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.KinveyObservable.create(function(r){return!1===(0,C.isDefined)(e)?(r.next(null),r.complete()):(0,b.default)(e)?r.error(new x.KinveyError("Unable to create an array of entities.","Please create entities one by one.")):new j.CacheRequest({method:j.RequestMethod.POST,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,body:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return t.syncManager.addCreateOperation(e,n).then(function(){return e})}).then(function(e){if(!0===t.syncAutomatically){var r=(new T.default).equalTo("_id",e._id);return t.push(r,n).then(function(e){var t=e[0];if((0,C.isDefined)(t.error))throw t.error;return t.entity})}return e}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.KinveyObservable.create(function(r){return!1===(0,C.isDefined)(e)?(r.next(null),r.complete()):(0,b.default)(e)?r.error(new x.KinveyError("Unable to update an array of entities.","Please update entities one by one.")):!1===(0,C.isDefined)(e._id)?r.error(new x.KinveyError("The entity provided does not contain an _id. An _id is required to update the entity.",e)):new j.CacheRequest({method:j.RequestMethod.PUT,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,body:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return t.syncManager.addUpdateOperation(e,n).then(function(){return e})}).then(function(e){if(!0===t.syncAutomatically){var r=(new T.default).equalTo("_id",e._id);return t.push(r,n).then(function(e){var t=e[0];if((0,C.isDefined)(t.error))throw t.error;return t.entity})}return e}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"remove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.KinveyObservable.create(function(r){return!e||e instanceof T.default?new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0?Promise.all((0,O.default)(e,function(e){if(new R.Metadata(e).isLocal()){var r=new T.default;return r.equalTo("_id",e._id),t.clearSync(r,n).then(function(){return e})}return t.syncManager.addDeleteOperation(e,n).then(function(){return e})})).then(function(){return e}):e}).then(function(e){if(e.length>0&&!0===t.syncAutomatically){var r=(0,v.default)(e,function(e){return new R.Metadata(e).isLocal()}),o=Object.keys((0,d.default)(e,"_id")),i=(new T.default).contains("_id",o);return t.push(i,n).then(function(e){return e.concat(r)})}return e}).then(function(e){return Promise.all((0,O.default)(e,function(e){return!1===(0,C.isDefined)(e.error)?new j.CacheRequest({method:j.RequestMethod.DELETE,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,authType:j.AuthType.Default,timeout:n.timeout}).execute().then(function(e){return e.data}):{count:0}}))}).then(function(e){return(0,w.default)(e,function(e,t){return e.count+=t.count,e},{count:0})}).then().then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new x.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise()}},{key:"removeById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.KinveyObservable.create(function(r){return!1===(0,C.isDefined)(e)?(r.next({count:0}),r.complete()):new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:n.properties,authType:j.AuthType.Default,timeout:n.timeout}).execute().then(function(e){return e.data}).catch(function(e){if(e instanceof x.NotFoundError)return null;throw e}).then(function(e){if((0,C.isDefined)(e)){if(new R.Metadata(e).isLocal()){var r=new T.default;return r.equalTo("_id",e._id),t.clearSync(r,n).then(function(){return e})}return t.syncManager.addDeleteOperation(e,n).then(function(){return e})}return e}).then(function(e){if(!0===t.syncAutomatically){var r=(new T.default).equalTo("_id",e._id);return t.push(r,n).then(function(){return e})}return e}).then(function(e){return new j.CacheRequest({method:j.RequestMethod.DELETE,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,authType:j.AuthType.Default,timeout:n.timeout}).execute().then(function(e){return e.data})}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"clear",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.KinveyObservable.create(function(r){return!e||e instanceof T.default?new j.CacheRequest({method:j.RequestMethod.GET,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all((0,O.default)(e,function(e){return Promise.resolve(e).then(function(e){if(new R.Metadata(e).isLocal()){var r=new T.default;return r.equalTo("_id",e._id),t.clearSync(r,n).then(function(){return e})}return e}).then(function(e){return new j.CacheRequest({method:j.RequestMethod.DELETE,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,authType:j.AuthType.Default,timeout:n.timeout}).execute().then(function(e){return e.data})})}))}).then(function(e){return(0,w.default)(e,function(e,t){return e.count+=t.count,e},{count:0})}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new x.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise()}},{key:"pendingSyncCount",value:function(e,t){return this.syncManager.count(e,t)}},{key:"pendingSyncEntities",value:function(e,t){return this.syncManager.find(e,t)}},{key:"push",value:function(e,t){return this.syncManager.push(e,t)}},{key:"pull",value:function(e){
var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=(0,p.default)({useDeltaFetch:this.useDeltaFetch},n),this.syncManager.pull(e,n).then(function(r){return t.clear(e,n).then(function(){return new j.CacheRequest({method:j.RequestMethod.PUT,url:k.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,body:r,timeout:n.timeout}).execute()}).then(function(){return r})})}},{key:"sync",value:function(e,t){var n=this;return t=(0,p.default)({useDeltaFetch:this.useDeltaFetch},t),this.push(e,t).then(function(r){return n.pull(e,t).then(function(e){return{push:r,pull:e}})})}},{key:"clearSync",value:function(e,t){return this.syncManager.clear(e,t)}},{key:"syncAutomatically",get:function(){return!0}}]),t}(M.default);t.default=N},function(e,t,n){var r=n(69),o=n(120),i=n(127),a=n(193),u=n(201),s=n(202),c=a(function(e,t){var n=s(t);return u(n)&&(n=void 0),u(e)?r(e,o(t,1,u,!0),i(n,2)):[]});e.exports=c},function(e,t,n){function r(e,t,n,r){var f=-1,p=i,h=!0,d=e.length,y=[],v=t.length;if(!d)return y;n&&(t=u(t,s(n))),r?(p=a,h=!1):t.length>=l&&(p=c,h=!1,t=new o(t));e:for(;++f<d;){var m=e[f],b=null==n?m:n(m);if(m=r||0!==m?m:0,h&&b===b){for(var g=v;g--;)if(t[g]===b)continue e;y.push(m)}else p(t,b,r)||y.push(m)}return y}var o=n(70),i=n(111),a=n(116),u=n(117),s=n(118),c=n(119),l=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(71),i=n(109),a=n(110);r.prototype.add=r.prototype.push=i,r.prototype.has=a,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(72),i=n(103),a=n(106),u=n(107),s=n(108);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(73),i=n(94),a=n(102);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(74),i=n(90),a=n(91),u=n(92),s=n(93);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(75);e.exports=r},function(e,t,n){var r=n(76),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(77),i=n(89);e.exports=r},function(e,t,n){function r(e){return!(!a(e)||i(e))&&(o(e)?h:s).test(u(e))}var o=n(78),i=n(86),a=n(85),u=n(88),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,f=c.toString,p=l.hasOwnProperty,h=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==u||t==s||t==a||t==c}var o=n(79),i=n(85),a="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?s:u:c&&c in Object(e)?i(e):a(e)}var o=n(80),i=n(83),a=n(84),u="[object Null]",s="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(81),o=r.Symbol;e.exports=o},function(e,t,n){var r=n(82),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0}catch(e){}var r=u.call(e);return t?e[s]=n:delete e[s],r}var o=n(80),i=Object.prototype,a=i.hasOwnProperty,u=i.toString,s=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(87),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(81),o=r["__core-js_shared__"];e.exports=o},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return u.call(t,e)?t[e]:void 0}var o=n(75),i="__lodash_hash_undefined__",a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(75),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(75),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(95),i=n(96),a=n(99),u=n(100),s=n(101);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var o=n(97),i=Array.prototype,a=i.splice;e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(98);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(97);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(97);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(97);e.exports=r},function(e,t,n){var r=n(76),o=n(81),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(104);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(105);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(104);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(104);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(104);e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=n(112);e.exports=r},function(e,t,n){function r(e,t,n){return t===t?a(e,t,n):o(e,i,n)}var o=n(113),i=n(114),a=n(115);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=n},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t){function n(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t){function n(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e,t,n,a,u){var s=-1,c=e.length;for(n||(n=i),u||(u=[]);++s<c;){var l=e[s];t>0&&n(l)?t>1?r(l,t-1,n,a,u):o(u,l):a||(u[u.length]=l)}return u}var o=n(121),i=n(122);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){function r(e){return a(e)||i(e)||!!(u&&e&&e[u])}var o=n(80),i=n(123),a=n(126),u=o?o.isConcatSpreadable:void 0;e.exports=r},function(e,t,n){var r=n(124),o=n(125),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(79),i=n(125),a="[object Arguments]";e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?u(e)?i(e[0],e[1]):o(e):s(e)}var o=n(128),i=n(174),a=n(189),u=n(126),s=n(190);e.exports=r},function(e,t,n){function r(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(129),i=n(171),a=n(173);e.exports=r},function(e,t,n){function r(e,t,n,r){var s=n.length,c=s,l=!r;if(null==e)return!c;for(e=Object(e);s--;){var f=n[s];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<c;){f=n[s];var p=f[0],h=e[p],d=f[1];if(l&&f[2]){if(void 0===h&&!(p in e))return!1}else{var y=new o;if(r)var v=r(h,d,p,e,t,y);if(!(void 0===v?i(d,h,a|u,r,y):v))return!1}}return!0}var o=n(130),i=n(136),a=1,u=2;e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(94),i=n(131),a=n(132),u=n(133),s=n(134),c=n(135);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=u,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(94);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<u-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var o=n(94),i=n(102),a=n(71),u=200;e.exports=r},function(e,t,n){function r(e,t,n,a,u){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,n,a,r,u))}var o=n(137),i=n(125);e.exports=r},function(e,t,n){function r(e,t,n,r,v,b){var g=c(e),w=c(t),_=g?d:s(e),O=w?d:s(t);_=_==h?y:_,O=O==h?y:O;var E=_==y,k=O==y,j=_==O;if(j&&l(e)){if(!l(t))return!1;g=!0,E=!1}if(j&&!E)return b||(b=new o),g||f(e)?i(e,t,n,r,v,b):a(e,t,_,n,r,v,b);if(!(n&p)){var x=E&&m.call(e,"__wrapped__"),P=k&&m.call(t,"__wrapped__");if(x||P){var T=x?e.value():e,S=P?t.value():t;return b||(b=new o),v(T,S,n,r,b)}}return!!j&&(b||(b=new o),u(e,t,n,r,v,b))}var o=n(130),i=n(138),a=n(140),u=n(144),s=n(166),c=n(126),l=n(153),f=n(157),p=1,h="[object Arguments]",d="[object Array]",y="[object Object]",v=Object.prototype,m=v.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,c,l){var f=n&u,p=e.length,h=t.length;if(p!=h&&!(f&&h>p))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var y=-1,v=!0,m=n&s?new o:void 0;for(l.set(e,t),l.set(t,e);++y<p;){var b=e[y],g=t[y];if(r)var w=f?r(g,b,y,t,e,l):r(b,g,y,e,t,l);if(void 0!==w){if(w)continue;v=!1;break}if(m){if(!i(t,function(e,t){if(!a(m,t)&&(b===e||c(b,e,n,r,l)))return m.push(t)})){v=!1;break}}else if(b!==g&&!c(b,g,n,r,l)){v=!1;break}}return l.delete(e),l.delete(t),v}var o=n(70),i=n(139),a=n(119),u=1,s=2;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r,o,E,j){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case p:case h:case v:return a(+e,+t);case d:return e.name==t.name&&e.message==t.message;case m:case g:return e==t+"";case y:var x=s;case b:var P=r&l;if(x||(x=c),e.size!=t.size&&!P)return!1;var T=j.get(e);if(T)return T==t;r|=f,j.set(e,t);var S=u(x(e),x(t),r,o,E,j);return j.delete(e),S;case w:if(k)return k.call(e)==k.call(t)}return!1}var o=n(80),i=n(141),a=n(98),u=n(138),s=n(142),c=n(143),l=1,f=2,p="[object Boolean]",h="[object Date]",d="[object Error]",y="[object Map]",v="[object Number]",m="[object RegExp]",b="[object Set]",g="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",O="[object DataView]",E=o?o.prototype:void 0,k=E?E.valueOf:void 0;e.exports=r},function(e,t,n){var r=n(81),o=r.Uint8Array;e.exports=o},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t,n,r,a,s){var c=n&i,l=o(e),f=l.length;if(f!=o(t).length&&!c)return!1;for(var p=f;p--;){var h=l[p];if(!(c?h in t:u.call(t,h)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var y=!0;s.set(e,t),s.set(t,e);for(var v=c;++p<f;){h=l[p];var m=e[h],b=t[h];if(r)var g=c?r(b,m,h,t,e,s):r(m,b,h,e,t,s);if(!(void 0===g?m===b||a(m,b,n,r,s):g)){y=!1;break}v||(v="constructor"==h)}if(y&&!v){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(y=!1)}return s.delete(e),s.delete(t),y}var o=n(145),i=1,a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return o(e,a,i)}var o=n(146),i=n(147),a=n(150);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return i(e)?r:o(r,n(e))}var o=n(121),i=n(126);e.exports=r},function(e,t,n){var r=n(148),o=n(149),i=Object.prototype,a=i.propertyIsEnumerable,u=Object.getOwnPropertySymbols,s=u?function(e){return null==e?[]:(e=Object(e),r(u(e),function(t){return a.call(e,t)}))}:o;e.exports=s},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(151),i=n(161),a=n(165);e.exports=r},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),l=!n&&!r&&u(e),p=!n&&!r&&!l&&c(e),h=n||r||l||p,d=h?o(e.length,String):[],y=d.length;for(var v in e)!t&&!f.call(e,v)||h&&("length"==v||l&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||d.push(v);return d}var o=n(152),i=n(123),a=n(126),u=n(153),s=n(156),c=n(157),l=Object.prototype,f=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){(function(e){var r=n(81),o=n(155),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===i,s=u?r.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||o;e.exports=l}).call(t,n(154)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(158),o=n(118),i=n(160),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},function(e,t,n){function r(e){return a(e)&&i(e.length)&&!!u[o(e)]}var o=n(79),i=n(159),a=n(125),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){(function(e){var r=n(82),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,u=a&&r.process,s=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=s}).call(t,n(154)(e))},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))u.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(162),i=n(163),a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(164),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(78),i=n(159);e.exports=r},function(e,t,n){var r=n(167),o=n(102),i=n(168),a=n(169),u=n(170),s=n(79),c=n(88),l=c(r),f=c(o),p=c(i),h=c(a),d=c(u),y=s;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||u&&"[object WeakMap]"!=y(new u))&&(y=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,n){var r=n(76),o=n(81),i=r(o,"DataView");e.exports=i},function(e,t,n){var r=n(76),o=n(81),i=r(o,"Promise");e.exports=i},function(e,t,n){var r=n(76),o=n(81),i=r(o,"Set");e.exports=i},function(e,t,n){var r=n(76),o=n(81),i=r(o,"WeakMap");e.exports=i},function(e,t,n){function r(e){for(var t=i(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,o(a)]}return t}var o=n(172),i=n(150);e.exports=r},function(e,t,n){function r(e){return e===e&&!o(e)}var o=n(85);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function r(e,t){return u(e)&&s(t)?c(l(e),t):function(n){var r=i(n,e);return void 0===r&&r===t?a(n,e):o(t,r,f|p)}}var o=n(136),i=n(175),a=n(186),u=n(178),s=n(172),c=n(173),l=n(185),f=1,p=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}var o=n(176);e.exports=r},function(e,t,n){function r(e,t){t=o(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[i(t[n++])];return n&&n==r?e:void 0}var o=n(177),i=n(185);e.exports=r},function(e,t,n){function r(e,t){return o(e)?e:i(e,t)?[e]:a(u(e))}var o=n(126),i=n(178),a=n(180),u=n(183);e.exports=r},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(u.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(126),i=n(179),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(79),i=n(125),a="[object Symbol]";e.exports=r},function(e,t,n){var r=n(181),o=/^\./,i=r(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,r,o){t.push(r?o.replace(/\\(\\)?/g,"$1"):n||e)}),t});e.exports=i},function(e,t,n){function r(e){var t=o(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}var o=n(182),i=500;e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(r.Cache||o),n}var o=n(71),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(184);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return i(e,r)+"";if(u(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(80),i=n(117),a=n(126),u=n(179),s=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(179),i=1/0;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&i(e,t,o)}var o=n(187),i=n(188);e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){t=o(t,e);for(var r=-1,l=t.length,f=!1;++r<l;){var p=c(t[r]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++r!=l?f:!!(l=null==e?0:e.length)&&s(l)&&u(p,l)&&(a(e)||i(e))}var o=n(177),i=n(123),a=n(126),u=n(156),s=n(159),c=n(185);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){return a(e)?o(u(e)):i(e)}var o=n(191),i=n(192),a=n(178),u=n(185);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return o(t,e)}}var o=n(176);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(189),i=n(194),a=n(196);e.exports=r},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,u=i(r.length-t,0),s=Array(u);++a<u;)s[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(s),o(e,this,c)}}var o=n(195),i=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(197),o=n(200),i=o(r);e.exports=i},function(e,t,n){var r=n(198),o=n(199),i=n(189),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){var r=n(76),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),u=o-(a-n);if(n=a,u>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)}var o=n(165),i=n(125);e.exports=r},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){var r=n(204),o=n(206),i=n(207),a=n(165),u=n(162),s=n(150),c=Object.prototype,l=c.hasOwnProperty,f=i(function(e,t){if(u(t)||a(t))return void o(t,s(t),e);for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=f},function(e,t,n){function r(e,t,n){var r=e[t];u.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(205),i=n(98),a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(199);e.exports=r},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var u=-1,s=t.length;++u<s;){var c=t[u],l=r?r(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):o(n,c,l)}return n}var o=n(204),i=n(205);e.exports=r},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,u&&i(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,a)}return t})}var o=n(193),i=n(208);e.exports=r},function(e,t,n){function r(e,t,n){if(!u(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(98),i=n(165),a=n(156),u=n(85);e.exports=r},function(e,t,n){var r=n(205),o=n(210),i=o(function(e,t,n){r(e,n,t)});e.exports=i},function(e,t,n){function r(e,t){return function(n,r){var s=u(n)?o:i,c=t?t():{};return s(n,e,a(r,2),c)}}var o=n(211),i=n(212),a=n(127),u=n(126);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}e.exports=n},function(e,t,n){function r(e,t,n,r){return o(e,function(e,o,i){t(r,e,n(e),i)}),r}var o=n(213);e.exports=r},function(e,t,n){var r=n(214),o=n(217),i=o(r);e.exports=i},function(e,t,n){function r(e,t){return e&&o(e,t,i)}var o=n(215),i=n(150);e.exports=r},function(e,t,n){var r=n(216),o=r();e.exports=o},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var s=a[e?u:++o];if(!1===n(i[s],s,i))break}return t}}e.exports=n},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,a=t?i:-1,u=Object(n);(t?a--:++a<i)&&!1!==r(u[a],a,u););return n}}var o=n(165);e.exports=r},function(e,t,n){function r(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],u=e.length;for(t=o(t,3);++r<u;){var s=e[r];t(s,r,e)&&(n.push(s),a.push(r))}return i(e,a),n}var o=n(127),i=n(219);e.exports=r},function(e,t,n){function r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==s){var s=a;i(a)?u.call(e,a,1):o(e,a)}}return e}var o=n(220),i=n(156),a=Array.prototype,u=a.splice;e.exports=r},function(e,t,n){function r(e,t){return t=o(t,e),null==(e=a(e,t))||delete e[u(i(t))]}var o=n(177),i=n(202),a=n(221),u=n(185);e.exports=r},function(e,t,n){function r(e,t){return t.length<2?e:o(e,i(t,0,-1))}var o=n(176),i=n(222);e.exports=r},function(e,t){function n(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}e.exports=n},function(e,t,n){function r(e,t,n){var r=s(e)?o:u,c=arguments.length<3;return r(e,a(t,4),n,c,i)}var o=n(224),i=n(213),a=n(127),u=n(225),s=n(126);e.exports=r},function(e,t){function n(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t){function n(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}e.exports=n},function(e,t,n){function r(e,t){return(u(e)?o:a)(e,i(t,3))}var o=n(117),i=n(127),a=n(227),u=n(126);e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=i(e)?Array(e.length):[];return o(e,function(e,o,i){r[++n]=t(e,o,i)}),r}var o=n(213),i=n(165);e.exports=r},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return c.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function u(e,t){return e?o(e,!1,!0).resolveObject(t):t}var s=n(229),c=n(230);t.parse=o,t.resolve=a,t.resolveObject=u,t.format=i,t.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(h),y=["'"].concat(d),v=["%","/","?",";","#"].concat(y),m=["/","?","#"],b={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(231);r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(o);i[0]=i[0].replace(/\\/g,"/"),e=i.join(o);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var u=p.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=l.exec(a);if(f){f=f[0];var h=f.toLowerCase();this.protocol=h,a=a.substr(f.length)}if(n||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d="//"===a.substr(0,2);!d||f&&g[f]||(a=a.substr(2),this.slashes=!0)}if(!g[f]&&(d||f&&!w[f])){for(var O=-1,E=0;E<m.length;E++){var k=a.indexOf(m[E]);-1!==k&&(-1===O||k<O)&&(O=k)}var j,x;x=-1===O?a.lastIndexOf("@"):a.lastIndexOf("@",O),-1!==x&&(j=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(j)),O=-1;for(var E=0;E<v.length;E++){var k=a.indexOf(v[E]);-1!==k&&(-1===O||k<O)&&(O=k)}-1===O&&(O=a.length),this.host=a.slice(0,O),a=a.slice(O),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var T=this.hostname.split(/\./),E=0,S=T.length;E<S;E++){var A=T[E];if(A&&!A.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var R="",C=0,I=A.length;C<I;C++)A.charCodeAt(C)>127?R+="x":R+=A[C];if(!R.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var M=T.slice(0,E),q=T.slice(E+1),D=A.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);D&&(M.push(D[1]),q.unshift(D[2])),q.length&&(a="/"+q.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=s.toASCII(this.hostname));var N=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+N,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[h])for(var E=0,S=y.length;E<S;E++){var U=y[E];if(-1!==a.indexOf(U)){var K=encodeURIComponent(U);K===U&&(K=escape(U)),a=a.split(U).join(K)}}var F=a.indexOf("#");-1!==F&&(this.hash=a.substr(F),a=a.slice(0,F));var B=a.indexOf("?");if(-1!==B?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=_.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),w[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",H=this.search||"";this.path=N+H}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var l=u[s];"protocol"!==l&&(n[l]=e[l])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!w[e.protocol]){for(var f=Object.keys(e),p=0;p<f.length;p++){var h=f[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}
var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=b||m||n.host&&e.pathname,O=_,E=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],k=n.protocol&&!w[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(k){n.hostname=n.host=E.shift();var j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");j&&(n.auth=j.shift(),n.host=n.hostname=j.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=E.slice(-1)[0],P=(n.host||e.host||E.length>1)&&("."===x||".."===x)||""===x,T=0,S=E.length;S>=0;S--)x=E[S],"."===x?E.splice(S,1):".."===x?(E.splice(S,1),T++):T&&(E.splice(S,1),T--);if(!_&&!O)for(;T--;T)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),P&&"/"!==E.join("/").substr(-1)&&E.push("");var A=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(k){n.hostname=n.host=A?"":E.length?E.shift():"";var j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");j&&(n.auth=j.shift(),n.host=n.hostname=j.shift())}return _=_||n.host&&E.length,_&&!A&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,o){!function(i){function a(e){throw RangeError(C[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(R,"."),r+u(e.split("."),t).join(".")}function c(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function l(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=q(e>>>10&1023|55296),e=56320|1023&e),t+=q(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?M(e/j):e>>1,e+=M(e/t);e>I*E>>1;r+=_)e=M(e/I);return M(r+(I+1)*e/(e+k))}function d(e){var t,n,r,o,i,u,s,c,p,d,y=[],v=e.length,m=0,b=P,g=x;for(n=e.lastIndexOf(T),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),y.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=m,u=1,s=_;o>=v&&a("invalid-input"),c=f(e.charCodeAt(o++)),(c>=_||c>M((w-m)/u))&&a("overflow"),m+=c*u,p=s<=g?O:s>=g+E?E:s-g,!(c<p);s+=_)d=_-p,u>M(w/d)&&a("overflow"),u*=d;t=y.length+1,g=h(m-i,t,0==i),M(m/t)>w-b&&a("overflow"),b+=M(m/t),m%=t,y.splice(m++,0,b)}return l(y)}function y(e){var t,n,r,o,i,u,s,l,f,d,y,v,m,b,g,k=[];for(e=c(e),v=e.length,t=P,n=0,i=x,u=0;u<v;++u)(y=e[u])<128&&k.push(q(y));for(r=o=k.length,o&&k.push(T);r<v;){for(s=w,u=0;u<v;++u)(y=e[u])>=t&&y<s&&(s=y);for(m=r+1,s-t>M((w-n)/m)&&a("overflow"),n+=(s-t)*m,t=s,u=0;u<v;++u)if(y=e[u],y<t&&++n>w&&a("overflow"),y==t){for(l=n,f=_;d=f<=i?O:f>=i+E?E:f-i,!(l<d);f+=_)g=l-d,b=_-d,k.push(q(p(d+g%b,0))),l=M(g/b);k.push(q(p(l,0))),i=h(n,m,r==o),n=0,++r}++n,++t}return k.join("")}function v(e){return s(e,function(e){return S.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return A.test(e)?"xn--"+y(e):e})}var b=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof o&&o);var g,w=2147483647,_=36,O=1,E=26,k=38,j=700,x=72,P=128,T="-",S=/^xn--/,A=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=_-O,M=Math.floor,q=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:y,toASCII:m,toUnicode:v},void 0!==(r=function(){return g}.call(t,n,t,e))&&(e.exports=r)}()}).call(t,n(154)(e),function(){return this}())},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(232),t.encode=t.stringify=n(233)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var s=0;s<u;++s){var c,l,f,p,h=e[s].replace(/\+/g,"%20"),d=h.indexOf(r);d>=0?(c=h.substr(0,d),l=h.substr(d+1)):(c=h,l=""),f=decodeURIComponent(c),p=decodeURIComponent(l),n(i,f)?Array.isArray(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.StatusCode=t.SerializeMiddleware=t.Response=t.RequestMethod=t.Rack=t.Properties=t.ParseMiddleware=t.NetworkRequest=t.NetworkRack=t.Middleware=t.MemoryAdapter=t.KinveyResponse=t.KinveyRequest=t.HttpMiddleware=t.Headers=t.DeltaFetchRequest=t.CacheRequest=t.CacheRack=t.CacheMiddleware=t.AuthType=void 0;var o=n(235),i=r(o),a=n(317),u=r(a),s=n(293),c=r(s),l=n(319),f=r(l),p=n(284),h=r(p),d=n(292),y=r(d),v=n(295),m=r(v),b=n(298),g=r(b);t.AuthType=l.AuthType,t.CacheMiddleware=b.CacheMiddleware,t.CacheRack=v.CacheRack,t.CacheRequest=i.default,t.DeltaFetchRequest=u.default,t.Headers=c.default,t.HttpMiddleware=b.HttpMiddleware,t.KinveyRequest=l.KinveyRequest,t.KinveyResponse=d.KinveyResponse,t.MemoryAdapter=b.MemoryAdapter,t.Middleware=g.default,t.NetworkRack=v.NetworkRack,t.NetworkRequest=f.default,t.ParseMiddleware=b.ParseMiddleware,t.Properties=l.Properties,t.Rack=m.default,t.RequestMethod=p.RequestMethod,t.Response=y.default,t.SerializeMiddleware=b.SerializeMiddleware,t.StatusCode=d.StatusCode,t.Storage=b.Storage,t.default=h.default},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var u=i.set;void 0!==u&&u.call(o,r)}return r},l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},f=n(46),p=o(f),h=n(236),d=o(h),y=n(228),v=o(y),m=n(238),b=o(m),g=n(241),w=o(g),_=n(269),O=o(_),E=n(2),k=n(272),j=o(k),x=n(283),P=o(x),T=n(41),S=n(284),A=o(S),R=n(292),C=n(295),I=e&&e.env&&e.env.KINVEY_USERS_NAMESPACE||"user"||"user",M=e&&e.env&&e.env.KINVEY_USER_ACTIVE_COLLECTION_NAME||void 0||"kinvey_active_user",q={},D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.aggregation=e.aggregation,n.query=e.query,n.rack=C.CacheRack,n}return u(t,e),s(t,[{key:"execute",value:function(){var e=this;return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this).then(function(t){if(t instanceof R.KinveyResponse||(t=new R.KinveyResponse({statusCode:t.statusCode,headers:t.headers,data:t.data})),!t.isSuccess())throw t.error;return(0,T.isDefined)(e.query)&&(0,T.isDefined)(t.data)&&(t.data=e.query.process(t.data)),(0,T.isDefined)(e.aggregation)&&(0,T.isDefined)(t.data)&&(t.data=e.aggregation.process(t.data)),t})}},{key:"toPlainObject",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toPlainObject",this).call(this);return e.appKey=this.appKey,e.collection=this.collection,e.entityId=this.entityId,e.encryptionKey=this.client?this.client.encryptionKey:void 0,e}},{key:"body",get:function(){return this._body},set:function(e){this._body=(0,w.default)(e)}},{key:"query",get:function(){return this._query},set:function(e){if((0,T.isDefined)(e)&&!(e instanceof j.default))throw new E.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"aggregation",get:function(){return this._aggregation},set:function(e){if((0,T.isDefined)(e)&&!(e instanceof P.default))throw new E.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");this._aggregation=e}},{key:"url",get:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",this)},set:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",e,this);var n=r.escape(v.default.parse(e).pathname),o=new d.default("(/:namespace)(/)(:appKey)(/)(:collection)(/)(:entityId)(/)"),i=o.match(n)||{},a=i.appKey,u=i.collection,s=i.entityId;this.appKey=a,this.collection=u,this.entityId=s}}],[{key:"loadActiveUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance();return new t({method:S.RequestMethod.GET,url:v.default.format({protocol:e.apiProtocol,host:e.apiHost,pathname:"/"+I+"/"+e.appKey+"/"+M})}).execute().then(function(e){return e.data}).then(function(e){return e.length>0?e[0]:null}).then(function(n){return!1===(0,T.isDefined)(n)?t.loadActiveUserLegacy(e):n}).then(function(n){return t.setActiveUser(e,n)}).then(function(t){return q[e.appKey]=t,t})}},{key:"loadActiveUserLegacy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance(),n=t.getActiveUserLegacy(e);return q[e.appKey]=n,n}},{key:"getActiveUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance();return q[e.appKey]}},{key:"getActiveUserLegacy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance();try{return b.default.get(e.appKey+"kinvey_user")}catch(e){return null}}},{key:"setActiveUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance(),n=arguments[1],r=p.default.resolve(null),o=t.getActiveUser(e);if((0,T.isDefined)(o)){t.setActiveUserLegacy(e,null),q[e.appKey]=null;r=new t({method:S.RequestMethod.DELETE,url:v.default.format({protocol:e.apiProtocol,host:e.apiHost,pathname:"/"+I+"/"+e.appKey+"/"+M+"/"+o._id})}).execute().then(function(e){return e.data}).catch(function(e){if(e instanceof E.NotFoundError)return null;throw e})}return r.then(function(){return!1===(0,T.isDefined)(n)?null:(delete n.password,q[e.appKey]=n,t.setActiveUserLegacy(e,n),new t({method:S.RequestMethod.POST,url:v.default.format({protocol:e.apiProtocol,host:e.apiHost,pathname:"/"+I+"/"+e.appKey+"/"+M}),body:n}).execute().then(function(e){return e.data}))}).then(function(){return n})}},{key:"setActiveUserLegacy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.default.sharedInstance(),t=arguments[1];try{return b.default.remove(e.appKey+"kinvey_user"),(0,T.isDefined)(t)&&b.default.set(e.appKey+"kinvey_user",t),!0}catch(e){return!1}}}]),t}(A.default);t.default=D}).call(t,n(47),function(){return this}())},function(e,t,n){var r,o,i,a=[].slice;!function(a,u){null!=n(237)?(o=[],r=u,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)):void 0!==t&&null!==t?e.exports=u():a.UrlPattern=u()}(this,function(){var e,t,n,r,o,i,u,s,c,l,f,p,h,d,y;return c=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},u=function(e,t){var n,r,o;for(o=[],n=-1,r=e.length;++n<r;)o=o.concat(t(e[n]));return o},d=function(e,t){var n,r,o;for(o="",n=-1,r=e.length;++n<r;)o+=t(e[n]);return o},h=function(e){return new RegExp(e.toString()+"|").exec("").length-1},f=function(e,t){var n,r,o,i,a;for(i={},n=-1,o=e.length;++n<o;)r=e[n],null!=(a=t[n])&&(null!=i[r]?(Array.isArray(i[r])||(i[r]=[i[r]]),i[r].push(a)):i[r]=a);return i},e={},e.Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,n){return function(r){var o,i;if(null!=(o=n(r)))return i=new e.Tagged(t,o.value),new e.Result(i,o.rest)}},e.regex=function(t){return function(n){var r,o;if(null!=(r=t.exec(n)))return o=r[0],new e.Result(o,n.slice(o.length))}},e.sequence=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],function(n){var r,o,i,a,u,s;for(r=-1,o=t.length,s=[],a=n;++r<o;){if(i=t[r],null==(u=i(a)))return;s.push(u.value),a=u.rest}return new e.Result(s,a)}},e.pick=function(){var t,n;return t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],function(r){var o,i;if(null!=(i=e.sequence.apply(e,n)(r)))return o=i.value,i.value=o[t],i}},e.string=function(t){var n;return n=t.length,function(r){if(r.slice(0,n)===t)return new e.Result(t,r.slice(n))}},e.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},e.baseMany=function(t,n,r,o,i){var a,u,s;for(u=i,s=r?"":[];;){if(null!=n&&null!=n(u))break;if(null==(a=t(u)))break;r?s+=a.value:s.push(a.value),u=a.rest}if(!o||0!==s.length)return new e.Result(s,u)},e.many1=function(t){return function(n){return e.baseMany(t,null,!1,!0,n)}},e.concatMany1Till=function(t,n){return function(r){return e.baseMany(t,n,!0,!0,r)}},e.firstChoice=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],function(t){var n,r,o,i;for(n=-1,r=e.length;++n<r;)if(o=e[n],null!=(i=o(t)))return i}},p=function(t){var n;return n={},n.wildcard=e.tag("wildcard",e.string(t.wildcardChar)),n.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy(function(){return n.pattern}),e.string(t.optionalSegmentEndChar))),n.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),n.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy(function(){return n.name}))),n.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),n.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy(function(){return n.escapedChar}),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),n.wildcard))),n.token=e.lazy(function(){return e.firstChoice(n.wildcard,n.optional,n.named,n.static)}),n.pattern=e.many1(e.lazy(function(){return n.token})),n},s={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},i=function(e,t){if(Array.isArray(e))return d(e,function(e){return i(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return c(e.value);case"optional":return"(?:"+i(e.value,t)+")?"}},o=function(e,t){return null==t&&(t=s.segmentValueCharset),"^"+i(e,t)+"$"},r=function(e){if(Array.isArray(e))return u(e,r);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return r(e.value)}},l=function(e,t,n,r){var o,i,a,u;if(null==r&&(r=!1),null!=(u=e[t])){if(o=n[t]||0,i=Array.isArray(u)?u.length-1:0,!(o>i))return a=Array.isArray(u)?u[o]:u,r&&(n[t]=o+1),a;if(r)throw new Error("too few values provided for key `"+t+"`")}else if(r)throw new Error("no values provided for key `"+t+"`")},n=function(e,t,r){var o,i;if(Array.isArray(e)){for(o=-1,i=e.length;++o<i;)if(n(e[o],t,r))return!0;return!1}switch(e.tag){case"wildcard":return null!=l(t,"_",r,!1);case"named":return null!=l(t,e.value,r,!1);case"static":return!1;case"optional":return n(e.value,t,r)}},y=function(e,t,r){if(Array.isArray(e))return d(e,function(e){return y(e,t,r)});switch(e.tag){case"wildcard":return l(t,"_",r,!0);case"named":return l(t,e.value,r,!0);case"static":return e.value;case"optional":return n(e.value,t,r)?y(e.value,t,r):""}},t=function(e,n){var i,a,u,c;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=n){if(!Array.isArray(n))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(i=h(this.regex),n.length!==i)throw new Error("regex contains "+i+" groups but array of group names contains "+n.length);this.names=n}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(a={escapeChar:(null!=n?n.escapeChar:void 0)||s.escapeChar,segmentNameStartChar:(null!=n?n.segmentNameStartChar:void 0)||s.segmentNameStartChar,segmentNameCharset:(null!=n?n.segmentNameCharset:void 0)||s.segmentNameCharset,segmentValueCharset:(null!=n?n.segmentValueCharset:void 0)||s.segmentValueCharset,optionalSegmentStartChar:(null!=n?n.optionalSegmentStartChar:void 0)||s.optionalSegmentStartChar,optionalSegmentEndChar:(null!=n?n.optionalSegmentEndChar:void 0)||s.optionalSegmentEndChar,wildcardChar:(null!=n?n.wildcardChar:void 0)||s.wildcardChar},c=p(a),null==(u=c.pattern(e)))throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(o(this.ast,a.segmentValueCharset)),this.names=r(this.ast)}},t.prototype.match=function(e){var t,n;return null==(n=this.regex.exec(e))?null:(t=n.slice(1),this.names?f(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return y(this.ast,e,{})},t.escapeForRegex=c,t.concatMap=u,t.stringConcatMap=d,t.regexGroupCount=h,t.keysAndValuesToObject=f,t.P=e,t.newParser=p,t.defaultOptions=s,t.astNodeToRegexString=o,t.astNodeToNames=r,t.getParam=l,t.astNodeContainsSegmentsForProvidedParams=n,t.stringify=y,t})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){(function(t){"use strict";function r(e,t){return 1===arguments.length?o(e):i(e,t)}function o(e){return JSON.parse(l.getItem(e))}function i(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}function a(e){return l.removeItem(e)}function u(){return l.clear()}var s=n(239),c=n(240),l="localStorage"in t&&t.localStorage?t.localStorage:s;r.set=i,r.get=o,r.remove=a,r.clear=u,r.on=c.on,r.off=c.off,e.exports=r}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){return e in a?a[e]:null}function r(e,t){return a[e]=t,!0}function o(e){return!!(e in a)&&delete a[e]}function i(){return a={},!0}var a={};e.exports={getItem:n,setItem:r,removeItem:o,clear:i}},function(e,t){(function(t){"use strict";function n(){t.addEventListener?t.addEventListener("storage",r,!1):t.attachEvent?t.attachEvent("onstorage",r):t.onstorage=r}function r(e){function n(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var r=a[e.key];r&&r.forEach(n)}function o(e,t){a[e]?a[e].push(t):a[e]=[t],!1===u&&n()}function i(e,t){var n=a[e];n.length>1?n.splice(n.indexOf(t),1):a[e]=[]}var a={},u=!1;e.exports={on:o,off:i}}).call(t,function(){return this}())},function(e,t,n){function r(e){return o(e,i|a)}var o=n(242),i=1,a=4;e.exports=r},function(e,t,n){function r(e,t,n,R,C,I){var M,q=t&E,D=t&k,N=t&j;if(n&&(M=C?n(e,R,C,I):n(e)),void 0!==M)return M;if(!_(e))return e;var L=g(e);if(L){if(M=v(e),!q)return l(e,M)}else{var U=y(e),K=U==P||U==T;if(w(e))return c(e,q);if(U==S||U==x||K&&!C){if(M=D||K?{}:b(e),!q)return D?p(e,s(M,e)):f(e,u(M,e))}else{if(!A[U])return C?e:{};M=m(e,U,r,q)}}I||(I=new o);var F=I.get(e);if(F)return F;I.set(e,M);var B=N?D?d:h:D?keysIn:O,H=L?void 0:B(e);return i(H||e,function(o,i){H&&(i=o,o=e[i]),a(M,i,r(o,t,n,i,e,I))}),M}var o=n(130),i=n(243),a=n(204),u=n(244),s=n(245),c=n(249),l=n(250),f=n(251),p=n(252),h=n(145),d=n(255),y=n(166),v=n(256),m=n(257),b=n(267),g=n(126),w=n(153),_=n(85),O=n(150),E=1,k=2,j=4,x="[object Arguments]",P="[object Function]",T="[object GeneratorFunction]",S="[object Object]",A={};A[x]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[S]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[P]=A["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(206),i=n(150);e.exports=r},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(206),i=n(246);e.exports=r},function(e,t,n){function r(e){return a(e)?o(e,!0):i(e)}var o=n(151),i=n(247),a=n(165);e.exports=r},function(e,t,n){function r(e){if(!o(e))return a(e);var t=i(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n}var o=n(85),i=n(162),a=n(248),u=Object.prototype,s=u.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}var o=n(81),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===i,s=u?o.Buffer:void 0,c=s?s.allocUnsafe:void 0;e.exports=r}).call(t,n(154)(e))},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(206),i=n(147);e.exports=r},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(206),i=n(253);e.exports=r},function(e,t,n){var r=n(121),o=n(254),i=n(147),a=n(149),u=Object.getOwnPropertySymbols,s=u?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=s},function(e,t,n){var r=n(164),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t,n){function r(e){return o(e,a,i)}var o=n(146),i=n(253),a=n(246);e.exports=r},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n,r){var A=e.constructor;switch(t){case g:return o(e);case f:case p:return new A(+e);case w:return i(e,r);case _:case O:case E:case k:case j:case x:case P:case T:case S:return l(e,r);case h:return a(e,r,n);case d:case m:return new A(e);case y:return u(e);case v:return s(e,r,n);case b:return c(e)}}var o=n(258),i=n(259),a=n(260),u=n(262),s=n(263),c=n(265),l=n(266),f="[object Boolean]",p="[object Date]",h="[object Map]",d="[object Number]",y="[object RegExp]",v="[object Set]",m="[object String]",b="[object Symbol]",g="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",O="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",j="[object Int32Array]",x="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",S="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(141);e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(258);e.exports=r},function(e,t,n){function r(e,t,n){var r=t?n(a(e),u):a(e);return i(r,o,new e.constructor)}var o=n(261),i=n(224),a=n(142),u=1;e.exports=r},function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e,t,n){var r=t?n(a(e),u):a(e);return i(r,o,new e.constructor)}var o=n(264),i=n(224),a=n(143),u=1;e.exports=r},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t,n){function r(e){return a?Object(a.call(e)):{}}var o=n(80),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(258);e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:o(i(e))}var o=n(268),i=n(254),a=n(162);e.exports=r},function(e,t,n){var r=n(85),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(228),u=r(a),s=n(203),c=r(s),l=n(270),f=r(l),p=n(271),h=r(p),d=n(2),y=n(41),v=n(234),m=e&&e.env&&e.env.KINVEY_DEFAULT_TIMEOUT||"60000"||6e4,b=null,g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),t=(0,c.default)({apiHostname:"https://baas.kinvey.com",micHostname:"https://auth.kinvey.com",liveServiceHostname:"https://kls.kinvey.com"},t),t.apiHostname&&(0,f.default)(t.apiHostname)){var n=u.default.parse(t.apiHostname);t.apiProtocol=n.protocol||"https:",t.apiHost=n.host}if(t.micHostname&&(0,f.default)(t.micHostname)){var r=u.default.parse(t.micHostname);t.micProtocol=r.protocol||"https:",t.micHost=r.host}if(t.liveServiceHostname&&(0,f.default)(t.liveServiceHostname)){var i=u.default.parse(t.liveServiceHostname);t.liveServiceProtocol=i.protocol||"https:",t.liveServiceHost=i.host}this.apiProtocol=t.apiProtocol,this.apiHost=t.apiHost,this.micProtocol=t.micProtocol,this.micHost=t.micHost,this.liveServiceProtocol=t.liveServiceProtocol,this.liveServiceHost=t.liveServiceHost,this.appKey=t.appKey,this.appSecret=t.appSecret,this.masterSecret=t.masterSecret,this.encryptionKey=t.encryptionKey,this.appVersion=t.appVersion,this.defaultTimeout=(0,y.isDefined)(t.defaultTimeout)?t.defaultTimeout:m}return i(e,[{key:"toPlainObject",value:function(){return{apiHostname:this.apiHostname,apiProtocol:this.apiProtocol,apiHost:this.apiHost,micHostname:this.micHostname,micProtocol:this.micProtocol,micHost:this.micHost,liveServiceHostname:this.liveServiceHostname,liveServiceHost:this.liveServiceHost,liveServiceProtocol:this.liveServiceProtocol,appKey:this.appKey,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey,appVersion:this.appVersion}}},{key:"activeUser",get:function(){return v.CacheRequest.getActiveUser(this)}},{key:"apiHostname",get:function(){return u.default.format({protocol:this.apiProtocol,host:this.apiHost})}},{key:"micHostname",get:function(){return u.default.format({protocol:this.micProtocol,host:this.micHost})}},{key:"liveServiceHostname",get:function(){return u.default.format({protocol:this.liveServiceProtocol,host:this.liveServiceHost})}},{key:"appVersion",get:function(){return this._appVersion},set:function(e){e&&!(0,f.default)(e)&&(e=String(e)),this._appVersion=e}},{key:"defaultTimeout",get:function(){return this._defaultTimeout},set:function(e){if(e=parseInt(e,10),!1===(0,h.default)(e)||isNaN(e))throw new d.KinveyError("Invalid timeout. Timeout must be a number.");e<0&&(y.Log.info("Default timeout is less than 0. Setting default timeout to "+m+"ms."),e=m),this._defaultTimeout=e}}],[{key:"initialize",value:function(t){var n=new e(t);return b=n,v.CacheRequest.loadActiveUser(n).then(function(){return n})}},{key:"sharedInstance",value:function(){if(!1===(0,y.isDefined)(b))throw new d.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return b}}]),e}();t.default=g}).call(t,n(47))},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&a(e)&&o(e)==u}var o=n(79),i=n(126),a=n(125),u="[object String]";e.exports=r},function(e,t,n){function r(e){return"number"==typeof e||i(e)&&o(e)==a}var o=n(79),i=n(125),a="[object Number]";e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=n(41),s=n(273),c=r(s),l=n(203),f=r(l),p=n(126),h=r(p),d=n(271),y=r(d),v=n(270),m=r(v),b=n(85),g=r(b),w=n(274),_=r(w),O=n(276),E=r(O),k=n(277),j=r(k),x=n(279),P=r(x),T=n(281),S=r(T),A=["$nearSphere"],R=function(){function e(t){o(this,e),t=(0,f.default)({fields:[],filter:{},sort:null,limit:null,skip:0},t),this.fields=t.fields,this.filter=t.filter,this.sort=t.sort,this.limit=t.limit,this.skip=t.skip,this._parent=null}return i(e,[{key:"isSupportedOffline",value:function(){var e=this,t=!0;return(0,j.default)(A,function(n){return t=!(0,P.default)(e.filter,n)}),t}},{key:"equalTo",value:function(e,t){return this.addFilter(e,t)}},{key:"contains",value:function(e,t){if(!1===(0,u.isDefined)(t))throw new a.QueryError("You must supply a value.");return!1===(0,h.default)(t)&&(t=[t]),this.addFilter(e,"$in",t)}},{key:"containsAll",value:function(e,t){if(!1===(0,u.isDefined)(t))throw new a.QueryError("You must supply a value.");return!1===(0,h.default)(t)&&(t=[t]),this.addFilter(e,"$all",t)}},{key:"greaterThan",value:function(e,t){if(!1===(0,y.default)(t)&&!1===(0,
m.default)(t))throw new a.QueryError("You must supply a number or string.");return this.addFilter(e,"$gt",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){if(!1===(0,y.default)(t)&&!1===(0,m.default)(t))throw new a.QueryError("You must supply a number or string.");return this.addFilter(e,"$gte",t)}},{key:"lessThan",value:function(e,t){if(!1===(0,y.default)(t)&&!1===(0,m.default)(t))throw new a.QueryError("You must supply a number or string.");return this.addFilter(e,"$lt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){if(!1===(0,y.default)(t)&&!1===(0,m.default)(t))throw new a.QueryError("You must supply a number or string.");return this.addFilter(e,"$lte",t)}},{key:"notEqualTo",value:function(e,t){return this.addFilter(e,"$ne",t)}},{key:"notContainedIn",value:function(e,t){return!1===(0,h.default)(t)&&(t=[t]),this.addFilter(e,"$nin",t)}},{key:"and",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.join("$and",t)}},{key:"nor",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if((0,u.isDefined)(this._parent)&&(0,S.default)(this._parent.filter,"$and")){var r;return(r=this._parent).nor.apply(r,t)}return this.join("$nor",t)}},{key:"or",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if((0,u.isDefined)(this._parent)){var r;return(r=this._parent).or.apply(r,t)}return this.join("$or",t)}},{key:"exists",value:function(e,t){return t=void 0===t||(t||!1),this.addFilter(e,"$exists",t)}},{key:"mod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,m.default)(t)&&(t=parseFloat(t)),(0,m.default)(n)&&(n=parseFloat(n)),!(0,y.default)(t))throw new a.QueryError("divisor must be a number");if(!(0,y.default)(n))throw new a.QueryError("remainder must be a number");return this.addFilter(e,"$mod",[t,n])}},{key:"matches",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];if((0,_.default)(t)||(t=new RegExp(t)),0!==t.source.indexOf("^"))throw new a.QueryError("regExp must have '^' at the beginning of the expression to make it an anchored expression.");if((t.ignoreCase||n.ignoreCase)&&!1!==n.ignoreCase)throw new a.QueryError("ignoreCase flag is not supported");return(t.multiline||n.multiline)&&!1!==n.multiline&&r.push("m"),!0===n.extended&&r.push("x"),!0===n.dotMatchesAll&&r.push("s"),r.length>0&&this.addFilter(e,"$options",r.join("")),this.addFilter(e,"$regex",t.source)}},{key:"near",value:function(e,t,n){if(!(0,h.default)(t)||!(0,y.default)(t[0])||!(0,y.default)(t[1]))throw new a.QueryError("coord must be a [number, number]");var r=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return(0,y.default)(n)&&this.addFilter(e,"$maxDistance",n),r}},{key:"withinBox",value:function(e,t,n){if(!(0,h.default)(t)||!(0,y.default)(t[0])||!(0,y.default)(t[1]))throw new a.QueryError("bottomLeftCoord must be a [number, number]");if(!(0,h.default)(n)||!(0,y.default)(n[0])||!(0,y.default)(n[1]))throw new a.QueryError("upperRightCoord must be a [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),n[0]=parseFloat(n[0]),n[1]=parseFloat(n[1]);var r=[[t[0],t[1]],[n[0],n[1]]];return this.addFilter(e,"$within",{$box:r})}},{key:"withinPolygon",value:function(e,t){if(!1===(0,h.default)(t)||0===t.length||t.length>3)throw new a.QueryError("coords must be a [[number, number]]");return t=t.map(function(e){if(!1===(0,y.default)(e[0])||!1===(0,y.default)(e[1]))throw new a.QueryError("coords argument must be a [number, number]");return[parseFloat(e[0]),parseFloat(e[1])]}),this.addFilter(e,"$within",{$polygon:t})}},{key:"size",value:function(e,t){if((0,m.default)(t)&&(t=parseFloat(t)),!(0,y.default)(t))throw new a.QueryError("size must be a number");return this.addFilter(e,"$size",t)}},{key:"ascending",value:function(e){return(0,u.isDefined)(this._parent)?this._parent.ascending(e):this.sort[e]=1,this}},{key:"descending",value:function(e){return(0,u.isDefined)(this._parent)?this._parent.descending(e):this.sort[e]=-1,this}},{key:"addFilter",value:function(e,t,n){return(0,g.default)(this.filter[e])||(this.filter[e]={}),(0,u.isDefined)(t)&&(0,u.isDefined)(n)?this.filter[e][t]=n:this.filter[e]=t,this}},{key:"join",value:function(t,n){var r=this,o=this,i={};n=n.map(function(t){if(!(t instanceof e)){if(!(0,g.default)(t))throw new a.QueryError("query argument must be of type: Kinvey.Query[] or Object[].");t=new e(t)}return t.toPlainObject().filter}),0===n.length&&(o=new e,n=[o.toPlainObject().filter],o._parent=this);var u=Object.keys(this.filter);return(0,j.default)(u,function(e){i[e]=r.filter[e],delete r.filter[e]}),this.filter[t]=[i].concat(n),o}},{key:"process",value:function(e){if(!1===this.isSupportedOffline()){var t="This query is not able to run locally. The following filters are not supported locally:";throw(0,j.default)(A,function(e){t=t+" "+e}),new a.QueryError(t)}if(!(0,h.default)(e))throw new a.QueryError("data argument must be of type: Array.");var n=this.toPlainObject();return e=(0,c.default)(n.filter,e),(0,h.default)(n.fields)&&n.fields.length>0&&(e=e.map(function(e){var t=Object.keys(e);return(0,j.default)(t,function(t){-1===n.fields.indexOf(t)&&delete e[t]}),e})),(0,u.isDefined)(n.sort)&&e.sort(function(e,t){for(var r in n.sort)if(n.sort.hasOwnProperty(r)){var o=(0,u.nested)(e,r),i=(0,u.nested)(t,r);if((0,u.isDefined)(o)&&!1===(0,u.isDefined)(i))return-1;if((0,u.isDefined)(i)&&!1===(0,u.isDefined)(o))return 1;if(o!==i){var a=n.sort[r];return(o<i?-1:1)*a}}return 0}),(0,y.default)(n.skip)?(0,y.default)(n.limit)&&n.limit>0?e.slice(n.skip,n.skip+n.limit):e.slice(n.skip):e}},{key:"toPlainObject",value:function(){return(0,u.isDefined)(this._parent)?this._parent.toPlainObject():{fields:this.fields,filter:this.filter,sort:this.sort,skip:this.skip,limit:this.limit}}},{key:"toQueryString",value:function(){var e={};(0,E.default)(this.filter)||(e.query=this.filter),(0,E.default)(this.fields)||(e.fields=this.fields.join(",")),(0,y.default)(this.limit)&&(e.limit=this.limit),(0,y.default)(this.skip)&&this.skip>0&&(e.skip=this.skip),(0,E.default)(this.sort)||(e.sort=this.sort);var t=Object.keys(e);return(0,j.default)(t,function(t){e[t]=(0,m.default)(e[t])?e[t]:JSON.stringify(e[t])}),e}},{key:"toString",value:function(){return JSON.stringify(this.toQueryString())}},{key:"fields",get:function(){return this._fields},set:function(e){if(e=e||[],!(0,h.default)(e))throw new a.QueryError("fields must be an Array");(0,u.isDefined)(this._parent)?this._parent.fields=e:this._fields=e}},{key:"filter",get:function(){return this._filter},set:function(e){this._filter=e}},{key:"sort",get:function(){return this._sort},set:function(e){if(e&&!1===(0,g.default)(e))throw new a.QueryError("sort must an Object");(0,u.isDefined)(this._parent)?this._parent.sort=e:this._sort=e||{}}},{key:"limit",get:function(){return this._limit},set:function(e){if((0,m.default)(e)&&(e=parseFloat(e)),(0,u.isDefined)(e)&&!1===(0,y.default)(e))throw new a.QueryError("limit must be a number");this._parent?this._parent.limit=e:this._limit=e}},{key:"skip",get:function(){return this._skip},set:function(e){if((0,m.default)(e)&&(e=parseFloat(e)),!1===(0,y.default)(e))throw new a.QueryError("skip must be a number");(0,u.isDefined)(this._parent)?this._parent.skip=e:this._skip=e}}]),e}();t.default=R},function(e,t){!function(){"use strict";function t(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date?e.getTime():e instanceof Array?e.map(r):e}function o(e,t){return e.get?e.get(t):e[t]}function i(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,a=r.length;i<a;i++)if(e(t,o(r,i)))return!0;return!1}}function a(e,t){return e.v(e.a,t)}function u(e,t){for(var n=0;n<e.length;n++)if(a(t,o(e,n)))return n;return-1}function s(e,t){return{a:e,v:t}}function c(e,t){var n=[];return l(t,e.k,0,n),1===n.length?a(e.nv,n[0]):!!~u(n,e.nv)}function l(e,t,r,i){if(r===t.length||void 0==e)return void i.push(e);var a=o(t,r);if(n(e)&&isNaN(Number(a)))for(var u=0,s=e.length;u<s;u++)l(o(e,u),t,r,i);else l(o(e,a),t,r+1,i)}function f(e,t){return{a:{k:e,nv:t},v:c}}function p(e){(!(e=r(e))||"Object"!==e.constructor.toString()&&"functionObject(){[nativecode]}"!==e.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(e={$eq:e});var t=[];for(var n in e){var o=e[n];if("$options"!==n)if(y[n])v[n]&&(o=v[n](o,e)),t.push(s(r(o),y[n]));else{if(36===n.charCodeAt(0))throw new Error("Unknown operation "+n);t.push(f(n.split("."),p(o)))}}return 1===t.length?t[0]:s(t,y.$and)}function h(e,t){var n=p(e);return t&&(n={a:n,v:function(e,n){return a(e,t(n))}}),n}function d(e,n,r){function o(e){return a(i,e)}t(n)&&(r=n,n=void 0);var i=h(e,r);return n?n.filter(o):o}var y={$eq:i(function(e,t){return e(t)}),$ne:function(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,a=r.length;i<a;i++)if(!e(t,o(r,i)))return!1;return!0}}(function(e,t){return!e(t)}),$or:function(e,t){for(var n=0,r=e.length;n<r;n++)if(a(o(e,n),t))return!0;return!1},$gt:i(function(e,t){return d.compare(r(t),e)>0}),$gte:i(function(e,t){return d.compare(r(t),e)>=0}),$lt:i(function(e,t){return d.compare(r(t),e)<0}),$lte:i(function(e,t){return d.compare(r(t),e)<=0}),$mod:i(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array))return!!~e.indexOf(r(t));for(var n=t.length;n--;)if(~e.indexOf(r(o(t,n))))return!0;return!1},$nin:function(e,t){return!y.$in(e,t)},$not:function(e,t){return!a(e,t)},$type:function(e,t){return void 0!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t){return y.$and(e,t)},$size:function(e,t){return!!t&&e===t.length},$nor:function(e,t){for(var n=0,r=e.length;n<r;n++)if(a(o(e,n),t))return!1;return!0},$and:function(e,t){t||(t=[]);for(var n=0,r=e.length;n<r;n++)if(!a(o(e,n),t))return!1;return!0},$regex:i(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t){return e.call(t,t)},$elemMatch:function(e,t){return n(t)?!!~u(t,e):a(e,t)},$exists:function(e,t){return void 0!=t===e}},v={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:n(e)&&!e.length?function(e){return n(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===d.compare(r(t),e)}},$ne:function(e){return v.$eq(e)},$and:function(e){return e.map(p)},$all:function(e){return v.$and(e)},$or:function(e){return e.map(p)},$nor:function(e){return e.map(p)},$not:function(e){return p(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return p(e)},$exists:function(e){return!!e}};d.use=function(e){if(t(e))return e(d);for(var n in e)36===n.charCodeAt(0)&&(y[n]=e[n])},d.indexOf=function(e,t,n){return u(t,h(e,n))},d.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}},void 0!==e&&void 0!==e.exports&&(e.exports=d),"undefined"!=typeof window&&(window.sift=d)}()},function(e,t,n){var r=n(275),o=n(118),i=n(160),a=i&&i.isRegExp,u=a?o(a):r;e.exports=u},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(79),i=n(125),a="[object RegExp]";e.exports=r},function(e,t,n){function r(e){if(null==e)return!0;if(s(e)&&(u(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||f(e)||a(e)))return!e.length;var t=i(e);if(t==p||t==h)return!e.size;if(l(e))return!o(e).length;for(var n in e)if(y.call(e,n))return!1;return!0}var o=n(161),i=n(166),a=n(123),u=n(126),s=n(165),c=n(153),l=n(162),f=n(157),p="[object Map]",h="[object Set]",d=Object.prototype,y=d.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){return(u(e)?o:i)(e,a(t))}var o=n(243),i=n(213),a=n(278),u=n(126);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:o}var o=n(189);e.exports=r},function(e,t,n){function r(e,t){return o(e,a(t,3),i)}var o=n(280),i=n(214),a=n(127);e.exports=r},function(e,t){function n(e,t,n){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=n,!1}),r}e.exports=n},function(e,t,n){function r(e,t){return null!=e&&i(e,t,o)}var o=n(282),i=n(188);e.exports=r},function(e,t){function n(e,t){return null!=e&&o.call(e,t)}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(203),u=r(a),s=n(277),c=r(s),l=n(270),f=r(l),p=n(85),h=r(p),d=n(78),y=r(d),v=n(241),m=r(v),b=n(2),g=n(41),w=n(272),_=function(){function e(t){o(this,e),t=(0,u.default)({query:null,initial:{},key:{},reduceFn:function(){}.toString()},t),this.query=t.query,this.initial=t.initial,this.key=t.key,this.reduceFn=t.reduceFn}return i(e,[{key:"by",value:function(e){return this.key[e]=!0,this}},{key:"process",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.toPlainObject(),n=Object.keys(t.key),r=t.reduceFn.replace(/function[\s\S]*?\([\s\S]*?\)/,"");if(t.reduce=new Function(["doc","out"],r),this.query&&(e=this.query.process(e)),n.length>0){var o=[];return n.forEach(function(n){var r={};e.forEach(function(e){var o=e[n],i=(0,g.isDefined)(r[o])?r[o]:(0,m.default)(t.initial),a=t.reduce(e,i);(0,g.isDefined)(a)&&(i=a),r[o]=i}),Object.keys(r).forEach(function(e){var t={};t[n]=e,t=(0,u.default)({},t,r[e]),o.push(t)})}),o}var i=(0,m.default)(t.initial);return(0,c.default)(e,function(e){var n=t.reduce(e,i);(0,g.isDefined)(n)&&(i=n)}),[i]}},{key:"toPlainObject",value:function(){return{key:this.key,initial:this.initial,reduce:this.reduceFn,reduceFn:this.reduceFn,condition:this.query?this.query.toPlainObject().filter:{},query:this.query?this.query.toPlainObject():null}}},{key:"initial",get:function(){return(0,m.default)(this._initial)},set:function(e){if(!(0,h.default)(e))throw new b.KinveyError("initial must be an Object.");this._initial=e}},{key:"query",get:function(){return this._query},set:function(e){if((0,g.isDefined)(e)&&!(e instanceof w.Query))throw new b.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"reduceFn",get:function(){return this._reduceFn},set:function(e){if((0,y.default)(e)&&(e=e.toString()),!(0,f.default)(e))throw new b.KinveyError("fn argument must be of type function or string.");this._reduceFn=e}}],[{key:"count",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var n=new e;return n.by(t),n.initial={count:0},n.reduceFn="function(doc, out) {  out.count += 1;  return out;}",n}},{key:"sum",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var n=new e;return n.initial={sum:0},n.reduceFn='function(doc, out) {  out.sum += doc["'+t+'"];  return out;}',n}},{key:"min",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var n=new e;return n.initial={min:1/0},n.reduceFn='function(doc, out) {  out.min = Math.min(out.min, doc["'+t+'"]);  return out;}',n}},{key:"max",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var n=new e;return n.initial={max:-1/0},n.reduceFn='function(doc, out) {  out.max = Math.max(out.max, doc["'+t+'"]);  return out;}',n}},{key:"average",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var n=new e;return n.initial={count:0,average:0},n.reduceFn='function(doc, out) {  out.average = (out.average * out.count + doc["'+t+'"]) / (out.count + 1);  out.count += 1;  return out;}',n}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestMethod=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(285),c=r(s),l=n(290),f=r(l),p=n(203),h=r(p),d=n(270),y=r(d),v=n(271),m=r(v),b=n(269),g=r(b),w=n(2),_=n(41),O=n(292),E=r(O),k=n(293),j=r(k),x={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};Object.freeze(x),t.RequestMethod=x;var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),t=(0,h.default)({followRedirect:!0},t),this.client=t.client,this.method=t.method||x.GET,this.headers=t.headers||new j.default,this.url=t.url||"",this.body=t.body||t.data,this.timeout=(0,_.isDefined)(t.timeout)?t.timeout:this.client.defaultTimeout,this.followRedirect=!0===t.followRedirect,this.cache=!0===t.cache}return i(e,[{key:"execute",value:function(){return!1===(0,_.isDefined)(this.rack)?u.default.reject(new w.KinveyError("Unable to execute the request. Please provide a rack to execute the request.")):this.rack.execute(this.toPlainObject()).then(function(e){if(!1===(0,_.isDefined)(e))throw new w.NoResponseError;return e instanceof E.default==!1&&(e=new E.default({statusCode:e.statusCode,headers:e.headers,data:e.data})),e})}},{key:"cancel",value:function(){return this.rack.cancel()}},{key:"toPlainObject",value:function(){return{method:this.method,headers:this.headers.toPlainObject(),url:this.url,body:this.body,timeout:this.timeout,followRedirect:this.followRedirect}}},{key:"client",get:function(){return this._client||g.default.sharedInstance()},set:function(e){if(e&&e instanceof g.default==!1)throw new w.KinveyError("client must be an instance of the Client class.");this._client=e}},{key:"method",get:function(){return this._method},set:function(e){switch((0,y.default)(e)||(e=String(e)),e=e.toUpperCase()){case x.GET:case x.POST:case x.PATCH:case x.PUT:case x.DELETE:this._method=e;break;default:throw new w.KinveyError("Invalid request method. Only GET, POST, PATCH, PUT, and DELETE are allowed.")}}},{key:"headers",get:function(){return this._headers},set:function(e){e instanceof j.default||(e=new j.default(e)),this._headers=e}},{key:"url",get:function(){return!0===this.cache?(0,f.default)(this._url,c.default.stringify({_:Math.random().toString(36).substr(2)})):this._url},set:function(e){this._url=e}},{key:"data",get:function(){return this.body},set:function(e){this.body=e}},{key:"timeout",get:function(){return this._timeout},set:function(e){if(e=parseInt(e,10),!1===(0,m.default)(e)||isNaN(e))throw new w.KinveyError("Invalid timeout. Timeout must be a number.");this._timeout=e}},{key:"followRedirect",get:function(){return this._followRedirect},set:function(e){this._followRedirect=!!e}},{key:"cache",get:function(){return this._cache},set:function(e){this._cache=!!e}}]),e}();t.default=P},function(e,t,n){"use strict";var r=n(286),o=n(289),i=n(288);e.exports={formats:i,parse:o,stringify:r}},function(e,t,n){"use strict";var r=n(287),o=n(288),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,n,o,i,a,u,s,c,l,f,p,h){var d=t;if("function"==typeof s)d=s(n,d);else if(d instanceof Date)d=f(d);else if(null===d){if(i)return u&&!h?u(n):n;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||r.isBuffer(d)){if(u){return[p(h?n:u(n))+"="+p(u(d))]}return[p(n)+"="+p(String(d))]}var y=[];if(void 0===d)return y;var v;if(Array.isArray(s))v=s;else{var m=Object.keys(d);v=c?m.sort(c):m}for(var b=0;b<v.length;++b){var g=v[b];a&&null===d[g]||(y=Array.isArray(d)?y.concat(e(d[g],o(n,g),o,i,a,u,s,c,l,f,p,h)):y.concat(e(d[g],n+(l?"."+g:"["+g+"]"),o,i,a,u,s,c,l,f,p,h)))}return y};e.exports=function(e,t){var n=e,r=t||{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var a=void 0===r.delimiter?u.delimiter:r.delimiter,c="boolean"==typeof r.strictNullHandling?r.strictNullHandling:u.strictNullHandling,l="boolean"==typeof r.skipNulls?r.skipNulls:u.skipNulls,f="boolean"==typeof r.encode?r.encode:u.encode,p="function"==typeof r.encoder?r.encoder:u.encoder,h="function"==typeof r.sort?r.sort:null,d=void 0!==r.allowDots&&r.allowDots,y="function"==typeof r.serializeDate?r.serializeDate:u.serializeDate,v="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:u.encodeValuesOnly;if(void 0===r.format)r.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,r.format))throw new TypeError("Unknown format option provided.");var m,b,g=o.formatters[r.format];"function"==typeof r.filter?(b=r.filter,n=b("",n)):Array.isArray(r.filter)&&(b=r.filter,m=b);var w=[];if("object"!=typeof n||null===n)return"";var _;_=r.arrayFormat in i?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var O=i[_];m||(m=Object.keys(n)),h&&m.sort(h);for(var E=0;E<m.length;++E){var k=m[E];l&&null===n[k]||(w=w.concat(s(n[k],k,O,c,l,f?p:null,b,h,d,y,g,v)))}return w.join(a)}},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,n){var i=r[n];return Object.prototype.hasOwnProperty.call(e,n)?e[n]=t.merge(e[n],i,o):e[n]=i,e},i)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(o):i<128?n+=r[i]:i<2048?n+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,n){if("object"!=typeof e||null===e)return e;var r=n||[],o=r.indexOf(e);if(-1!==o)return r[o];if(r.push(e),Array.isArray(e)){for(var i=[],a=0;a<e.length;++a)e[a]&&"object"==typeof e[a]?i.push(t.compact(e[a],r)):void 0!==e[a]&&i.push(e[a]);return i}return Object.keys(e).forEach(function(n){e[n]=t.compact(e[n],r)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){"use strict";var n=String.prototype.replace;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,/%20/g,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";var r=n(287),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var n={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0;i<r.length;++i){var a,u,s=r[i],c=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;-1===c?(a=t.decoder(s),u=t.strictNullHandling?null:""):(a=t.decoder(s.slice(0,c)),u=t.decoder(s.slice(c+1))),o.call(n,a)?n[a]=[].concat(n[a]).concat(u):n[a]=u}return n},u=function(e,t,n){if(!e.length)return t;var r,o=e.shift();if("[]"===o)r=[],r=r.concat(u(e,t,n));else{r=n.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,a=parseInt(i,10);!isNaN(a)&&o!==i&&String(a)===i&&a>=0&&n.parseArrays&&a<=n.arrayLimit?(r=[],r[a]=u(e,t,n)):r[i]=u(e,t,n)}return r},s=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=i.exec(r),c=s?r.slice(0,s.index):r,l=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var f=0;null!==(s=a.exec(r))&&f<n.depth;){if(f+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+r.slice(s.index)+"]"),u(l,t,n)}};e.exports=function(e,t){var n=t||{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var o="string"==typeof e?a(e,n):e,u=n.plainObjects?Object.create(null):{},c=Object.keys(o),l=0;l<c.length;++l){var f=c[l],p=s(f,o[f],n);u=r.merge(u,p,n)}return r.compact(u)}},function(e,t,n){(function(e){function t(e,n,r){var o=[],i=!1;return Array.isArray(e)&&r&&(i=!0),Object.keys(e).forEach(function(a){var u,s,c=e[a];if(u=r?r+"["+(i?"":a)+"]":a,null===c){if(n.removeNull)return;s=n.encodeComponents?encodeURIComponent(u):u}else s="object"==typeof c?t(c,n,u):n.encodeComponents?encodeURIComponent(u)+"="+encodeURIComponent(c):u+"="+c;o.push(s)}),o.join("&")}var r=n(231),o=n(291),i=n(228);e.defaults={encodeComponents:!0,removeNull:!1},e.exports=function(n,a,u){var s=i.parse(n,!0),c=(s.query,"string"==typeof a?r.parse(a):a),l=o(!0,{},s.query,c),u=o({},e.defaults,u||{});s.query=null;var f=t(l,u);return s.search=f?"?"+f:null,i.format(s)}}).call(t,n(154)(e))},function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=function(e){"use strict";if(!e||"[object Object]"!==r.call(e)||e.nodeType||e.setInterval)return!1;var t=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!o)return!1;var i;for(i in e);return void 0===i||n.call(e,i)};e.exports=function e(){"use strict";var t,n,r,i,a,u,s=arguments[0],c=1,l=arguments.length,f=!1;for("boolean"==typeof s?(f=s,s=arguments[1]||{},c=2):("object"!=typeof s&&"function"!=typeof s||void 0==s)&&(s={});c<l;++c)if(null!=(t=arguments[c]))for(n in t)r=s[n],i=t[n],s!==i&&(f&&i&&(o(i)||(a=Array.isArray(i)))?(a?(a=!1,u=r&&Array.isArray(r)?r:[]):u=r&&o(r)?r:{},s[n]=e(f,u,i)):void 0!==i&&(s[n]=i));return s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyResponse=t.StatusCode=void 0;var u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(203),l=r(c),f=n(2),p=n(293),h=r(p),d={Ok:200,Created:201,Empty:204,MovedPermanently:301,Found:302,NotModified:304,TemporaryRedirect:307,PermanentRedirect:308,Unauthorized:401,NotFound:404,ServerError:500};Object.freeze(d),t.StatusCode=d;var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),t=(0,l.default)({statusCode:d.Empty,headers:new h.default,data:null},t),this.statusCode=t.statusCode,this.headers=t.headers,this.data=t.data}return s(e,[{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300||this.statusCode===d.MovedPermanently||this.statusCode===d.Found||this.statusCode===d.NotModified||this.statusCode===d.TemporaryRedirect||this.statusCode===d.PermanentRedirect}},{key:"headers",get:function(){return this._headers},set:function(e){e instanceof h.default||(e=new h.default(e)),this._headers=e}},{key:"error",get:function(){if(this.isSuccess())return null;var e=this.data||{},t=e.message||e.description,n=e.debug,r=this.statusCode,o=this.headers.get("X-Kinvey-Request-ID");return r===d.Unauthorized?new f.InsufficientCredentialsError(t,n,r,o):r===d.NotFound?new f.NotFoundError(t,n,r,o):r===d.ServerError?new f.ServerError(t,n,r,o):new f.KinveyError(t,n,r,o)}}]),e}();t.default=y;t.KinveyResponse=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"error",get:function(){if(this.isSuccess())return null;var e=this.data||{},n=e.name||e.error,r=e.message||e.description,o=e.debug,i=this.statusCode,a=this.headers.get("X-Kinvey-Request-ID"),s=void 0
;if("APIVersionNotAvailable"===n)s=new f.APIVersionNotAvailableError(r,o,i,a);else if("APIVersionNotImplemented"===n)s=new f.APIVersionNotImplementedError(r,o,i,a);else if("AppProblem"===n)s=new f.AppProblemError(r,o,i,a);else if("AppProblem"===n)s=new f.AppProblemError(r,o,i,a);else if("BadRequest"===n)s=new f.BadRequestError(r,o,i,a);else if("BLInternalError"===n||"BLRuntimeError"===n||"BLSyntaxError"===n||"BLTimeoutError"===n||"BLViolationError"===n)s=new f.BLError(r,o,i,a);else if("CORSDisabled"===n)s=new f.CORSDisabledError(r,o,i,a);else if("DuplicateEndUsers"===n)s=new f.DuplicateEndUsersError(r,o,i,a);else if("FeatureUnavailable"===n)s=new f.FeatureUnavailableError(r,o,i,a);else if("IncompleteRequestBody"===n)s=new f.IncompleteRequestBodyError(r,o,i,a);else if("IndirectCollectionAccessDisallowed"===n)s=new f.IndirectCollectionAccessDisallowedError(r,o,i,a);else if("InsufficientCredentials"===n)s=new f.InsufficientCredentialsError(r,o,i,a);else if("InvalidCredentials"===n)s=new f.InvalidCredentialsError(r,o,i,a);else if("InvalidIdentifier"===n)s=new f.InvalidIdentifierError(r,o,i,a);else if("InvalidQuerySyntax"===n)s=new f.InvalidQuerySyntaxError(r,o,i,a);else if("JSONParseError"===n)s=new f.JSONParseError(r,o,i,a);else if("KinveyInternalErrorRetry"===n)s=new f.KinveyInternalErrorRetry(r,o,i,a);else if("KinveyInternalErrorStop"===n)s=new f.KinveyInternalErrorStop(r,o,i,a);else if("MissingQuery"===n)s=new f.MissingQueryError(r,o,i,a);else if("MissingRequestHeader"===n)s=new f.MissingRequestHeaderError(r,o,i,a);else if("MissingRequestParameter"===n)s=new f.MissingRequestParameterError(r,o,i,a);else if("EntityNotFound"===n||"CollectionNotFound"===n||"AppNotFound"===n||"UserNotFound"===n||"BlobNotFound"===n||"DocumentNotFound"===n)s=new f.NotFoundError(r,o,i,a);else if("ParameterValueOutOfRange"===n)s=new f.ParameterValueOutOfRangeError(r,o,i,a);else if("ServerError"===n)s=new f.ServerError(r,o,i,a);else if("StaleRequest"===n)s=new f.StaleRequestError(r,o,i,a);else if("UserAlreadyExists"===n)s=new f.UserAlreadyExistsError(r,o,i,a);else{if("WritesToCollectionDisallowed"!==n)return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"error",this);s=new f.WritesToCollectionDisallowedError(r,o,i,a)}return s}}]),t}(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(277),u=r(a),s=n(270),c=r(s),l=n(294),f=r(l),p=n(41),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.headers={},this.addAll(t)}return i(e,[{key:"get",value:function(e){if(e){!1===(0,c.default)(e)&&(e=String(e));return this.headers[e.toLowerCase()]}}},{key:"set",value:function(e,t){if(!1===(0,p.isDefined)(e)||!1===(0,p.isDefined)(t))throw new Error("A name and value must be provided to set a header.");!1===(0,c.default)(e)&&(e=String(e));var n=this.headers;return e=e.toLowerCase(),!1===(0,c.default)(t)?n[e]=JSON.stringify(t):n[e]=t,this.headers=n,this}},{key:"has",value:function(e){return!!this.get(e)}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set(e.name,e.value)}},{key:"addAll",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n instanceof e&&(n=n.toPlainObject()),!1===(0,f.default)(n))throw new Error("Headers argument must be an object.");var r=Object.keys(n);return(0,u.default)(r,function(e){try{t.set(e,n[e])}catch(e){}}),this}},{key:"remove",value:function(e){if(e){!1===(0,c.default)(e)&&(e=String(e));var t=this.headers;delete t[e.toLowerCase()],this.headers=t}return this}},{key:"clear",value:function(){return this.headers={},this}},{key:"toPlainObject",value:function(){return this.headers}},{key:"toString",value:function(){return JSON.stringify(this.toPlainObject())}}]),e}();t.default=h},function(e,t,n){function r(e){if(!a(e)||o(e)!=u)return!1;var t=i(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==p}var o=n(79),i=n(254),a=n(125),u="[object Object]",s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,p=l.call(Object);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRack=t.CacheRack=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(46),l=r(c),f=n(223),p=r(f),h=n(78),d=r(h),y=n(41),v=n(296),m=r(v),b=n(298),g=r(b),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Rack";o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.middlewares=[],n.canceled=!1,n.activeMiddleware=void 0,n}return a(t,e),u(t,[{key:"use",value:function(e){if((0,y.isDefined)(e)){if(e instanceof g.default)return void this.middlewares.push(e);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"reset",value:function(){this.middlewares=[]}},{key:"execute",value:function(e){var t=this;return!1===(0,y.isDefined)(e)?l.default.reject(new Error("Request is undefined. Please provide a valid request.")):(0,p.default)((0,m.default)(this.middlewares),function(n,r){return n.then(function(n){var o=n.request,i=n.response;return t.canceled?l.default.reject(new Error("Cancelled")):(t.activeMiddleware=r,r.handle(o||e,i))})},l.default.resolve({request:e})).then(function(e){var n=e.response;return!0===t.canceled?l.default.reject(new Error("Cancelled")):(t.canceled=!1,t.activeMiddleware=void 0,n)}).catch(function(e){throw t.canceled=!1,t.activeMiddleware=void 0,e})}},{key:"cancel",value:function(){return this.canceled=!0,(0,y.isDefined)(this.activeMiddleware)&&(0,d.default)(this.activeMiddleware.cancel)?this.activeMiddleware.cancel():l.default.resolve()}},{key:"handle",value:function(e){return this.execute(e)}},{key:"generateTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"generateTree",this).call(this,e);return(0,m.default)(this.middlewares).forEach(function(t){n.nodes.push(t.generateTree(e+1))}),n}}]),t}(g.default);t.default=w;var _=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cache Rack";o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.use(new b.CacheMiddleware),n}return a(t,e),u(t,[{key:"useCacheMiddleware",value:function(e){this.reset(),this.use(e)}}]),t}(w),O=new _;t.CacheRack=O;var E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Network Rack";o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.use(new b.SerializeMiddleware),n.use(new b.HttpMiddleware),n.use(new b.ParseMiddleware),n}return a(t,e),u(t,[{key:"useHttpMiddleware",value:function(e){this.reset(),this.use(new b.SerializeMiddleware),this.use(e),this.use(new b.ParseMiddleware)}}]),t}(w),k=new E;t.NetworkRack=k},function(e,t,n){function r(e){return null==e?[]:o(e,i(e))}var o=n(297),i=n(150);e.exports=r},function(e,t,n){function r(e,t){return o(t,function(t){return e[t]})}var o=n(117);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.SerializeMiddleware=t.ParseMiddleware=t.MemoryAdapter=t.HttpMiddleware=t.CacheMiddleware=void 0;var o=n(299),i=r(o),a=n(314),u=r(a),s=n(300),c=r(s),l=n(315),f=r(l),p=n(316),h=r(p),d=n(302),y=r(d);t.CacheMiddleware=i.default,t.HttpMiddleware=u.default,t.MemoryAdapter=d.MemoryAdapter,t.ParseMiddleware=f.default,t.SerializeMiddleware=h.default,t.Storage=y.default,t.default=c.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(276),c=r(s),l=n(41),f=n(300),p=r(f),h=n(302),d=r(h),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cache Middleware";return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),u(t,[{key:"loadStorage",value:function(e){return new d.default(e)}},{key:"handle",value:function(e){var t=e.method,n=e.body,r=e.appKey,o=e.collection,i=e.entityId,a=this.loadStorage(r),u=void 0;return"GET"===t?u=(0,l.isDefined)(i)?a.findById(o,i):a.find(o):"POST"===t||"PUT"===t?u="_group"===i?a.find(o):a.save(o,n):"DELETE"===t&&(u=!1===(0,l.isDefined)(o)?a.clear():a.removeById(o,i)),u.then(function(e){var n={statusCode:"POST"===t?201:200,data:e};return"POST"===t&&"_group"===i&&(n.statusCode=200),(!1===(0,l.isDefined)(e)||(0,c.default)(e))&&(n.statusCode=204),n}).catch(function(e){return{statusCode:e.code}}).then(function(e){return{response:e}})}}]),t}(p.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(301),c=r(s),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Middleware";o(this,e),this.name=t}return i(e,[{key:"handle",value:function(){return u.default.reject(new Error("A subclass middleware must override the handle function."))}},{key:"cancel",value:function(){return u.default.resolve()}},{key:"generateTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:this.name,level:e,nodes:[]}}},{key:"toString",value:function(){var e=this.generateTree();return c.default.generate(e)}}]),e}();t.default=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(0===e.level)return e.value;for(var n="\r\n",r=t?s:a,o=1;o<e.level;o+=1)n=""+n+(i[o]?" ":c),n+="  ";return""+n+r+u+" "+e.value}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=[],a=String.fromCharCode(9500),u=String.fromCharCode(9472),s=String.fromCharCode(9492),c=String.fromCharCode(9474),l=function(){function e(){n(this,e)}return o(e,null,[{key:"generate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],o=r(t,n);if(t.nodes.length>0){var a=t.nodes.length-1;t.nodes.forEach(function(t,n){i[t.level]=n===a,o+=e.generate(t,n===a)})}return o}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryAdapter=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(303),c=r(s),l=n(270),f=r(l),p=n(126),h=r(p),d=n(41),y=n(2),v=n(306),m=r(v);c.default.configure(u.default);var b=new c.default(1,1/0);t.MemoryAdapter=m.default;var g=function(){function e(t){if(o(this,e),!t)throw new Error("Unable to create a Storage instance without a name.");if(!(0,f.default)(t))throw new Error("The name is not a string. A name must be a string to create a Storage instance.");this.name=t}return i(e,[{key:"loadAdapter",value:function(){var e=this;return u.default.resolve().then(function(){return m.default.load(e.name)}).then(function(e){if(!1===(0,d.isDefined)(e))throw new Error("Unable to load a storage adapter.");return e})}},{key:"generateObjectId",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t="abcdef0123456789",n="",r=0,o=t.length;r<e;r+=1){var i=Math.floor(Math.random()*o);n+=t.substring(i,i+1)}return n}},{key:"find",value:function(e){return this.loadAdapter().then(function(t){return t.find(e)}).catch(function(e){if(e instanceof y.NotFoundError||404===e.code)return[];throw e}).then(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]})}},{key:"findById",value:function(e,t){return!1===(0,f.default)(t)?u.default.reject(new Error("id must be a string",t)):this.loadAdapter().then(function(n){return n.findById(e,t)})}},{key:"save",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b.add(function(){var r=!1;return n?((0,h.default)(n)||(r=!0,n=[n]),n=n.map(function(e){if(!1===(0,d.isDefined)(e._id)){var n=e._kmd||{};n.local=!0,e._kmd=n,e._id=t.generateObjectId()}return e}),t.loadAdapter().then(function(t){return t.save(e,n)}).then(function(e){return r&&e.length>0?e[0]:e})):u.default.resolve(null)})}},{key:"remove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u.default.all(n.map(function(n){return void 0===n._id?u.default.reject("Unable to remove an entity because it does not have _id."):t.removeById(e,n._id)})).then(function(e){return e.reduce(function(e,t){return e.count+=t.count,e},{count:0})})}},{key:"removeById",value:function(e,t){var n=this;return b.add(function(){return(0,f.default)(t)?n.loadAdapter().then(function(n){return n.removeById(e,t)}):u.default.reject(new Error("id must be a string",t))})}},{key:"clear",value:function(){var e=this;return b.add(function(){return e.loadAdapter().then(function(e){return e.clear()})})}}]),e}();t.default=g},function(e,t,n){(function(t){e.exports=n(t.env.PROMISE_QUEUE_COVERAGE?304:305)}).call(t,n(47))},function(e,t){},function(e,t,n){var r,o;!function(i,a){"use strict";"object"==typeof e&&e.exports?e.exports=a():(r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o))}(0,function(){"use strict";function e(e,t){this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}var t="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},n=function(){},r=function(e){return e&&"function"==typeof e.then?e:new t(function(t){t(e)})};return e.configure=function(e){t=e},e.prototype.add=function(e){var r=this;return new t(function(t,o,i){if(r.queue.length>=r.maxQueuedPromises)return void o(new Error("Queue limit reached"));r.queue.push({promiseGenerator:e,resolve:t,reject:o,notify:i||n}),r._dequeue()})},e.prototype.getPendingLength=function(){return this.pendingPromises},e.prototype.getQueueLength=function(){return this.queue.length},e.prototype._dequeue=function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t=this.queue.shift();if(!t)return!1;try{this.pendingPromises++,r(t.promiseGenerator()).then(function(n){e.pendingPromises--,t.resolve(n),e._dequeue()},function(n){e.pendingPromises--,t.reject(n),e._dequeue()},function(e){t.notify(e)})}catch(n){e.pendingPromises--,t.reject(n),e._dequeue()}return!0},e})},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(307),c=r(s),l=n(209),f=r(l),p=n(277),h=r(p),d=n(296),y=r(d),v=n(308),m=r(v),b=n(270),g=r(b),w=n(126),_=r(w),O=n(41),E=n(2),k=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",j={},x=function(){function e(t){if(o(this,e),!1===(0,O.isDefined)(t))throw new Error("A name for the collection is required to use the memory persistence adapter.",t);if(!1===(0,g.default)(t))throw new Error("The name of the collection must be a string to use the memory persistence adapter",t);this.name=t,this.cache=j[t],!1===(0,O.isDefined)(this.cache)&&(this.cache=new c.default,j[t]=this.cache)}return i(e,[{key:"find",value:function(e){try{var t=this.cache.get(e);return t?u.default.resolve(JSON.parse(t)):u.default.resolve([])}catch(e){return u.default.reject(e)}}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,m.default)(r,function(e){return e[k]===t});if(!o)throw new E.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" memory database.");return o})}},{key:"save",value:function(e,t){var n=this,r=!1;return!1===(0,_.default)(t)&&(t=[t],r=!0),0===t.length?u.default.resolve(t):this.find(e).then(function(o){o=(0,f.default)(o,k),t=(0,f.default)(t,k);var i=Object.keys(t);return(0,h.default)(i,function(e){o[e]=t[e]}),n.cache.set(e,JSON.stringify((0,y.default)(o))),t=(0,y.default)(t),r?t[0]:t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){r=(0,f.default)(r,k);var o=r[t];if(!1===(0,O.isDefined)(o))throw new E.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" memory database.");return delete r[t],n.cache.set(e,JSON.stringify((0,y.default)(r))),{count:1}})}},{key:"clear",value:function(){return this.cache.clear(),u.default.resolve(null)}}]),e}();t.default={load:function(e){return new x(e)}}}).call(t,n(47))},function(e,t){"use strict";function n(){this._cache=r(),this._timeouts=r()}function r(){return Object.create(null)}n.prototype.get=function(e){return this._cache[e]},n.prototype.set=function(e,t,n){this.delete(e),this._cache[e]=t,n&&(this._timeouts[e]=setTimeout(this.delete.bind(this,e),1e3*n))},n.prototype.delete=function(e){delete this._cache[e],e in this._timeouts&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},n.prototype.clear=function(){this._cache=r();for(var e in this._timeouts)clearTimeout(this._timeouts[e]);this._timeouts=r()},e.exports=n},function(e,t,n){var r=n(309),o=n(310),i=r(o);e.exports=i},function(e,t,n){function r(e){return function(t,n,r){var u=Object(t);if(!i(t)){var s=o(n,3);t=a(t),n=function(e){return s(u[e],e,u)}}var c=e(t,n,r);return c>-1?u[s?t[c]:c]:void 0}}var o=n(127),i=n(165),a=n(150);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:a(n);return s<0&&(s=u(r+s,0)),o(e,i(t,3),s)}var o=n(113),i=n(127),a=n(311),u=Math.max;e.exports=r},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(312);e.exports=r},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=o(e))===i||e===-i){return(e<0?-1:1)*a}return e===e?e:0}var o=n(313),i=1/0,a=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=c.test(e);return n||l.test(e)?f(e.slice(2),n?2:8):s.test(e)?a:+e}var o=n(85),i=n(179),a=NaN,u=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=r(s),l=n(2),f=n(300),p=r(f),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Middleware";return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),u(t,[{key:"handle",value:function(){return c.default.reject(new l.KinveyError("Unable to send network request.","Please override the core HttpMiddleware."))}},{key:"cancel",value:function(){return c.default.resolve()}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=r(s),l=n(41),f=n(300),p=r(f),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Parse Middleware";return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),u(t,[{key:"handle",value:function(e,t){if((0,l.isDefined)(t)&&(0,l.isDefined)(t.data)){var n=t.headers["content-type"]||t.headers["Content-Type"];if(n&&0===n.indexOf("application/json"))try{t.data=JSON.parse(t.data)}catch(e){}}return c.default.resolve({response:t})}}]),t}(p.default);t.default=h},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=r(s),l=n(41),f=n(300),p=r(f),h=function(t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Serialize Middleware";return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return a(n,t),u(n,[{key:"handle",value:function(t){if((0,l.isDefined)(t)&&(0,l.isDefined)(t.body)){var n=t.headers["content-type"]||t.headers["Content-Type"];if((0,l.isDefined)(n))if(0===n.indexOf("application/json"))t.body=JSON.stringify(t.body);else if(0===n.indexOf("application/x-www-form-urlencoded")){var r=t.body,o=[];Object.keys(r).forEach(function(t){o.push(e.encodeURIComponent(t)+"="+e.encodeURIComponent(r[t]))}),t.body=o.join("&")}}return c.default.resolve({request:t})}}]),n}(p.default);t.default=h}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var u=i.set;void 0!==u&&u.call(o,r)}return r},c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(46),f=r(l),p=n(209),h=r(p),d=n(223),y=r(d),v=n(318),m=r(v),b=n(296),g=r(b),w=n(277),_=r(w),O=n(126),E=r(O),k=n(270),j=r(k),x=n(2),P=n(41),T=n(272),S=r(T),A=n(284),R=n(319),C=n(235),I=r(C),M=n(292),q=r(M),D=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"execute",value:function(){var e=this;return new I.default({method:A.RequestMethod.GET,url:this.url,headers:this.headers,query:this.query,timeout:this.timeout,client:this.client}).execute().then(function(e){return e.data}).catch(function(e){if(!(e instanceof x.NotFoundError))throw e;return[]}).then(function(t){if((0,E.default)(t)&&t.length>0){var n=(0,h.default)(t,"_id"),r=new S.default((0,m.default)(e.query,"toJSON",e.query));return r.fields=["_id","_kmd.lmt"],new R.KinveyRequest({method:A.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:r,timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}).execute().then(function(e){return e.data}).then(function(t){var r=(0,h.default)(t,"_id"),o=r,i=Object.keys(n);(0,_.default)(i,function(e){var t=n[e],i=r[e];i&&(0,P.isDefined)(i._kmd)&&(0,P.isDefined)(t._kmd)&&i._kmd.lmt===t._kmd.lmt?delete o[e]:delete n[e]});for(var a=Object.keys(o),u=[],s=0;s<a.length;){var c=new S.default((0,m.default)(e.query,"toJSON",e.query)),l=a.slice(s,a.length>200+s?200:a.length);c.contains("_id",l);var p=new R.KinveyRequest({method:A.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:c,timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}),d=p.execute();u.push(d),s+=200}return f.default.all(u)}).then(function(t){var r=(0,y.default)(t,function(e,t){if(t.isSuccess()){var n=e.headers;n.addAll(t.headers),e.headers=n,e.data=e.data.concat(t.data)}return e},new q.default({statusCode:M.StatusCode.Ok,data:[]}));if(r.data=r.data.concat((0,g.default)(n)),e.query){var o=new S.default((0,m.default)(e.query,"toJSON",e.query));o.skip=0,o.limit=0,r.data=o.process(r.data)}return r})}return new R.KinveyRequest({method:A.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:e.query,timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}).execute()})}},{key:"method",get:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"method",this)},set:function(e){switch((0,j.default)(e)||(e=String(e)),e=e.toUpperCase()){case A.RequestMethod.GET:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"method",e,this);break;case A.RequestMethod.POST:case A.RequestMethod.PATCH:case A.RequestMethod.PUT:case A.RequestMethod.DELETE:default:throw new x.KinveyError("Invalid request Method. Only RequestMethod.GET is allowed.")}}}]),t}(R.KinveyRequest);t.default=D},function(e,t,n){function r(e,t,n){t=o(t,e);var r=-1,u=t.length;for(u||(u=1,e=void 0);++r<u;){var s=null==e?void 0:e[a(t[r])];void 0===s&&(r=u,s=n),e=i(s)?s.call(e):s}return e}var o=n(177),i=n(78),a=n(185);e.exports=r},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(e){var t=0,n=e.length;e=String(e||"");for(var r=0;r<n;r+=1){var o=encodeURI(e[r]).split("%").length;t+=1===o?1:o-1}return t}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyRequest=t.Properties=t.AuthType=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var u=i.set;void 0!==u&&u.call(o,r)}return r},f=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},p=n(46),h=o(p),d=n(228),y=o(d),v=n(285),m=o(v),b=n(290),g=o(b),w=n(203),_=o(w),O=n(324),E=o(O),k=n(276),j=o(k),x=n(272),P=o(x),T=n(283),S=o(T),A=n(41),R=n(2),C=n(327),I=n(284),M=o(I),q=n(235),D=o(q),N=n(293),L=o(N),U=n(292),K=n(295),F=e&&e.env&&e.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token"||"/oauth/token",B=e&&e.env&&e.env.KINVEY_USERS_NAMESPACE||"user"||"user",H=e&&e.env&&e.env.KINVEY_DEFAULT_API_VERSION||"4"||4,z=e&&e.env&&e.env.KINVEY_MAX_HEADER_BYTES||"2000"||2e3,$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rack=K.NetworkRack,n}return u(t,e),t}(M.default);t.default=$;var V={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",None:"None",Session:"Session"};Object.freeze(V),t.AuthType=V;var Y={all:function(e){return Y.session(e).catch(function(){return Y.basic(e)})},app:function(e){return e.appKey&&e.appSecret?h.default.resolve({scheme:"Basic",username:e.appKey,password:e.appSecret}):h.default.reject(new Error("Missing client appKey and/or appSecret. Use Kinvey.initialize() to set the appKey and appSecret for the client."))},basic:function(e){return Y.master(e).catch(function(){return Y.app(e)})},master:function(e){return e.appKey&&e.masterSecret?h.default.resolve({scheme:"Basic",username:e.appKey,password:e.masterSecret}):h.default.reject(new Error("Missing client appKey and/or masterSecret. Use Kinvey.initialize() to set the appKey and masterSecret for the client."))},none:function(){return h.default.resolve(null)},session:function(e){var t=D.default.getActiveUser(e);return(0,A.isDefined)(t)?h.default.resolve({scheme:"Kinvey",credentials:t._kmd.authtoken}):h.default.reject(new R.NoActiveUserError("There is not an active user. Please login a user and retry the request."))}},G=t.Properties=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(L.default);t.KinveyRequest=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e=(0,_.default)({skipBL:!1,trace:!1},e),n.authType=e.authType||V.None,n.query=e.query,n.aggregation=e.aggregation,n.properties=e.properties||new G,n.skipBL=!0===e.skipBL,n.trace=!0===e.trace,n}return u(t,e),c(t,[{key:"getAuthorizationHeader",value:function(){var e=this,t=h.default.resolve(void 0);if(this.authType)switch(this.authType){case V.All:t=Y.all(this.client);break;case V.App:t=Y.app(this.client);break;case V.Basic:t=Y.basic(this.client);break;case V.Master:t=Y.master(this.client);break;case V.None:t=Y.none(this.client);break;case V.Session:t=Y.session(this.client);break;default:t=Y.session(this.client).catch(function(t){return Y.master(e.client).catch(function(){throw t})})}return t.then(function(e){if((0,A.isDefined)(e)){var t=e.credentials;return e.username&&(t=new r(e.username+":"+e.password).toString("base64")),e.scheme+" "+t}})}},{key:"execute",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getAuthorizationHeader().then(function(t){(0,A.isDefined)(t)?e.headers.set("Authorization",t):e.headers.remove("Authorization")}).then(function(){return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",e).call(e)}).then(function(e){if(e instanceof U.KinveyResponse||(e=new U.KinveyResponse({statusCode:e.statusCode,headers:e.headers,data:e.data})),!1===n&&!1===e.isSuccess())throw e.error;return e}).catch(function(o){if(o instanceof R.InvalidCredentialsError&&!0===r){var i=D.default.getActiveUser(e.client);if(!(0,A.isDefined)(i))throw o;var a=(0,A.isDefined)(i._socialIdentity)?i._socialIdentity:{},u=Object.keys(a).find(function(e){return a[e].identity===C.SocialIdentity.MobileIdentityConnect}),s=a[u];if((0,A.isDefined)(s)&&s.identity===C.SocialIdentity.MobileIdentityConnect){return new t({method:I.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:V.App,url:y.default.format({protocol:s.protocol||e.client.micProtocol,host:s.host||e.client.micHost,pathname:F}),body:{grant_type:"refresh_token",client_id:s.client_id,redirect_uri:s.redirect_uri,refresh_token:s.refresh_token},timeout:e.timeout,properties:e.properties}).execute(!1,!1).then(function(e){return e.data}).then(function(n){var r={};return r._socialIdentity={},r._socialIdentity[s.identity]=n,new t({method:I.RequestMethod.POST,authType:V.App,url:y.default.format({protocol:e.client.apiProtocol,host:e.client.apiHost,pathname:"/"+B+"/"+e.client.appKey+"/login"}),properties:e.properties,body:r,timeout:e.timeout,client:e.client}).execute(!1,!1).then(function(e){return e.data})}).then(function(t){return t._socialIdentity[s.identity]=(0,E.default)(t._socialIdentity[s.identity],s),D.default.setActiveUser(e.client,t)}).then(function(){return e.execute(n,!1)}).catch(function(){throw o})}throw o}throw o})}},{key:"appVersion",get:function(){return this.client.appVersion}},{key:"query",get:function(){return this._query},set:function(e){if((0,A.isDefined)(e)&&!(e instanceof P.default))throw new R.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"aggregation",get:function(){return this._aggregation},set:function(e){if((0,A.isDefined)(e)&&!(e instanceof S.default))throw new R.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");(0,A.isDefined)(e)&&(this.body=e.toPlainObject()),this._aggregation=e}},{key:"headers",get:function(){var e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"headers",this);if(e.has("Accept")||e.set("Accept","application/json; charset=utf-8"),e.has("Content-Type")||e.set("Content-Type","application/json; charset=utf-8"),e.has("X-Kinvey-Api-Version")||e.set("X-Kinvey-Api-Version",H),!0===this.skipBL?e.set("X-Kinvey-Skip-Business-Logic",!0):e.remove("X-Kinvey-Skip-Business-Logic"),!0===this.trace?(e.set("X-Kinvey-Include-Headers-In-Response","X-Kinvey-Request-Id"),e.set("X-Kinvey-ResponseWrapper",!0)):(e.remove("X-Kinvey-Include-Headers-In-Response"),e.remove("X-Kinvey-ResponseWrapper")),this.appVersion?e.set("X-Kinvey-Client-App-Version",this.appVersion):e.remove("X-Kinvey-Client-App-Version"),this.properties){var n=this.properties.toString();if((0,j.default)(n))e.remove("X-Kinvey-Custom-Request-Properties");else{var r=s(n);if(r>=z)throw new Error("The custom properties are "+r+" bytes.It must be less then "+z+" bytes.","Please remove some custom properties.");e.set("X-Kinvey-Custom-Request-Properties",n)}}else e.remove("X-Kinvey-Custom-Request-Properties");return e},set:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"headers",e,this)}},{key:"url",get:function(){var e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",this),n=this.query?this.query.toQueryString():{};return(0,j.default)(n)?e:(0,g.default)(e,m.default.stringify(n))},set:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",e,this)}},{key:"properties",get:function(){return this._properties},set:function(e){e&&e instanceof G==!1&&(e=new G(e)),this._properties=e}}]),t}($)}).call(t,n(47),n(320).Buffer)},function(e,t,n){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(u(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=o(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=f(e,t),e}function h(e,t){if(i.isBuffer(t)){var n=0|d(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Q(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&X(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),i.alloc(+e)}function v(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}var c;if(o){var l=-1;for(c=n;c<u;c++)if(i(e,c)===i(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===s)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+s>u&&(n=u-s),c=n;c>=0;c--){for(var f=!0,p=0;p<s;p++)if(i(e,c+p)!==i(t,p)){f=!1;break}if(f)return c}return-1}function _(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function O(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function E(e,t,n,r){return G($(t),e,n,r)}function k(e,t,n,r){return E(e,t,n,r)}function j(e,t,n,r){return G(Y(t),e,n,r)}function x(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=n){var s,c,l,f;switch(u){case 1:i<128&&(a=i);break;case 2:s=e[o+1],128==(192&s)&&(f=(31&i)<<6|63&s)>127&&(a=f);break;case 3:s=e[o+1],c=e[o+2],128==(192&s)&&128==(192&c)&&(f=(15&i)<<12|(63&s)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=e[o+1],c=e[o+2],l=e[o+3],128==(192&s)&&128==(192&c)&&128==(192&l)&&(f=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return S(r)}function S(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=H(e[i]);return o}function I(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function L(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return o||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(e,t,n,r,23,4),n+4}function K(e,t,n,r,o){return o||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(e,t,n,r,52,8),n+8}function F(e){if(e=B(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function $(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function Y(e){return J.toByteArray(F(e))}function G(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Q(e){return e!==e}var J=n(321),W=n(322),X=n(323);t.Buffer=i,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return a(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return s(null,e,t,n)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):m.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var a=o-r,u=n-t,s=Math.min(a,u),c=this.slice(r,o),l=e.slice(t,n),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],u=l[f];break}return a<u?-1:u<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=i.prototype;else{var o=t-e;r=new i(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},i.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),W.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),W.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),W.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),W.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){q(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){q(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);q(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);q(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=i.isBuffer(e)?e:z(new i(e,r).toString()),s=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function o(e){var t,r,o,i,a,u,s=e.length;a=n(e),u=new l(3*s/4-a),o=a>0?s-4:s;var f=0;for(t=0,r=0;t<o;t+=4,r+=3)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],u[f++]=i>>16&255,u[f++]=i>>8&255,u[f++]=255&i;return 2===a?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,u[f++]=255&i):1===a&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,u[f++]=i>>8&255,u[f++]=255&i),u}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function a(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(r));return o.join("")}function u(e){for(var t,n=e.length,r=n%3,o="",i=[],u=0,c=n-r;u<c;u+=16383)i.push(a(e,u,u+16383>c?c:u+16383));return 1===r?(t=e[n-1],o+=s[t>>2],o+=s[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=s[t>>10],o+=s[t>>4&63],o+=s[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=u;for(var s=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=f.length;p<h;++p)s[p]=f[p],c[f.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,p=n?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),t+=a+f>=1?p/s:p*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&u,h+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+h]=255&a,h+=d,a/=256,c-=8);e[n+h-d]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(195),o=n(325),i=n(193),a=n(326),u=i(function(e){return e.push(void 0,a),r(o,void 0,e)});e.exports=u},function(e,t,n){var r=n(206),o=n(207),i=n(246),a=o(function(e,t,n,o){r(t,i(t),e,o)});e.exports=a},function(e,t,n){function r(e,t,n,r){return void 0===e||o(e,i[n])&&!a.call(r,n)?t:e}var o=n(98),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(328);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(329);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(336);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(337);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var u=n(338);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var s=n(340);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Facebook:"facebook",Google:"google",Kinvey:e&&e.env&&e.env.KINVEY_IDENTITY||"kinvey"||"kinvey",LinkedIn:"linkedin",MobileIdentityConnect:e&&e.env&&e.env.KINVEY_MIC_IDENTITY||"kinveyAuth"||"kinveyAuth",Windows:"windows"};Object.freeze(n),t.SocialIdentity=n}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Facebook=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=r(s),l=n(203),f=r(l),p=n(231),h=r(p),d=n(228),y=r(d),v=n(2),m=n(41),b=n(330),g=r(b),w=n(332),_=r(w),O=n(328);t.Facebook=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),u(n,[{key:"isSupported",value:function(){return g.default.isSupported()}},{key:"login",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r=(0,f.default)({force:!1,scope:"public_profile"},r),!this.isSupported())return c.default.reject(new v.KinveyError("Unable to login with "+this.identity+". It is not supported on this platform."));var o=this.session;return o&&this.isOnline(o)?c.default.resolve(o):t?new c.default(function(o,i){function a(e){var t=e.url;try{t&&0===t.indexOf(c)&&!1===f&&(f=!0,p.removeAllListeners(),p.close(),d(t))}catch(e){}}function u(e){var t=e.url;try{t&&0===t.indexOf(c)&&!1===f?(f=!0,p.removeAllListeners(),p.close(),d(t)):!1===f&&(p.removeAllListeners(),p.close(),i(new v.KinveyError(e.message,"",e.code)))}catch(e){}}function s(){!1===f&&(p.removeAllListeners(),i(new v.KinveyError("Facebook login has been cancelled.")))}var c=r.redirectUri||e.location.href,l=(0,m.randomString)(),f=!1,p=new g.default,d=function(e){var r=y.default.parse(e),a=r.hash,u=h.default.parse(a.substring(1)),s=u.access_token,c=u.expires_in,f=u.error,p=u.error_description,d=u.error_reason,v=u.state,m=parseInt(c,10),b=(new Date).getTime()/1e3+(m||31536e3);if(v===l)if(s){var g={access_token:s,expires_in:m,expires:b,client_id:t};n.session=g,o(g)}else f?(n.session=null,i({reason:d,error:f,description:p})):(n.session=null,i({reason:"not_authorized",error:"access_denied",description:"Your app is not authorized."}));else n.session=null,i({reason:"state_mismatch",error:"access_denied",description:"The state did not match."})};return p.on("loadstart",a),p.on("loadstop",a),p.on("error",u),p.on("exit",s),p.open(y.default.format({protocol:"https:",host:"www.facebook.com",pathname:"/dialog/oauth",query:{client_id:t,redirect_uri:c,response_type:"token",scope:r.scope,auth_type:!0===r.force?"rerequest":null,state:l}})),p}):c.default.reject(new v.KinveyError("Unable to login with "+this.identity+". No client id was provided."))}},{key:"logout",value:function(){return this.session=null,c.default.resolve()}},{key:"identity",get:function(){return O.SocialIdentity.Facebook}}],[{key:"identity",get:function(){return O.SocialIdentity.Facebook}}]),n}(_.default)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(331),s=n(2),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"open",value:function(){throw new s.PopupError("Unable to open a popup on this platform.")}},{key:"close",value:function(){return this}}],[{key:"isSupported",value:function(){return!1}}]),t}(u.EventEmitter);t.default=c},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,s=0;s<o;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(u=a;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){
return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(238),c=r(s),l=n(203),f=r(l),p=n(269),h=r(p),d=n(2),y=void 0;"undefined"!=typeof window&&(y=n(333));var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.client=e.client||h.default.sharedInstance()}return i(t,[{key:"isSupported",value:function(){return!!y}},{key:"isOnline",value:function(e){var t=(new Date).getTime()/1e3;return e&&e.access_token&&e.expires>t}},{key:"login",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r=(0,f.default)({redirectUri:e.location.href,scope:null,force:null},r),!this.isSupported())return u.default.reject(new d.KinveyError("Unable to login with "+this.identity+". It is not supported on this platform."));var o=this.session;if(o&&this.isOnline(o))return u.default.resolve(o);if(!t)return u.default.reject(new d.KinveyError("Unable to login with "+this.identity+". No client id was provided."));var i={};return i[this.identity]=t,y.init(i),y(this.identity).login({redirect_uri:r.redirectUri,scope:r.scope,force:r.force}).then(function(){return o=y(n.identity).getAuthResponse(),o.clientId=t,n.session=o,o})}},{key:"logout",value:function(){var e=this,t=u.default.resolve();if(this.isSupported()){var n={};n[this.identity]=this.session.clientId,y.init(n),t=y(this.identity).logout()}return t.then(function(){e.session=null})}},{key:"identity",get:function(){throw new d.KinveyError("A subclass must override this property.")}},{key:"session",get:function(){return c.default.get(""+this.client.appKey+this.identity)},set:function(e){e?c.default.set(""+this.client.appKey+this.identity,e):c.default.remove(""+this.client.appKey+this.identity)}}],[{key:"isSupported",value:function(){return!!y}},{key:"login",value:function(e,t){return new this(t).login(e,t)}},{key:"logout",value:function(e,t){return(new this).logout(e,t)}},{key:"identity",get:function(){throw new d.KinveyError("A subclass must override this property.")}}]),t}();t.default=v}).call(t,function(){return this}())},function(e,t,n){var r;(function(o,i){Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)o in t&&e.call(r,t[o],o,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(r,o,i){e.call(t||void 0,r,o,i)&&n.push(r)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(r,o,i){n.push(e.call(t||void 0,r,o,i))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,r=n.call(arguments,1),o=this,i=function(){return o.apply(this instanceof t?this:e||window,r.concat(n.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});/**
	 * @hello.js
	 *
	 * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.
	 *
	 * @author Andrew Dodson
	 * @website https://adodson.com/hello.js/
	 *
	 * @copyright Andrew Dodson, 2012 - 2015
	 * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.
	 */
var a=function(e){return a.use(e)};a.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(Array.isArray(e)&&Array.isArray(t))Array.prototype.push.apply(e,t);else if(e&&(e instanceof Object||"object"==typeof e)&&t&&(t instanceof Object||"object"==typeof t)&&e!==t)for(var n in t)e[n]=a.utils.extend(e[n],t[n]);else Array.isArray(t)&&(t=t.slice(0)),e=t}),e}},a.utils.extend(a,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},scope:["basic"],scope_map:{basic:""},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&(e[r]={id:e[r]});return n.extend(this.services,e),t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){a.emit(e,t)}function t(e){return e}function n(e){return!!e}var r,o=this,i=o.utils,u=i.error,s=i.Promise(),c=i.args({network:"s",options:"o",callback:"f"},arguments),l=i.diffKey(c.options,o.settings),f=c.options=i.merge(o.settings,c.options||{});if(f.popup=i.merge(o.settings.popup,c.options.popup||{}),c.network=c.network||o.settings.default_service,s.proxy.then(c.callback,c.callback),s.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof c.network||!(c.network in o.services))return s.reject(u("invalid_network","The provided network was not recognized"));var p=o.services[c.network],h=i.globalEvent(function(e){var t;t=e?JSON.parse(e):u("cancelled","The authentication was not completed"),t.error?s.reject(t):(i.store(t.network,t),s.fulfill({network:t.network,authResponse:t}))}),d=i.url(f.redirect_uri).href,y=p.oauth.response_type||f.response_type;/\bcode\b/.test(y)&&!p.oauth.grant&&(y=y.replace(/\bcode\b/,"token")),c.qs=i.merge(l,{client_id:encodeURIComponent(p.id),response_type:encodeURIComponent(y),redirect_uri:encodeURIComponent(d),state:{client_id:p.id,network:c.network,display:f.display,callback:h,state:f.state,redirect_uri:d}});var v=i.store(c.network),m=o.settings.scope?[o.settings.scope.toString()]:[],b=i.merge(o.settings.scope_map,p.scope||{});if(f.scope&&m.push(f.scope.toString()),v&&"scope"in v&&v.scope instanceof String&&m.push(v.scope),m=m.join(",").split(/[,\s]+/),m=i.unique(m).filter(n),c.qs.state.scope=m.join(","),m=m.map(function(e){return e in b?b[e]:e}),m=m.join(",").split(/[,\s]+/),m=i.unique(m).filter(n),c.qs.scope=m.join(p.scope_delim||","),!1===f.force&&v&&"access_token"in v&&v.access_token&&"expires"in v&&v.expires>(new Date).getTime()/1e3){if(0===i.diff((v.scope||"").split(/[,\s]+/),(c.qs.state.scope||"").split(/[,\s]+/)).length)return s.fulfill({unchanged:!0,network:c.network,authResponse:v}),s}if("page"===f.display&&f.page_uri&&(c.qs.state.page_uri=i.url(f.page_uri).href),"login"in p&&"function"==typeof p.login&&p.login(c),(!/\btoken\b/.test(y)||parseInt(p.oauth.version,10)<2||"none"===f.display&&p.oauth.grant&&v&&v.refresh_token)&&(c.qs.state.oauth=p.oauth,c.qs.state.oauth_proxy=f.oauth_proxy),c.qs.state=encodeURIComponent(JSON.stringify(c.qs.state)),1===parseInt(p.oauth.version,10)?r=i.qs(f.oauth_proxy,c.qs,t):"none"===f.display&&p.oauth.grant&&v&&v.refresh_token?(c.qs.refresh_token=v.refresh_token,r=i.qs(f.oauth_proxy,c.qs,t)):r=i.qs(p.oauth.auth,c.qs,t),e("auth.init",c),"none"===f.display)i.iframe(r,d);else if("popup"===f.display)var g=i.popup(r,d,f.popup),w=setInterval(function(){if((!g||g.closed)&&(clearInterval(w),!s.state)){var e=u("cancelled","Login has been cancelled");g||(e=u("blocked","Popup was blocked")),e.network=c.network,s.reject(e)}},100);else window.location=r;return s.proxy},logout:function(){function e(e,t){a.emit(e,t)}var t=this,n=t.utils,r=n.error,o=n.Promise(),i=n.args({name:"s",options:"o",callback:"f"},arguments);if(i.options=i.options||{},o.proxy.then(i.callback,i.callback),o.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),i.name=i.name||this.settings.default_service,i.authResponse=n.store(i.name),!i.name||i.name in t.services)if(i.name&&i.authResponse){var u=function(e){n.store(i.name,null),o.fulfill(a.utils.merge({network:i.name},e||{}))},s={};if(i.options.force){var c=t.services[i.name].logout;if(c)if("function"==typeof c&&(c=c(u,i)),"string"==typeof c)n.iframe(c),s.force=null,s.message="Logout success on providers site was indeterminate";else if(void 0===c)return o.proxy}u(s)}else o.reject(r("invalid_session","There was no session to remove"));else o.reject(r("invalid_network","The network was unrecognized"));return o.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),a.utils.extend(a.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var r in t){var o="([\\?\\&])"+r+"=[^\\&]*",i=new RegExp(o);e.match(i)&&(e=e.replace(i,"$1"+r+"="+n(t[r])),delete t[r])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,r,o={};if("string"==typeof e){if(t=t||decodeURIComponent,r=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<r.length;i++)n=r[i].match(/([^=]+)=(.*)/),o[n[1]]=t(n[2]);return o}t=t||encodeURIComponent;var a=e;o=[];for(var u in a)a.hasOwnProperty(u)&&a.hasOwnProperty(u)&&o.push([u,"?"===a[u]?"?":t(a[u])].join("="));return o.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(e){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,r=["localStorage","sessionStorage"],o=-1;r[++o];)try{n=window[r[o]],n.setItem("test"+o,o),n.removeItem("test"+o);break}catch(e){n=null}if(!n){var i=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/(^\s+|\s+$)/,"");if(r&&0===r.indexOf(e))return r.substr(e.length)}return i},setItem:function(e,t){i=t,document.cookie=e+"="+t}},i=n.getItem("hello")}return function(n,r,o){var i=e();if(n&&void 0===r)return i[n]||null;if(n&&null===r)try{delete i[n]}catch(e){i[n]=null}else{if(!n)return i;i[n]=r}return t(i),i||null}}(),append:function(e,t,n){var r="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var o in t)if(t.hasOwnProperty(o))if("object"==typeof t[o])for(var i in t[o])t[o].hasOwnProperty(i)&&(r[o][i]=t[o][i]);else"html"===o?r.innerHTML=t[o]:/^on/.test(o)?r[o]=t[o]:r.setAttribute(o,t[o]);return"body"===n?function e(){document.body?document.body.appendChild(r):setTimeout(e,16)}():"object"==typeof n?n.appendChild(r):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(r),r},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},r=0,o=null,i=null;for(i in e)if(e.hasOwnProperty(i))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[i])for(i in t[0])if(e.hasOwnProperty(i)&&i in e)return t[0];for(i in e)if(e.hasOwnProperty(i))if(o=typeof t[r],"function"==typeof e[i]&&e[i].test(t[r])||"string"==typeof e[i]&&(e[i].indexOf("s")>-1&&"string"===o||e[i].indexOf("o")>-1&&"object"===o||e[i].indexOf("i")>-1&&"number"===o||e[i].indexOf("a")>-1&&"object"===o||e[i].indexOf("f")>-1&&"function"===o))n[i]=t[r++];else if("string"==typeof e[i]&&e[i].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t.cloneNode(!1)}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var e=function(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.6",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};e.prototype={fulfill:function(e){return t(this,1,"fulfillValue",e)},reject:function(e){return t(this,2,"rejectReason",e)},then:function(t,r){var o=this,i=new e;return o.onFulfilled.push(a(t,i,"fulfill")),o.onRejected.push(a(r,i,"reject")),n(o),i.proxy}};var t=function(e,t,r,o){return 0===e.state&&(e.state=t,e[r]=o,n(e)),e},n=function(e){1===e.state?r(e,"onFulfilled",e.fulfillValue):2===e.state&&r(e,"onRejected",e.rejectReason)},r=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var a=function(){for(var e=0;e<r.length;e++)r[e](n)};"object"==typeof o&&"function"==typeof o.nextTick?o.nextTick(a):"function"==typeof i?i(a):setTimeout(a,0)}},a=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var o;try{o=e(r)}catch(e){return void t.reject(e)}u(t,o)}}},u=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(t){return void e.reject(t)}if("function"!=typeof n)e.fulfill(t);else{var r=!1;try{n.call(t,function(n){r||(r=!0,n===t?e.reject(new TypeError("circular thenable chain")):u(e,n))},function(t){r||(r=!0,e.reject(t))})}catch(t){r||e.reject(t)}}};return e}(),Event:function(){return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(e,t){if(t&&"function"==typeof t)for(var n=e.split(/[\s\,]+/),r=0;r<n.length;r++)this.events[n[r]]=[t].concat(this.events[n[r]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,r){t[t.length-1]="*"===n?e:n,this.events[n][r].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e+",*",n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(e,t){var n=e.split(/[\s\,]+/);for(var r in this.events)if(this.events.hasOwnProperty(r)&&n.indexOf(r)>-1)for(var o=0;o<this.events[r].length;o++)this.events[r][o]&&t.call(this,r,o)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(e){console.error(e)}},t},popup:function(e,t,n){var r=document.documentElement;if(n.height){var o=void 0!==window.screenTop?window.screenTop:screen.top,i=screen.height||window.innerHeight||r.clientHeight;n.top=parseInt((i-n.height)/2,10)+o}if(n.width){var a=void 0!==window.screenLeft?window.screenLeft:screen.left,u=screen.width||window.innerWidth||r.clientWidth;n.left=parseInt((u-n.width)/2,10)+a}var s=[];Object.keys(n).forEach(function(e){var t=n[e];s.push(e+(null!==t?"="+t:""))}),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e)));var c=window.open(e,"_blank",s.join(","));return c&&c.focus&&c.focus(),c},responseHandler:function(e,t){function n(e,t,n){var i=e.callback,u=e.network;if(a.store(u,e),!("display"in e&&"page"===e.display)){if(n&&i&&i in n){try{delete e.callback}catch(e){}a.store(u,e);var s=JSON.stringify(e);try{r(n,i)(s)}catch(e){}}o()}}function r(e,t){return 0!==t.indexOf("_hellojs_")?function(){throw"Could not execute callback "+t}:e[t]}function o(){if(e.frameElement)t.document.body.removeChild(e.frameElement);else{try{e.close()}catch(e){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}}var i,a=this,u=e.location;if((i=a.param(u.search))&&i.state&&(i.code||i.oauth_token)){var s=JSON.parse(i.state);i.redirect_uri=s.redirect_uri||u.href.replace(/[\?\#].*$/,"");var c=s.oauth_proxy+"?"+a.param(i);return void u.assign(c)}if((i=a.merge(a.param(u.search||""),a.param(u.hash||"")))&&"state"in i){try{var l=JSON.parse(i.state);a.extend(i,l)}catch(e){console.error("Could not decode state parameter")}if("access_token"in i&&i.access_token&&i.network)i.expires_in&&0!==parseInt(i.expires_in,10)||(i.expires_in=0),i.expires_in=parseInt(i.expires_in,10),i.expires=(new Date).getTime()/1e3+(i.expires_in||31536e3),n(i,e,t);else if("error"in i&&i.error&&i.network)i.error={code:i.error,message:i.error_message||i.error_description},n(i,e,t);else if(i.callback&&i.callback in t){var f=!!("result"in i&&i.result)&&JSON.parse(i.result);r(t,i.callback)(f),o()}i.page_uri&&u.assign(i.page_uri)}else if("oauth_redirect"in i)return void u.assign(decodeURIComponent(i.oauth_redirect))}}),a.utils.Event.call(a),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function r(){var o=(new Date).getTime()/1e3,i=function(t){e.emit("auth."+t,{network:a,authResponse:u})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var u=e.utils.store(a)||{},s=e.services[a],c=t[a]||{};if(u&&"callback"in u){var l=u.callback;try{delete u.callback}catch(e){}e.utils.store(a,u);try{window[l](u)}catch(e){}}if(u&&"expires"in u&&u.expires<o){var f=s.refresh||u.refresh_token;!f||a in n&&!(n[a]<o)?f||a in n||(i("expired"),n[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),n[a]=o+600);continue}if(c.access_token===u.access_token&&c.expires===u.expires)continue;!u.access_token&&c.access_token?i("logout"):u.access_token&&!c.access_token?i("login"):u.expires!==c.expires&&i("update"),t[a]=u,a in n&&delete n[a]}setTimeout(r,1e3)}()}(a),a.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var a=n?n.replace(/^\|/,""):"";return t in i.query?(a=i.query[t],delete i.query[t]):i.data&&t in i.data?(a=i.data[t],delete i.data[t]):n||o.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=c.base+e),i.url=e,n.request(i,function(e,t){if(!i.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?o.reject(e):o.fulfill(e));if(!0===e?e={success:!0}:e||(e={}),"delete"===i.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),c.wrap&&(i.path in c.wrap||"default"in c.wrap)){var r=i.path in c.wrap?i.path:"default",a=((new Date).getTime(),c.wrap[r](e,t,i));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=i.path+e.paging.next:e.paging.next+="#"+i.path),!e||"error"in e?o.reject(e):o.fulfill(e)})}var t=this,n=t.utils,r=n.error,o=n.Promise(),i=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);i.method=(i.method||"get").toLowerCase(),i.headers=i.headers||{},i.query=i.query||{},"get"!==i.method&&"delete"!==i.method||(n.extend(i.query,i.data),i.data={});var a=i.data=i.data||{};if(o.then(i.callback,i.callback),!i.path)return o.reject(r("invalid_path","Missing the path parameter from the request"));i.path=i.path.replace(/^\/+/,"");var u=(i.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(u in t.services){i.network=u;var s=new RegExp("^"+u+":?/?");i.path=i.path.replace(s,"")}i.network=t.settings.default_service=i.network||t.settings.default_service;var c=t.services[i.network];if(!c)return o.reject(r("invalid_network","Could not match the service requested: "+i.network));if(i.method in c&&i.path in c[i.method]&&!1===c[i.method][i.path])return o.reject(r("invalid_path","The provided path is not available on the selected network"));i.oauth_proxy||(i.oauth_proxy=t.settings.oauth_proxy),"proxy"in i||(i.proxy=i.oauth_proxy&&c.oauth&&1===parseInt(c.oauth.version,10)),"timeout"in i||(i.timeout=t.settings.timeout),"formatResponse"in i||(i.formatResponse=!0),i.authResponse=t.getAuthResponse(i.network),i.authResponse&&i.authResponse.access_token&&(i.query.access_token=i.authResponse.access_token);var l,f=i.path;i.options=n.clone(i.query),i.data=n.clone(a);var p=c[{delete:"del"}[i.method]||i.method]||{};if("get"===i.method){var h=f.split(/[\?#]/)[1];h&&(n.extend(i.query,n.param(h)),f=f.replace(/\?.*?(#|$)/,"$1"))}return(l=f.match(/#(.+)/,""))?(f=f.split("#")[0],i.path=l[1]):f in p?(i.path=f,f=p[f]):"default"in p&&(f=p.default),i.redirect_uri=t.settings.redirect_uri,i.xhr=c.xhr,i.jsonp=c.jsonp,i.form=c.form,"function"==typeof f?f(i,e):e(f),o.proxy},a.utils.extend(a.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(r.extend(e.query,e.data),e.data=null);var o=r.qs(e.url,e.query);e.proxy&&(o=r.qs(e.oauth_proxy,{path:o,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(o)}var r=this,o=r.error;if(r.isEmpty(e.data)||"FileList"in window||!r.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1),this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))}))return void n(e,function(n){var o=r.xhr(e.method,n,e.headers,e.data,t);o.onprogress=e.onprogress||null,o.upload&&e.onuploadprogress&&(o.upload.onprogress=e.onuploadprogress)});var i=e.query;if(e.query=r.clone(e.query),e.callbackID=r.globalEvent(),!1!==e.jsonp){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){r.jsonp(n,t,e.callbackID,e.timeout)});e.query=i}if(!1!==e.form){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var a;if("function"==typeof e.form&&(a=e.form(e,e.query)),"post"===e.method&&!1!==a)return void n(e,function(n){r.post(n,e.data,a,t,e.callbackID,e.timeout)})}t(o("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return!!t&&(window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e)},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e)||"function"==typeof FormData&&e instanceof FormData)return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,r,o){function i(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}var a=new XMLHttpRequest,u=this.error,s=!1;"blob"===e&&(s=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var n=a.response;try{n=JSON.parse(a.responseText)}catch(e){401===a.status&&(n=u("access_denied",a.statusText))}var r=i(a.getAllResponseHeaders());r.statusCode=a.status,o(n||("GET"===e?u("empty_response","Could not get resource"):{}),r)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(e){}o(t||u("access_denied","Could not get resource"))};var c;if("GET"===e||"DELETE"===e)r=null;else if(r&&"string"!=typeof r&&!(r instanceof FormData)&&!(r instanceof File)&&!(r instanceof Blob)){var l=new FormData;for(c in r)r.hasOwnProperty(c)&&(r[c]instanceof HTMLInputElement?"files"in r[c]&&r[c].files.length>0&&l.append(c,r[c].files[0]):r[c]instanceof Blob?l.append(c,r[c],r.name):l.append(c,r[c]));r=l}if(a.open(e,t,!0),s&&("responseType"in a?a.responseType=s:a.overrideMimeType("text/plain; charset=x-user-defined")),n)for(c in n)a.setRequestHeader(c,n[c]);return a.send(r),a},jsonp:function(e,t,n,r){var o,i=this,a=i.error,u=0,s=document.getElementsByTagName("head")[0],c=a("server_error","server_error"),l=function(){u++||window.setTimeout(function(){t(c),s.removeChild(f)},0)};n=i.globalEvent(function(e){return c=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var f=i.append("script",{id:n,name:n,src:e,async:!0,onload:l,onerror:l,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&l()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(o=i.append("script",{text:"document.getElementById('"+n+"').onerror();"}),f.async=!1),r&&window.setTimeout(function(){c=a("timeout","timeout"),l()},r),s.appendChild(f),o&&s.appendChild(o)},post:function(e,t,n,r,o,i){var a,u=this,s=u.error,c=document,l=null,f=[],p=0,h=null,d=0,y=function(e){d++||r(e)};u.globalEvent(y,o);var v;try{v=c.createElement('<iframe name="'+o+'">')}catch(e){v=c.createElement("iframe")}if(v.name=o,v.id=o,v.style.display="none",n&&n.callbackonload&&(v.onload=function(){y({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){y(s("timeout","The post operation timed out"))},i),c.body.appendChild(v),u.domInstance("form",t)){for(l=t.form,p=0;p<l.elements.length;p++)l.elements[p]!==t&&l.elements[p].setAttribute("disabled",!0);t=l}if(u.domInstance("form",t))for(l=t,p=0;p<l.elements.length;p++)l.elements[p].disabled||"file"!==l.elements[p].type||(l.encoding=l.enctype="multipart/form-data",l.elements[p].setAttribute("name","file"));else{for(h in t)t.hasOwnProperty(h)&&u.domInstance("input",t[h])&&"file"===t[h].type&&(l=t[h].form,l.encoding=l.enctype="multipart/form-data");l||(l=c.createElement("form"),c.body.appendChild(l),a=l);var m;for(h in t)if(t.hasOwnProperty(h)){var b=u.domInstance("input",t[h])||u.domInstance("textArea",t[h])||u.domInstance("select",t[h]);if(b&&t[h].form===l)b&&t[h].name!==h&&(t[h].setAttribute("name",h),t[h].name=h);else{var g=l.elements[h];if(m)for(g instanceof NodeList||(g=[g]),p=0;p<g.length;p++)g[p].parentNode.removeChild(g[p]);m=c.createElement("input"),m.setAttribute("type","hidden"),m.setAttribute("name",h),b?m.value=t[h].value:u.domInstance(null,t[h])?m.value=t[h].innerHTML||t[h].innerText:m.value=t[h],l.appendChild(m)}}for(p=0;p<l.elements.length;p++)m=l.elements[p],m.name in t||!0===m.getAttribute("disabled")||(m.setAttribute("disabled",!0),f.push(m))}l.setAttribute("method","POST"),l.setAttribute("target",o),l.target=o,l.setAttribute("action",e),setTimeout(function(){l.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(e){}}for(var e=0;e<f.length;e++)f[e]&&(f[e].setAttribute("disabled",!1),f[e].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var r=atob(e.replace(t,"")),o=[],i=0;i<r.length;i++)o.push(r.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,r=e.data;if(t.domInstance("form",r)?r=t.nodeListToJSON(r.elements):"NodeList"in n&&r instanceof NodeList?r=t.nodeListToJSON(r):t.domInstance("input",r)&&(r=t.nodeListToJSON([r])),("File"in n&&r instanceof n.File||"Blob"in n&&r instanceof n.Blob||"FileList"in n&&r instanceof n.FileList)&&(r={file:r}),!("FormData"in n&&r instanceof n.FormData))for(var o in r)if(r.hasOwnProperty(o))if("FileList"in n&&r[o]instanceof n.FileList)1===r[o].length&&(r[o]=r[o][0]);else{if(t.domInstance("input",r[o])&&"file"===r[o].type)continue;t.domInstance("input",r[o])||t.domInstance("select",r[o])||t.domInstance("textArea",r[o])?r[o]=r[o].value:t.domInstance(null,r[o])&&(r[o]=r[o].innerHTML||r[o].innerText)}return e.data=r,r},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&("file"===r.type?t[r.name]=r:t[r.name]=r.value||r.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(a),a.utils.responseHandler(window,window.opener||window.parent),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&function(){function e(t,n){var r={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:n},function(t){if(void 0===t)return void(r.closed=!0);var n=a.utils.url(t),o={location:{assign:function(t){e(t,!1)},search:n.search,hash:n.hash,href:n.href},close:function(){}};a.utils.responseHandler(o,window)}),r}a.utils.popup=function(t){return e(t,!0)},a.utils.iframe=function(t){e(t,!1)},a.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello||{}}),a.utils.store=function(e,n){return 0===arguments.length?t:1===arguments.length?t[e]||null:n?(t[e]=n,chrome.storage.local.set({hello:t}),n):null===n?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(){if(/^file:\/{3}[^\/]/.test(window.location.href)&&window.cordova){a.utils.iframe=function(e,t){a.utils.popup(e,t,{hidden:"yes"})};var e=a.utils.popup;a.utils.popup=function(t,n,r){var o=e.call(this,t,n,r);try{if(o&&o.addEventListener){var i=a.utils.url(n),u=i.origin||i.protocol+"//"+i.hostname;o.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(u)){var n=a.utils.url(t),r={location:{assign:function(e){o.executeScript({code:'window.location.href = "'+e+';"'})},search:n.search,hash:n.hash,href:n.href},close:function(){if(o.close){o.close();try{o.closed=!0}catch(e){}}}};a.utils.responseHandler(r,window)}})}}catch(e){}return o}}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,r){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var o=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");o=o.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=r.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+o+"?format=jpeg&size=m")+"&access_token="+r.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=o.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+o)+"&access_token="+r.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+o),t.id||(t.id=t.path.replace(/^\//,""))}}function r(e){return function(t,n){delete t.query.limit,n(e)}}var o={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},i={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:i,login:function(t){t.qs.scope="";var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=o:e.services.dropbox.oauth=i,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":r("metadata/auto/@{parent|}"),"me/folder":r("metadata/auto/@{id}"),"me/folders":r("metadata/auto/"),default:function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var r=t.data.parent,o=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+r+"/"+o)},"me/folders":function(t,n){var r=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:r}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},default:function(e,r,o){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,n(t,r,o)})),n(e,r,o),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(a),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function r(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var r=n.query.access_token;if(!(e.data instanceof Array)){var i=e.data;delete e.data,e.data=[i]}e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=o+e.cover_photo.id+"/picture?access_token="+r),"album"===e.type&&(e.files=e.photos=o+e.id+"/photos"),e.can_upload&&(e.upload_location=o+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos",videos:"user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:""},refresh:!1,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.qs.display=e.options.display||"popup"},logout:function(t,n){var r=e.utils.globalEvent(t),o=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:r,result:JSON.stringify({force:!0}),state:"{}"})),i=(n.authResponse||{}).access_token;if(e.utils.iframe("https://www.facebook.com/logout.php?next="+o+"&access_token="+i),!i)return!1},base:"https://graph.facebook.com/v2.7/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":r,"me/photos":r,"me/files":r,default:r},xhr:function(t,n){return"get"!==t.method&&"post"!==t.method||(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var r=t.method;"get"===r||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=r,t.method="get")},form:function(e){return{callbackonload:!0}}}});var o="https://graph.facebook.com/"}(a),function(e){function t(t,n,r){
var o=(r?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var i in n)n.hasOwnProperty(i)&&(o+="&"+i+"="+n[i]);return o}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function r(e,r){return r||(r={}),function(o,i){n(function(n){r.user_id=n,i(t(e,r,!0))})}}function o(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function i(e,t,n,r,o){return o=o?"_"+o:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+r+o+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function u(e){if(e.photoset||e.photos){e=c(e,"photoset"in e?"photoset":"photos"),f(e),e.data=e.photo,delete e.photo;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.name=n.title,n.picture=i(n.id,n.farm,n.server,n.secret,""),n.pictures=s(n.id,n.farm,n.server,n.secret),n.source=i(n.id,n.farm,n.server,n.secret,"b"),n.thumbnail=i(n.id,n.farm,n.server,n.secret,"m")}}return e}function s(e,t,n,r){return[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:2048}].map(function(o){return{source:i(e,t,n,r,o.id),width:o.max,height:o.max}})}function c(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function l(e){if(a(e),e.contacts){e=c(e,"contacts"),f(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=o(n,"m")}}return e}function f(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:r("flickr.people.getInfo"),"me/friends":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":r("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":r("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":r("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=c(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=o(e,"l"),e.picture=o(e,"l")}return e},"me/friends":l,"me/followers":l,"me/following":l,"me/albums":function(e){return a(e),e=c(e,"photosets"),f(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),u(e)},default:function(e){return a(e),u(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(a),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function r(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},default:function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:r,jsonp:r}})}(a),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;401!==n&&403!==n||(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function r(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var r=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);r&&(e.paging={next:r[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,r){return t(e,r),n(e),e},default:function(e,o,i){return t(e,o),Array.isArray(e)&&(e={data:e}),e.data&&(r(e,o,i),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(a),function(e){function t(e){return parseInt(e,10)}function n(e){return l(e),e.data=e.items,delete e.items,e}function r(e){if(!e.error)return e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e}function o(e){return{source:e.url,width:e.width,height:e.height}}function i(e){e.data=e.feed.entry.map(c),delete e.feed}function a(e){if(l(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(c),delete e.feed;else{if("entry"in e)return c(e.entry);"items"in e?(e.data=e.items.map(r),delete e.items):r(e)}return e}function u(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function s(e,t,n){l(e);if("feed"in e&&"entry"in e.feed){for(var r=n.query.access_token,o=0;o<e.feed.entry.length;o++){var i=e.feed.entry[o];if(i.id=i.id.$t,i.name=i.title.$t,delete i.title,i.gd$email&&(i.email=i.gd$email&&i.gd$email.length>0?i.gd$email[0].address:null,i.emails=i.gd$email,delete i.gd$email),i.updated&&(i.updated=i.updated.$t),i.link){var a=i.link.length>0?i.link[0].href:null;a&&i.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+r,i.picture=a,i.thumbnail=a),delete i.link}i.category&&delete i.category}e.data=e.feed.entry,delete e.feed}return e}function c(e){var t,n=e.media$group,r=n.media$content.length?n.media$content[0]:{},i=n.media$content||[],a=n.media$thumbnail||[],u=i.concat(a).map(o).sort(function(e,t){return e.width-t.width}),s=0,c={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:r?r.url:null,pictures:u,images:[],thumbnail:r?r.url:null,width:r.width,height:r.height};if("link"in e)for(s=0;s<e.link.length;s++){var l=e.link[s];if(l.rel.match(/\#feed$/)){c.upload_location=c.files=c.photos=l.href;break}}if("category"in e&&e.category.length)for(t=e.category,s=0;s<t.length;s++)t[s].scheme&&t[s].scheme.match(/\#kind$/)&&(c.type=t[s].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,c.thumbnail=t[0].url,c.images=t.map(o)),t=n.media$content,t&&t.length&&c.images.push(o(t[0])),c}function l(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),r=t(e.feed.openSearch$startIndex.$t);r+n<t(e.feed.openSearch$totalResults.$t)&&(e.paging={next:"?start="+(r+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function f(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+i+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(i+"Content-Type: "+t+i+i+e),o--,u()}var n=[],r=(1e10*Math.random()).toString(32),o=0,i="\r\n",a=i+"--"+r,u=function(){},s=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,r){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var a=0;a<n.length;a++){o++;var u=n[a];if("undefined"!=typeof File&&u instanceof File||"undefined"!=typeof Blob&&u instanceof Blob)e(u);else if("string"==typeof u&&u.match(s)){var c=u.match(s);t(u.replace(s,""),c[1]+i+"Content-Transfer-Encoding: base64")}else t(u,r)}},this.onready=function(e){(u=function(){0===o&&(n.unshift(""),n.push("--"),e(n.join(a),r),n=[])})()}}function p(e,t){var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var r;if("file"in e.data&&(r=e.data.file,delete e.data.file,"object"==typeof r&&"files"in r&&(r=r.files),!r||!r.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var o=new f;o.append(JSON.stringify(e.data),"application/json"),r&&o.append(r),o.onready(function(r,o){e.headers["content-type"]='multipart/related; boundary="'+o+'"',e.data=r,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart")})}function h(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(e){}}var d="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",share:"",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":d,"me/followers":d,"me/contacts":d,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/file":"drive/v2/files/@{id}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":p,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":p},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},patch:{"me/file":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),u(e)),e},"me/friends":function(e){return e.items&&(l(e),e.data=e.items,e.data.forEach(u),delete e.items),e},"me/contacts":s,"me/followers":s,"me/following":s,"me/share":n,"me/feed":n,"me/albums":a,"me/photos":i,default:a},xhr:function(t){return"post"===t.method||"put"===t.method?h(t):"patch"===t.method&&(e.utils.extend(t.query,t.data),t.data=null),!0},form:!1}})}(a),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function r(e){return i(e),e&&"data"in e&&e.data.forEach(o),e}function o(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function i(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",photos:"",friends:"relationships",publish:"likes comments",email:"",share:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":r,"me/following":r,"me/followers":r,"me/photos":function(e){return n(e),i(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){return t(e.images[n])}).sort(function(e,t){return e.width-t.width})})),e},default:function(e){return e=n(e),i(e),e}},xhr:function(e,t){var n=e.method,r="get"!==n;return r&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=r),r},form:!1}})}(a),function(e){function t(e,t){var n,o;return e&&"Message"in e&&(o=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=r(t),e.error={code:n,message:o,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function r(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting",email:"",friends:"",share:"",publish:"",photos:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},default:function(e,n){return t(e,n),e}},xhr:n}})}(a),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){if(!e.error)return e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e}function r(e){return t(e),o(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function o(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function i(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function u(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",files:"",friends:"",photos:"",publish:"w_share",publish_files:"w_share",share:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":u},del:{"me/like":u},wrap:{me:function(e){return t(e),n(e),e},"me/friends":r,"me/following":r,"me/followers":r,"me/share":function(e){return t(e),o(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},default:function(e,n){t(e),i(e,n),o(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method&&(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0)}}})}(a),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function r(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json",default:function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},default:function(e){return Array.isArray(e)&&(e={data:e.map(n)}),r(e),e}},xhr:t,jsonp:t}})}(a),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return r(e),o(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function r(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function o(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function i(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){this.oauth.auth=this.oauth.auth.replace("?force_login=true","")+(e.options.force?"?force_login=true":"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var r=t.data;t.data=null;var o=[];r.message&&(o.push(r.message),delete r.message),r.link&&(o.push(r.link),delete r.link),r.picture&&(o.push(r.picture),delete r.picture),o.length&&(r.status=o.join(" ")),r.file?(r["media[]"]=r.file,delete r.file,t.data=r,n("statuses/update_with_media.json")):"id"in r?n("statuses/retweet/"+r.id+".json"):(e.utils.extend(t.query,r),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return r(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return r(e),o(e),!e.error&&"length"in e?{data:e}:e},default:function(e){return e=i(e),o(e),e}},xhr:function(e){return"get"!==e.method}}})}(a),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{email:"email",friends:"friends",photos:"photos",videos:"video",share:"share",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,r,o){return n(e),t(e,o)}},xhr:!1,jsonp:!0,form:!1}})}(a),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function r(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function o(e,t,n){if(e.id){var r=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),!1!==e.is_friend){var o=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+o+"/picture?access_token="+r}}return e}function i(e,t,n){return"data"in e&&e.data.forEach(function(e){o(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",share:"wl.share",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:o,"me/friends":i,"me/contacts":i,"me/followers":i,"me/following":i,"me/albums":r,"me/photos":t,default:t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(a),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function r(e,n,r){t(e),i(e,n,r);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(o)),e}function o(e){e.id=null,!e.fields||e.fields instanceof Array||(e.fields=[e.fields]),(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function i(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(e){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":r,"me/following":r,default:i}}})}(a),void 0!==(r=function(){return a}.call(t,n,t,e))&&(e.exports=r),"object"==typeof e&&e.exports&&(e.exports=a)}).call(t,n(47),n(334).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(335),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[s]=r,u(s),s++}function o(e){delete c[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var u,s=1,c={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),u=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},u=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;u=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){u=function(e){setTimeout(a,0,e)}}(),p.setImmediate=r,p.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,function(){return this}(),n(47))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Google=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(332),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(328);t.Google=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"identity",get:function(){return c.SocialIdentity.Google}}],[{key:"identity",get:function(){return c.SocialIdentity.Google}}]),t}(s.default)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedIn=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(332),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(328);t.LinkedIn=function(e){function t(){return r(this,t),
o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"identity",get:function(){return c.SocialIdentity.LinkedIn}}],[{key:"identity",get:function(){return c.SocialIdentity.LinkedIn}}]),t}(s.default)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileIdentityConnect=t.AuthorizationGrant=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=r(s),l=n(339),f=r(l),p=n(228),h=r(p),d=n(270),y=r(d),v=n(234),m=n(2),b=n(41),g=n(330),w=r(g),_=n(332),O=r(_),E=n(328),k=e&&e.env&&e.env.KINVEY_MIC_AUTH_PATHNAME||"/oauth/auth"||"/oauth/auth",j=e&&e.env&&e.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token"||"/oauth/token",x=e&&e.env&&e.env.KINVEY_MIC_INVALIDATE_PATHNAME||"/oauth/invalidate"||"/oauth/invalidate",P=w.default,T={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};Object.freeze(T),t.AuthorizationGrant=T;t.MobileIdentityConnect=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"isSupported",value:function(){return!0}},{key:"login",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.AuthorizationCodeLoginPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.client.appKey;return c.default.resolve().then(function(){if(r===T.AuthorizationCodeLoginPage)return n.requestCodeWithPopup(i,e,o);if(r===T.AuthorizationCodeAPI)return n.requestTempLoginUrl(i,e,o).then(function(t){return n.requestCodeWithUrl(t,i,e,o)});throw new m.KinveyError("The authorization grant "+r+" is unsupported. Please use a supported authorization grant.")}).then(function(t){return n.requestToken(t,i,e,o)}).then(function(r){return r.identity=t.identity,r.client_id=i,r.redirect_uri=e,r.protocol=n.client.micProtocol,r.host=n.client.micHost,r})}},{key:"requestTempLoginUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="/";if(n.version){var o=n.version;(0,y.default)(o)||(o=String(o)),r=f.default.join(r,0===o.indexOf("v")?o:"v"+o)}return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:h.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:f.default.join(r,k)}),properties:n.properties,body:{client_id:e,redirect_uri:t,response_type:"code"}}).execute().then(function(e){return e.data.temp_login_uri})}},{key:"requestCodeWithPopup",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.default.resolve().then(function(){var o="/",i=new P;if(r.version){var a=r.version;(0,y.default)(a)||(a=String(a)),o=f.default.join(o,0===a.indexOf("v")?a:"v"+a)}return i.open(h.default.format({protocol:n.client.micProtocol,host:n.client.micHost,pathname:f.default.join(o,k),query:{client_id:e,redirect_uri:t,response_type:"code"}}))}).then(function(e){return new c.default(function(n,r){function o(r){try{r.url&&0===r.url.indexOf(t)&&!1===u&&(u=!0,e.removeAllListeners(),e.close(),n(h.default.parse(r.url,!0).query.code))}catch(e){}}function i(o){try{o.url&&0===o.url.indexOf(t)&&!1===u?(u=!0,e.removeAllListeners(),e.close(),n(h.default.parse(o.url,!0).query.code)):!1===u&&(e.removeAllListeners(),e.close(),r(new m.KinveyError(o.message,"",o.code)))}catch(e){}}function a(){!1===u&&(e.removeAllListeners(),r(new m.KinveyError("Login has been cancelled.")))}var u=!1;e.on("loadstart",o),e.on("loadstop",o),e.on("error",i),e.on("exit",a)})})}},{key:"requestCodeWithUrl",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c.default.resolve().then(function(){return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:e,properties:r.properties,body:{client_id:t,redirect_uri:n,response_type:"code",username:r.username,password:r.password},followRedirect:!1}).execute()}).then(function(e){var t=e.headers.get("location");if(t)return h.default.parse(t,!0).query.code;throw new m.MobileIdentityConnectError("Unable to authorize user with username "+r.username+".","A location header was not provided with a code to exchange for an auth token.")})}},{key:"requestToken",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:v.AuthType.App,url:h.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:j}),properties:r.properties,body:{grant_type:"authorization_code",client_id:t,redirect_uri:n,code:e}}).execute().then(function(e){return e.data})}},{key:"logout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new v.KinveyRequest({method:v.RequestMethod.GET,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:v.AuthType.App,url:h.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:x,query:{user:e._id}}),properties:t.properties}).execute().then(function(e){return e.data})}},{key:"identity",get:function(){return E.SocialIdentity.MobileIdentityConnect}}],[{key:"isSupported",value:function(){return!0}},{key:"usePopupClass",value:function(e){(0,b.isDefined)(e)&&(P=e)}},{key:"identity",get:function(){return E.SocialIdentity.MobileIdentityConnect}}]),t}(O.default)}).call(t,n(47))},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}for(var c=[],s=u;s<o.length;s++)c.push("..");return c=c.concat(i.slice(u)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(47))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Windows=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(332),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(328);t.Windows=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"identity",get:function(){return c.SocialIdentity.Windows}}],[{key:"identity",get:function(){return c.SocialIdentity.Windows}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Metadata=t.Acl=void 0;var o=n(342),i=r(o),a=n(343),u=r(a),s=n(344),c=r(s);t.Acl=i.default,t.Metadata=u.default,t.User=c.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(126),c=r(s),l=n(203),f=r(l),p=n(2),h=n(41),d=function(){function e(t){if(o(this,e),!1===(0,u.default)(t))throw new p.KinveyError("entity argument must be an object");t._acl=t._acl||{},this.entity=t}return i(e,[{key:"addReader",value:function(e){var t=this.readers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.r=t,this}},{key:"addReaderGroup",value:function(e){var t=this.readerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.groups=(0,f.default)({},this.entity._acl.groups,{r:t}),this}},{key:"addWriter",value:function(e){var t=this.writers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.w=t,this}},{key:"addWriterGroup",value:function(e){var t=this.writerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.groups=(0,f.default)({},this.entity._acl.groups,{w:t}),this}},{key:"isGloballyReadable",value:function(){return!0===this.entity._acl.gr&&this.entity._acl.gr}},{key:"isGloballyWritable",value:function(){return!0===this.entity._acl.gw&&this.entity._acl.gw}},{key:"removeReader",value:function(e){var t=this.readers,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.r=t,this}},{key:"removeReaderGroup",value:function(e){var t=this.readerGroups,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.groups=(0,f.default)({},this.entity._acl.groups,{r:t}),this}},{key:"removeWriter",value:function(e){var t=this.writers,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.w=t,this}},{key:"removeWriterGroup",value:function(e){var t=this.writerGroups,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.groups=(0,f.default)({},this.entity._acl.groups,{w:t}),this}},{key:"toPlainObject",value:function(){return this.entity._acl}},{key:"creator",get:function(){return this.entity._acl.creator}},{key:"readers",get:function(){return(0,c.default)(this.entity._acl.r)?this.entity._acl.r:[]}},{key:"writers",get:function(){return(0,c.default)(this.entity._acl.w)?this.entity._acl.w:[]}},{key:"readerGroups",get:function(){return(0,h.isDefined)(this.entity._acl.groups)&&(0,c.default)(this.entity._acl.groups.r)?this.entity._acl.groups.r:[]}},{key:"writerGroups",get:function(){return(0,h.isDefined)(this.entity._acl.groups)&&(0,c.default)(this.entity._acl.groups.w)?this.entity._acl.groups.w:[]}},{key:"globallyReadable",set:function(e){this.entity._acl.gr=!0===e&&e}},{key:"globallyWritable",set:function(e){this.entity._acl.gw=!0===e&&e}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(294),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(2),s=n(41),c=function(){function e(t){if(r(this,e),!1===(0,a.default)(t))throw new u.KinveyError("entity argument must be an object");t._kmd=t._kmd||{},this.entity=t}return o(e,[{key:"isLocal",value:function(){return!0===this.entity._kmd.local}},{key:"toPlainObject",value:function(){return this.entity._kmd}},{key:"createdAt",get:function(){if((0,s.isDefined)(this.entity._kmd.ect))return new Date(this.entity._kmd.ect)}},{key:"ect",get:function(){return this.createdAt}},{key:"emailVerification",get:function(){if((0,s.isDefined)(this.entity._kmd.emailVerification))return this.entity._kmd.emailVerification.status}},{key:"lastModified",get:function(){if((0,s.isDefined)(this.entity._kmd.lmt))return new Date(this.entity._kmd.lmt)}},{key:"lmt",get:function(){return this.lastModified}},{key:"authtoken",get:function(){return this.entity._kmd.authtoken}}]),e}();t.default=c},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(203),c=r(s),l=n(270),f=r(l),p=n(85),h=r(p),d=n(276),y=r(d),v=n(228),m=r(v),b=n(269),g=r(b),w=n(234),_=n(2),O=n(66),E=r(O),k=n(327),j=n(41),x=n(342),P=r(x),T=n(343),S=r(T),A=e&&e.env&&e.env.KINVEY_USERS_NAMESPACE||"user"||"user",R=e&&e.env&&e.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc",C=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",I=e&&e.env&&e.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity"||"_socialIdentity",M=e&&e.env&&e.env.KINVEY_USERNAME_ATTRIBUTE||"username"||"username",q=e&&e.env&&e.env.KINVEY_EMAIL_ATTRIBUTE||"email"||"email",D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.data=t,this.client=n.client||g.default.sharedInstance()}return i(e,[{key:"isActive",value:function(){var t=e.getActiveUser(this.client);return!(!(0,j.isDefined)(t)||t._id!==this._id)}},{key:"isEmailVerified",value:function(){return"confirmed"===this.metadata.emailVerification}},{key:"login",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t,a=this.isActive(),s=e.getActiveUser(this.client);return!0===a?u.default.reject(new _.ActiveUserError("This user is already the active user.")):(0,j.isDefined)(s)?u.default.reject(new _.ActiveUserError("An active user already exists. Please logout the active user before you login.")):((0,h.default)(i)?o=n||{}:i={username:t,password:n},(0,j.isDefined)(i.username)&&(i.username=String(i.username).trim()),(0,j.isDefined)(i.password)&&(i.password=String(i.password).trim()),(0,j.isDefined)(i.username)&&""!==i.username&&(0,j.isDefined)(i.password)&&""!==i.password||(0,j.isDefined)(i._socialIdentity)?new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.App,url:m.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/login"}),body:i,properties:o.properties,timeout:o.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(e){return(0,j.isDefined)(i._socialIdentity)&&(0,j.isDefined)(e._socialIdentity)&&(Object.keys(e._socialIdentity).forEach(function(t){e._socialIdentity[t]=(0,c.default)({},i._socialIdentity[t],e._socialIdentity[t])}),e._socialIdentity=(0,c.default)({},i._socialIdentity,e._socialIdentity)),delete e.password,r.data=e,w.CacheRequest.setActiveUser(r.client,r.data)}).then(function(){return r}):u.default.reject(new _.KinveyError("Username and/or password missing. Please provide both a username and password to login.")))}},{key:"loginWithMIC",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.isActive(),a=e.getActiveUser(this.client);if(i)throw new _.ActiveUserError("This user is already the active user.");if((0,j.isDefined)(a))throw new _.ActiveUserError("An active user already exists. Please logout the active user before you login.");return new k.MobileIdentityConnect({client:this.client}).login(t,n,o).then(function(e){return r.connectIdentity(k.MobileIdentityConnect.identity,e,o)})}},{key:"connectIdentity",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.isActive(),i={},a=i[I]||{};return a[e]=t,i[I]=a,o?this.update(i,r):this.login(i,r).catch(function(o){if(o instanceof _.NotFoundError)return n.signup(i,r).then(function(){return n.connectIdentity(e,t,r)});throw o})}},{key:"connectFacebook",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k.Facebook({client:this.client}).login(e,n).then(function(e){return t.connectIdentity(k.Facebook.identity,e,n)})}},{key:"disconnectFacebook",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.disconnectIdentity(k.Facebook.identity,e)}},{key:"connectGoogle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k.Google({client:this.client}).login(e,n).then(function(e){return t.connectIdentity(k.Google.identity,e,n)})}},{key:"disconnectGoogle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.disconnectIdentity(k.Google.identity,e)}},{key:"googleconnectLinkedIn",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k.LinkedIn({client:this.client}).login(e,n).then(function(e){return t.connectIdentity(k.LinkedIn.identity,e,n)})}},{key:"disconnectLinkedIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.disconnectIdentity(k.LinkedIn.identity,e)}},{key:"disconnectIdentity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u.default.resolve();return e===k.Facebook.identity?r=k.Facebook.logout(this,n):e===k.Google.identity?r=k.Google.logout(this,n):e===k.LinkedIn.identity?r=k.LinkedIn.logout(this,n):e===k.MobileIdentityConnect.identity&&(r=k.MobileIdentityConnect.logout(this,n)),r.catch(function(e){j.Log.error(e)}).then(function(){var r=t.data,o=r[I]||{};return delete o[e],r[I]=o,t.data=r,t[C]?t.update(r,n):t}).then(function(){return t})}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.Session,url:m.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/_logout"}),properties:t.properties,timeout:t.timeout,client:this.client}).execute().catch(function(e){return j.Log.error(e),null}).then(function(){return w.CacheRequest.setActiveUser(e.client,null)}).catch(function(e){return j.Log.error(e),null}).then(function(){return E.default.clearCache({client:e.client})}).catch(function(e){return j.Log.error(e),null}).then(function(){return e})}},{key:"signup",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.getActiveUser(this.client);if(r=(0,c.default)({state:!0},r),!0===r.state&&(0,j.isDefined)(o))throw new _.ActiveUserError("An active user already exists. Please logout the active user before you login.");return t instanceof e&&(t=t.data),t=(0,c.default)(this.data,t),new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.App,url:m.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),body:(0,y.default)(t)?null:t,properties:r.properties,timeout:r.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(e){return n.data=e,!0===r.state?w.CacheRequest.setActiveUser(n.client,n.data):n}).then(function(){return n})}},{key:"signupWithIdentity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return r[I]={},r[I][e]=t,this.signup(r,n)}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(0,c.default)(this.data,e),(new O.UserStore).update(e,n).then(function(e){return t.isActive()?w.CacheRequest.setActiveUser(t.client,e):e}).then(function(e){return t.data=e,t})}},{key:"me",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w.KinveyRequest({method:w.RequestMethod.GET,authType:w.AuthType.Session,url:m.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/_me"}),properties:t.properties,timeout:t.timeout}).execute().then(function(e){return e.data}).then(function(t){return t=(0,c.default)(e.data,t),delete t.password,e.data=t,e.isActive()?w.CacheRequest.setActiveUser(e.client,e.data):t}).then(function(){return e})}},{key:"_id",get:function(){return this.data[C]}},{key:"_acl",get:function(){return new P.default(this.data)}},{key:"metadata",get:function(){return new S.default(this.data)}},{key:"_kmd",get:function(){return this.metadata}},{key:"_socialIdentity",get:function(){return this.data[I]}},{key:"authtoken",get:function(){return this.metadata.authtoken}},{key:"username",get:function(){return this.data[M]}},{key:"email",get:function(){return this.data[q]}},{key:"pathname",get:function(){return"/"+A+"/"+this.client.appKey}}],[{key:"login",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},n).login(e,t,n)}},{key:"loginWithMIC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},n).loginWithMIC(e,t,n)}},{key:"connectIdentity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},n).connectIdentity(e,t,n)}},{key:"connectFacebook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this({},t).connectFacebook(e,t)}},{key:"connectGoogle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this({},t).connectGoogle(e,t)}},{key:"connectLinkedIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this({},t).connectLinkedIn(e,t)}},{key:"logout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getActiveUser(t.client);return(0,j.isDefined)(n)?n.logout(t):u.default.resolve(null)}},{key:"signup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this({},t).signup(e,t)}},{key:"signupWithIdentity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},n).signupWithIdentity(e,t,n)}},{key:"update",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.getActiveUser(n.client);return(0,j.isDefined)(r)?r.update(t,n):u.default.resolve(null)}},{key:"me",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getActiveUser(t.client);return n?n.me(t):u.default.resolve(null)}},{key:"getActiveUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.default.sharedInstance(),t=w.CacheRequest.getActiveUser(e);return(0,j.isDefined)(t)?new this(t,{client:e}):null}},{key:"verifyEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return u.default.reject(new _.KinveyError("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!(0,f.default)(e))return u.default.reject(new _.KinveyError("The provided username is not a string."));var n=t.client||g.default.sharedInstance();return new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.App,url:m.default.format({protocol:n.apiProtocol,host:n.apiHost,pathname:"/"+R+"/"+n.appKey+"/"+e+"/user-email-verification-initiate"}),properties:t.properties,timeout:t.timeout,client:n}).execute().then(function(e){return e.data})}},{key:"forgotUsername",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return u.default.reject(new _.KinveyError("An email was not provided.","Please provide an email for the user that you would like to retrieve their username."));if(!(0,f.default)(e))return u.default.reject(new _.KinveyError("The provided email is not a string."));var n=t.client||g.default.sharedInstance();return new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.App,url:m.default.format({protocol:n.apiProtocol,host:n.apiHost,pathname:"/"+R+"/"+n.appKey+"/user-forgot-username"}),properties:t.properties,data:{email:e},timeout:t.timeout,client:n}).execute().then(function(e){return e.data})}},{key:"resetPassword",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return u.default.reject(new _.KinveyError("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!(0,f.default)(e))return u.default.reject(new _.KinveyError("The provided username is not a string."));var n=t.client||g.default.sharedInstance();return new w.KinveyRequest({method:w.RequestMethod.POST,authType:w.AuthType.App,url:m.default.format({protocol:n.apiProtocol,host:n.apiHost,pathname:"/"+R+"/"+n.appKey+"/"+e+"/user-password-reset-initiate"}),properties:t.properties,timeout:t.timeout,client:n}).execute().then(function(e){return e.data})}},{key:"lookup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new O.UserStore).lookup(e,t)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new O.UserStore).exists(e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new O.UserStore).removeById(e,t)}},{key:"restore",value:function(){return u.default.reject(new _.KinveyError("This function requires a master secret to be provided for your application. We strongly advise not to do this."))}},{key:"usePopupClass",value:function(e){k.MobileIdentityConnect.usePopupClass(e)}}]),e}();t.default=D}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(270),u=r(a),s=n(126),c=r(s),l=n(228),f=r(l),p=n(234),h=n(2),d=n(272),y=r(d),v=n(269),m=r(v),b=n(41),g=n(283),w=r(g),_=e&&e.env&&e.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),t&&!(0,u.default)(t))throw new h.KinveyError("Collection must be a string.");this.collection=t,this.client=n.client,this.useDeltaFetch=!0===n.useDeltaFetch}return i(e,[{key:"find",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0===n.useDeltaFetch||this.useDeltaFetch;return b.KinveyObservable.create(function(o){if((0,b.isDefined)(e)&&!(e instanceof y.default))return o.error(new h.KinveyError("Invalid query. It must be an instance of the Query class."));var i={method:p.RequestMethod.GET,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout,client:t.client},a=new p.KinveyRequest(i);return!0===r&&(a=new p.DeltaFetchRequest(i)),a.execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})})}},{key:"findById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.useDeltaFetch||this.useDeltaFetch;return b.KinveyObservable.create(function(o){if(!e)return o.next(void 0),o.complete();var i={method:p.RequestMethod.GET,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:n.properties,timeout:n.timeout,client:t.client},a=new p.KinveyRequest(i);return!0===r&&(a=new p.DeltaFetchRequest(i)),a.execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})})}},{key:"group",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){return e instanceof w.default?new p.KinveyRequest({method:p.RequestMethod.POST,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_group"}),properties:n.properties,aggregation:e,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new h.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){try{if(e&&!(e instanceof y.default))throw new h.KinveyError("Invalid query. It must be an instance of the Query class.");return new p.KinveyRequest({method:p.RequestMethod.GET,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_count"}),properties:n.properties,query:e,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return r.next(e?e.count:0)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}catch(e){return r.error(e)}})}},{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){return!1===(0,b.isDefined)(e)?(r.next(null),r.complete()):(0,c.default)(e)?r.error(new h.KinveyError("Unable to create an array of entities.","Please create entities one by one.")):new p.KinveyRequest({method:p.RequestMethod.POST,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,data:e,timeout:n.timeout,client:t.client
}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){return!1===(0,b.isDefined)(e)?(r.next(null),r.complete()):(0,c.default)(e)?r.error(new h.KinveyError("Unable to update an array of entities.","Please update entities one by one.")):!1===(0,b.isDefined)(e._id)?r.error(new h.KinveyError("Unable to update entity.","Entity must contain an _id to be updated.")):new p.KinveyRequest({method:p.RequestMethod.PUT,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,data:e,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"save",value:function(e,t){return e._id?this.update(e,t):this.create(e,t)}},{key:"remove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){try{if(e&&!(e instanceof y.default))throw new h.KinveyError("Invalid query. It must be an instance of the Query class.");return new p.KinveyRequest({method:p.RequestMethod.DELETE,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}catch(e){return r.error(e)}}).toPromise()}},{key:"removeById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.KinveyObservable.create(function(r){try{if(!1===(0,b.isDefined)(e))return r.next(void 0),r.complete();return new p.KinveyRequest({method:p.RequestMethod.DELETE,authType:p.AuthType.Default,url:f.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}catch(e){return r.error(e)}}).toPromise()}},{key:"subscribe",value:function(e,t,n){return this.liveStream.subscribe(e,t,n)}},{key:"client",get:function(){return(0,b.isDefined)(this._client)?this._client:m.default.sharedInstance()},set:function(e){e instanceof m.default?this._client=e:this._client=null}},{key:"pathname",get:function(){var e="/"+_+"/"+this.client.appKey;return this.collection&&(e=e+"/"+this.collection),e}},{key:"liveStream",get:function(){var e=this;if("undefined"==typeof EventSource)throw new h.KinveyError("Your environment does not support server-sent events.");if(!this._liveStream){var t=new EventSource(f.default.format({protocol:this.client.liveServiceProtocol,host:this.client.liveServiceHost,pathname:this.pathname}));this._liveStream=b.KinveyObservable.create(function(e){return t.onopen=function(e){b.Log.info("Subscription to Kinvey Live Service is now open at "+t.url+"."),b.Log.info(e)},t.onmessage=function(t){try{e.next(JSON.parse(t.data))}catch(t){e.error(t)}},t.onerror=function(t){e.error(t)},function(){e.complete()}}).finally(function(){t.close(),delete e._liveStream})}return this._liveStream}}]),e}();t.default=O}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncOperation=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(226),c=r(s),l=n(318),f=r(l),p=n(126),h=r(p),d=n(270),y=r(d),v=n(228),m=r(v),b=n(234),g=n(2),w=n(41),_=n(269),O=r(_),E=n(272),k=r(E),j=e&&e.env&&e.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",x=e&&e.env&&e.env.KINVEY_SYNC_COLLECTION_NAME||"kinvey_sync"||"kinvey_sync",P=new Map,T={Create:b.RequestMethod.POST,Update:b.RequestMethod.PUT,Delete:b.RequestMethod.DELETE};Object.freeze(T),t.SyncOperation=T;var S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),!t)throw new g.SyncError("A collection is required.");if(!(0,y.default)(t))throw new g.SyncError("Collection must be a string.");this.collection=t,this.client=n.client||O.default.sharedInstance()}return i(e,[{key:"find",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.isDefined)(e)&&e instanceof k.default==!1&&(e=new k.default((0,f.default)(e,"toJSON",e))),new b.CacheRequest({method:b.RequestMethod.GET,url:m.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.backendPathname}),query:e,properties:n.properties,timeout:n.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(r){var o=new k.default;return o.equalTo("collection",t.collection),(0,w.isDefined)(e)&&o.contains("entityId",(0,c.default)(r,function(e){return e._id})),new b.CacheRequest({method:b.RequestMethod.GET,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:o,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data})})}},{key:"count",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.find(e,t).then(function(e){return e.length})}},{key:"addCreateOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(T.Create,e,t)}},{key:"addUpdateOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(T.Update,e,t)}},{key:"addDeleteOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(T.Delete,e,t)}},{key:"addOperation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.Create,t=this,n=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!1;return(0,h.default)(n)||(o=!0,n=[n]),u.default.all((0,c.default)(n,function(n){if(!n)return u.default.resolve(null);var o=n._id;if(!o)return u.default.reject(new g.SyncError("An entity is missing an _id. All entities must have an _id in order to be added to the sync table.",n));var i=(new k.default).equalTo("entityId",o);return new b.CacheRequest({method:b.RequestMethod.GET,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:i,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(n){var i=1===n.length?n[0]:{collection:t.collection,state:{},entityId:o};return i.state=i.state||{},i.state.operation=e,new b.CacheRequest({method:b.RequestMethod.PUT,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,body:i,timeout:r.timeout}).execute()})})).then(function(){return!0===o?n[0]:n})}},{key:"pull",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e||e instanceof k.default?this.count(e).then(function(n){return n>0?t.push(e).then(function(){return t.count(e)}):n}).then(function(r){if(r>0)throw new g.SyncError("Unable to pull data from the network. There are "+r+" entities that need to be synced before data is loaded from the network.");var o={method:b.RequestMethod.GET,authType:b.AuthType.Default,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname}),properties:n.properties,query:e,timeout:n.timeout,client:t.client},i=new b.KinveyRequest(o);return!0===n.useDeltaFetch&&(i=new b.DeltaFetchRequest(o)),i.execute()}).then(function(e){return e.data}):u.default.reject(new g.SyncError("Invalid query. It must be an instance of the Query class."))}},{key:"push",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;return!0===P.get(this.collection)?u.default.reject(new g.SyncError("Data is already being pushed to the backend. Please wait for it to complete before pushing new data to the backend.")):(P.set(this.collection,!0),this.find(e).then(function(e){if(e.length>0){return function o(i){return new u.default(function(a){var s=e.slice(r,r+100);return r+=100,u.default.all((0,c.default)(s,function(e){var r=e.entityId,o=e.state,i=void 0===o?{}:o,a=i.operation||i.method;if(a===T.Delete){return new b.KinveyRequest({method:b.RequestMethod.DELETE,authType:b.AuthType.Default,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+r}),properties:n.properties,timeout:n.timeout,client:t.client}).execute().then(function(){return new b.CacheRequest({method:b.RequestMethod.DELETE,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,timeout:n.timeout}).execute()}).then(function(){return{_id:r,operation:a}}).catch(function(e){return{_id:r,operation:a,error:e}})}if(a===T.Create||a===T.Update){var u=!1;return new b.CacheRequest({method:b.RequestMethod.GET,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+r}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(o){var i=new b.KinveyRequest({method:b.RequestMethod.PUT,authType:b.AuthType.Default,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+r}),properties:n.properties,timeout:n.timeout,body:o,client:t.client});return a===T.Create&&((0,w.isDefined)(o._kmd)&&!0===o._kmd.local&&(u=!0,delete o._id),i.method=b.RequestMethod.POST,i.url=m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname})),i.execute().then(function(e){return e.data}).then(function(o){return new b.CacheRequest({method:b.RequestMethod.DELETE,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,timeout:n.timeout}).execute().then(function(){return new b.CacheRequest({method:b.RequestMethod.PUT,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+o._id}),properties:n.properties,timeout:n.timeout,body:o}).execute().then(function(e){return e.data})}).then(function(e){return u?new b.CacheRequest({method:b.RequestMethod.DELETE,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+r}),properties:n.properties,timeout:n.timeout}).execute().then(function(){return e}):e}).then(function(e){return{_id:r,operation:a,entity:e}})}).catch(function(e){return o._id=r,{_id:r,operation:a,entity:o,error:e}})}).catch(function(e){return{_id:r,operation:a,entity:void 0,error:e}})}return{_id:r,operation:a,entity:void 0,error:new g.SyncError("Unable to sync the entity since the operation was not recognized.",e)}})).then(function(t){return i=i.concat(t),a(r<e.length?o(i):i)})})}([])}return[]}).then(function(e){return P.set(t.collection,!1),e}).catch(function(e){throw P.set(t.collection,!1),e}))}},{key:"clear",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.find(e,n).then(function(e){return u.default.all((0,c.default)(e,function(e){return new b.CacheRequest({method:b.RequestMethod.DELETE,url:m.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data})}))})}},{key:"pathname",get:function(){return"/"+j+"/"+this.client.appKey+"/"+x}},{key:"backendPathname",get:function(){return"/"+j+"/"+this.client.appKey+"/"+this.collection}}]),e}();t.default=S}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DataStoreType=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(228),u=r(a),s=n(270),c=r(s),l=n(234),f=n(2),p=n(41),h=n(269),d=r(h),y=n(345),v=r(y),m=n(67),b=r(m),g=n(348),w=r(g),_=e&&e.env&&e.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",O={Cache:"Cache",Network:"Network",Sync:"Sync"};Object.freeze(O),t.DataStoreType=O;var E=function(){function e(){throw o(this,e),new f.KinveyError("Not allowed to construct a DataStore instance. Please use the collection() function to get an instance of a DataStore instance.")}return i(e,null,[{key:"collection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.Cache,n=arguments[2],r=void 0;if(!1===(0,p.isDefined)(e)||!1===(0,c.default)(e))throw new f.KinveyError("A collection is required and must be a string.");switch(t){case O.Network:r=new v.default(e,n);break;case O.Sync:r=new w.default(e,n);break;case O.Cache:default:r=new b.default(e,n)}return r}},{key:"getInstance",value:function(e,t,n){return this.collection(e,t,n)}},{key:"clearCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client||d.default.sharedInstance(),n="/"+_+"/"+t.appKey;return new l.CacheRequest({method:l.RequestMethod.DELETE,url:u.default.format({protocol:t.apiProtocol,host:t.apiHost,pathname:n}),properties:e.properties,timeout:e.timeout}).execute().then(function(e){return e.data})}}]),e}();t.default=E}).call(t,n(47))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(228),c=r(s),l=n(234),f=n(2),p=n(272),h=r(p),d=n(283),y=r(d),v=n(41),m=n(67),b=r(m),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"find",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(r){return!e||e instanceof h.default?new l.CacheRequest({method:l.RequestMethod.GET,url:c.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new f.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"findById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(r){try{if(!1===(0,v.isDefined)(e))return r.next(void 0),r.complete();return new l.CacheRequest({method:l.RequestMethod.GET,url:c.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}catch(e){return r.error(e)}})}},{key:"group",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(r){return e instanceof y.default?new l.CacheRequest({method:l.RequestMethod.POST,url:c.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_group"}),properties:n.properties,aggregation:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new f.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(r){try{if(e&&!(e instanceof h.default))throw new f.KinveyError("Invalid query. It must be an instance of the Query class.");return new l.CacheRequest({method:l.RequestMethod.GET,url:c.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e?e.length:0)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}catch(e){return r.error(e)}})}},{key:"syncAutomatically",get:function(){return!1}}]),t}(b.default);t.default=g},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return Math.floor(Math.random()*(t-e))+e}function s(e,t){var n=e?parseInt(e.split("-")[1],10)+1:0;return n>=t?t-1:n}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(46),f=r(l),p=n(228),h=r(p),d=n(226),y=r(d),v=n(203),m=r(v),b=n(78),g=r(b),w=n(271),_=r(w),O=n(234),E=n(2),k=n(41),j=n(272),x=r(j),P=n(345),T=r(P),S=e&&e.env&&e.env.KINVEY_FILES_NAMESPACE||"blob"||"blob",A=e&&e.env&&e.env.KINVEY_MAX_BACKOFF||"32000"||32e3,R=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"find",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,m.default)({tls:!0},n);var r={tls:!0===n.tls};return(0,_.default)(n.ttl)&&(r.ttl_in_seconds=parseInt(n.ttl,10)),k.KinveyObservable.create(function(o){return!(0,k.isDefined)(e)||e instanceof x.default?new O.KinveyRequest({method:O.RequestMethod.GET,authType:O.AuthType.Default,url:h.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname,query:r}),properties:n.properties,query:e,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)}):o.error(new E.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise().then(function(e){return!0===n.download?f.default.all((0,y.default)(e,function(e){return t.downloadByUrl(e._downloadURL,n)})):e})}},{key:"findById",value:function(e,t){return this.download(e,t)}},{key:"download",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,m.default)({tls:!0},n);var r={tls:!0===n.tls};return(0,_.default)(n.ttl)&&(r.ttl_in_seconds=parseInt(n.ttl,10)),k.KinveyObservable.create(function(o){return!1===(0,k.isDefined)(e)?(o.next(void 0),o.complete()):new O.KinveyRequest({method:O.RequestMethod.GET,authType:O.AuthType.Default,url:h.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e,query:r}),properties:n.properties,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})}).toPromise().then(function(e){return!0===n.stream?e:(n.mimeType=e.mimeType,t.downloadByUrl(e._downloadURL,n))})}},{key:"downloadByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new O.NetworkRequest({method:O.RequestMethod.GET,url:e,timeout:t.timeout}).execute().then(function(e){return e.data})}},{key:"stream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.stream=!0,this.download(e,t)}},{key:"upload",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=(0,m.default)({filename:e._filename||e.name,public:!1,size:e.size||e.length,mimeType:e.mimeType||e.type||"application/octet-stream"},n),n._filename=n.filename,delete n.filename,n._public=n.public,delete n.public;var o=new O.KinveyRequest({method:O.RequestMethod.POST,authType:O.AuthType.Default,url:h.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:r.properties,timeout:r.timeout,body:n,client:this.client});return o.headers.set("X-Kinvey-Content-Type",n.mimeType),n._id&&(o.method=O.RequestMethod.PUT,o.url=h.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/"+n._id})),o.execute().then(function(e){return e.data}).then(function(o){var i=o._uploadURL,a=new O.Headers(o._requiredHeaders);a.set("content-type",n.mimeType),delete o._expiresAt,delete o._requiredHeaders,delete o._uploadURL;var u=new O.NetworkRequest({method:O.RequestMethod.PUT,url:i,timeout:r.timeout});return u.headers.addAll(a.toPlainObject()),u.headers.set("Content-Range","bytes */"+n.size),u.execute(!0).then(function(o){if(k.Log.debug("File upload status check response",o),!1===o.isSuccess())throw o.error;return 308!==o.statusCode?e:(r.start=s(o.headers.get("range"),n.size),t.uploadToGCS(i,a,e,n,r))}).then(function(e){return o._data=e,o})})}},{key:"uploadToGCS",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};i=(0,m.default)({count:0,start:0,maxBackoff:A},i),k.Log.debug("Start file upload"),k.Log.debug("File upload upload url",e),k.Log.debug("File upload headers",t.toPlainObject()),k.Log.debug("File upload file",n),k.Log.debug("File upload metadata",r),k.Log.debug("File upload options",i);var a=new O.NetworkRequest({method:O.RequestMethod.PUT,url:e,body:(0,g.default)(n.slice)?n.slice(i.start):n,timeout:i.timeout});return a.headers.addAll(t.toPlainObject()),a.headers.set("Content-Range","bytes "+i.start+"-"+(r.size-1)+"/"+r.size),a.execute(!0).then(function(a){if(k.Log.debug("File upload response",a),308===a.statusCode)return k.Log.debug("File upload was incomplete. The server responded with a status code 308. Trying to upload the remaining portion of the file."),i.start=s(a.headers.get("range"),r.size),o.uploadToGCS(e,t,n,r,i);if(a.statusCode>=500&&a.statusCode<600){k.Log.debug("File upload error.",a.statusCode,a.data);var c=Math.pow(2,i.count)+u(1e3,1);if(c>=i.maxBackoff)throw a.error;return k.Log.debug("File upload will try again in "+c+" seconds."),new f.default(function(a){setTimeout(function(){i.count+=1,a(o.uploadToGCS(e,t,n,r,i))},c)})}if(!1===a.isSuccess())throw a.error;return n})}},{key:"create",value:function(e,t,n){return this.upload(e,t,n)}},{key:"update",value:function(e,t,n){return this.upload(e,t,n)}},{key:"remove",value:function(){throw new E.KinveyError("Please use removeById() to remove files one by one.")}},{key:"pathname",get:function(){return"/"+S+"/"+this.client.appKey}}]),t}(T.default);t.default=R}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(46),l=r(c),f=n(126),p=r(f),h=n(270),d=r(h),y=n(228),v=r(y),m=n(234),b=n(2),g=n(41),w=n(272),_=r(w),O=n(345),E=r(O),k=e&&e.env&&e.env.KINVEY_USERS_NAMESPACE||"user"||"user",j=e&&e.env&&e.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc",x=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e))}return a(t,e),u(t,[{key:"lookup",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.KinveyObservable.create(function(r){return!(0,g.isDefined)(e)||e instanceof _.default?new m.KinveyRequest({method:m.RequestMethod.POST,authType:m.AuthType.Default,url:v.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_lookup"}),properties:n.properties,body:(0,g.isDefined)(e)?e.toPlainObject().filter:null,timeout:n.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)}):r.error(new b.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"create",value:function(){return l.default.reject(new b.KinveyError("Please use `User.signup()` to create a user."))}},{key:"update",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(0,p.default)(e)?l.default.reject(new b.KinveyError("Only one user can be updated at one time.",e)):e._id?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n):l.default.reject(new b.KinveyError("User must have an _id.")):l.default.reject(new b.KinveyError("No user was provided to be updated."))}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new m.KinveyRequest({method:m.RequestMethod.POST,authType:m.AuthType.App,url:v.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:"/"+j+"/"+this.client.appKey+"/check-username-exists"}),properties:t.properties,data:{username:e},timeout:t.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(){return!0===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).usernameExists})}},{key:"removeById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.KinveyObservable.create(function(r){return!1===(0,g.isDefined)(e)?r.error(new b.KinveyError("An id was not provided.","Please provide a valid id for a user that you would like to remove.")):!1===(0,d.default)(e)?r.error(new b.KinveyError("The id provided is not a string.","Please provide a valid id for a user that you would like to remove.")):new m.KinveyRequest({method:m.RequestMethod.DELETE,authType:m.AuthType.Default,url:v.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e,query:!0===n.hard?{hard:!0}:void 0}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(e){return r.next(e)}).then(function(){return r.complete()}).catch(function(e){return r.error(e)})}).toPromise()}},{key:"pathname",get:function(){return"/"+k+"/"+this.client.appKey}}]),t}(E.default);t.default=x}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(228),c=r(s),l=n(270),f=r(l),p=n(2),h=n(269),d=r(h),y=n(234),v=e&&e.env&&e.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc",m=function(){function e(){throw o(this,e),new p.KinveyError("Not allowed to create an instance of the `CustomEndpoint` class.","Please use `CustomEndpoint.execute()` function.")}return i(e,null,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.client||d.default.sharedInstance();return e?(0,f.default)(e)?new y.KinveyRequest({method:y.RequestMethod.POST,authType:y.AuthType.Default,url:c.default.format({protocol:r.apiProtocol,host:r.apiHost,pathname:"/"+v+"/"+r.appKey+"/custom/"+e}),properties:n.properties,body:t,timeout:n.timeout,client:r}).execute().then(function(e){return e.data}):u.default.reject(new p.KinveyError("The endpoint argument must be a string.")):u.default.reject(new p.KinveyError("An endpoint argument is required."))}}]),e}();t.default=m}).call(t,n(47))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(228),c=r(s),l=n(2),f=n(41),p=n(269),h=r(p),d=n(351),y=r(d),v=n(272),m=r(v),b=n(283),g=r(b),w=n(66),_=r(w),O=n(341),E=n(327),k=n(234),j=e&&e.env&&e.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",x=function(){function e(){o(this,e)}return i(e,null,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.appKey?e.appSecret||e.masterSecret?h.default.initialize(e).then(function(){return O.User.getActiveUser()}):u.default.reject(new l.KinveyError("No App Secret or Master Secret was provided. Unable to create a new Client without an App Key.")):u.default.reject(new l.KinveyError("No App Key was provided. Unable to create a new Client without an App Key."))}},{key:"ping",
value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.sharedInstance();return new k.KinveyRequest({method:k.RequestMethod.GET,authType:k.AuthType.All,url:c.default.format({protocol:e.apiProtocol,host:e.apiHost,pathname:j+"/"+e.appKey})}).execute().then(function(e){return e.data})}},{key:"client",get:function(){return h.default.sharedInstance()}},{key:"appVersion",get:function(){return this.client.appVersion},set:function(e){this.client.appVersion=e}}]),e}();x.Acl=O.Acl,x.Aggregation=g.default,x.AuthorizationGrant=E.AuthorizationGrant,x.CustomEndpoint=y.default,x.DataStore=_.default,x.DataStoreType=w.DataStoreType,x.Files=new w.FileStore,x.Group=g.default,x.Log=f.Log,x.Metadata=O.Metadata,x.Query=m.default,x.SyncOperation=w.SyncOperation,x.User=O.User,x.ActiveUserError=l.ActiveUserError,x.APIVersionNotAvailableError=l.APIVersionNotAvailableError,x.APIVersionNotImplementedError=l.APIVersionNotImplementedError,x.AppProblemError=l.AppProblemError,x.BadRequestError=l.BadRequestError,x.BLError=l.BLError,x.CORSDisabledError=l.CORSDisabledError,x.DuplicateEndUsersError=l.DuplicateEndUsersError,x.FeatureUnavailableError=l.FeatureUnavailableError,x.IncompleteRequestBodyError=l.IncompleteRequestBodyError,x.IndirectCollectionAccessDisallowedError=l.IndirectCollectionAccessDisallowedError,x.InsufficientCredentialsError=l.InsufficientCredentialsError,x.InvalidCredentialsError=l.InvalidCredentialsError,x.InvalidIdentifierError=l.InvalidIdentifierError,x.InvalidQuerySyntaxError=l.InvalidQuerySyntaxError,x.JSONParseError=l.JSONParseError,x.KinveyError=l.KinveyError,x.KinveyInternalErrorRetry=l.KinveyInternalErrorRetry,x.KinveyInternalErrorStop=l.KinveyInternalErrorStop,x.MissingQueryError=l.MissingQueryError,x.MissingRequestHeaderError=l.MissingRequestHeaderError,x.MissingRequestParameterError=l.MissingRequestParameterError,x.MobileIdentityConnectError=l.MobileIdentityConnectError,x.NoActiveUserError=l.NoActiveUserError,x.NetworkConnectionError=l.NetworkConnectionError,x.NoResponseError=l.NoResponseError,x.NotFoundError=l.NotFoundError,x.ParameterValueOutOfRangeError=l.ParameterValueOutOfRangeError,x.PopupError=l.PopupError,x.QueryError=l.QueryError,x.ServerError=l.ServerError,x.StaleRequestError=l.StaleRequestError,x.SyncError=l.SyncError,x.TimeoutError=l.TimeoutError,x.UserAlreadyExistsError=l.UserAlreadyExistsError,x.WritesToCollectionDisallowedError=l.WritesToCollectionDisallowedError,x.CacheRack=k.CacheRack,x.NetworkRack=k.NetworkRack,x.Rack=k.Rack,t.default=x}).call(t,n(47))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o),a=n(354),u=n(374),s=r(u);o.CacheRack.useCacheMiddleware(new a.CacheMiddleware),o.NetworkRack.useHttpMiddleware(new a.HttpMiddleware),o.User.usePopupClass(s.default),e.exports=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMiddleware=t.CacheMiddleware=void 0;var o=n(355),i=r(o),a=n(365),u=r(a);t.CacheMiddleware=i.default,t.HttpMiddleware=u.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=n(356),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"loadStorage",value:function(e){return new c.default(e)}}]),t}(u.CacheMiddleware);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(1),l=n(302),f=r(l),p=n(357),h=r(p),d=n(358),y=r(d),v=n(359),m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"loadAdapter",value:function(){var e=this;return y.default.load(this.name).then(function(t){return!1===(0,c.isDefined)(t)?h.default.load(e.name):t}).then(function(t){return!1===(0,c.isDefined)(t)?v.LocalStorage.load(e.name):t}).then(function(n){return!1===(0,c.isDefined)(n)?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadAdapter",e).call(e):n})}}]),t}(f.default);t.default=m},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(1),c=n(277),l=r(c),f=n(270),p=r(f),h=n(126),d=r(h),y=n(78),v=r(y),m={},b=void 0,g={ReadWrite:"readwrite",ReadOnly:"readonly"};Object.freeze(g);var w=function(){function t(e){if(o(this,t),!1===(0,s.isDefined)(e))throw new Error("A name is required to use the IndexedDB adapter.",e);if(!1===(0,p.default)(e))throw new Error("The name must be a string to use the IndexedDB adapter",e);this.name=e,this.inTransaction=!1,this.queue=[]}return i(t,[{key:"openTransaction",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],o=this,i=arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,c=m[this.name];if((0,s.isDefined)(c)){if((0,v.default)(c.objectStoreNames.contains)?c.objectStoreNames.contains(t):-1!==c.objectStoreNames.indexOf(t))try{var f=n?g.ReadWrite:g.ReadOnly,p=c.transaction(t,f);if((0,s.isDefined)(p))return r(p);throw new Error("Unable to open a transaction for "+t+" collection on the "+this.name+" IndexedDB database.")}catch(e){return i(e)}else if(!1===n)return i(new s.NotFoundError("The "+t+" collection was not found on the "+this.name+" IndexedDB database."))}if(!1===a&&this.inTransaction)return this.queue.push(function(){o.openTransaction(t,n,r,i)});this.inTransaction=!0;var h=void 0;try{if((0,s.isDefined)(c)){var d=c.version+1;c.close(),h=u.open(this.name,d)}else h=u.open(this.name)}catch(e){i(e)}return h.onupgradeneeded=function(e){c=e.target.result,m[o.name]=c,!0===n&&c.createObjectStore(t,{keyPath:"_id"})},h.onsuccess=function(e){c=e.target.result,m[o.name]=c,c.onversionchange=function(){(0,s.isDefined)(c)&&(c.close(),c=null,m[o.name]=null)};var a=function(e){return function(t){if(e(t),o.inTransaction=!1,o.queue.length>0){var n=o.queue;o.queue=[],(0,l.default)(n,function(e){e.call(o)})}}};return o.openTransaction(t,n,a(r),a(i),!0)},h.onblocked=function(){},h.onerror=function(e){i(new Error("Unable to open the "+o.name+" IndexedDB database. "+e.target.error.message+"."))},h}},{key:"close",value:function(){var e=m[this.name];(0,s.isDefined)(e)&&e.close()}},{key:"find",value:function(e){var t=this;return new u.default(function(n,r){t.openTransaction(e,!1,function(t){var o=t.objectStore(e),i=o.openCursor(),a=[];i.onsuccess=function(e){var t=e.target.result;return(0,s.isDefined)(t)?(a.push(t.value),t.continue()):n(a)},i.onerror=function(e){r(e)}},r)})}},{key:"findById",value:function(e,t){var n=this;return new u.default(function(r,o){n.openTransaction(e,!1,function(i){var a=i.objectStore(e),u=a.get(t);u.onsuccess=function(i){var a=i.target.result;(0,s.isDefined)(a)?r(a):o(new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" IndexedDB database."))},u.onerror=function(){o(new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" IndexedDB database."))}},o)})}},{key:"save",value:function(e,t){var n=this,r=!1;return(0,d.default)(t)||(r=!0,t=[t]),0===t.length?u.default.resolve(null):new u.default(function(o,i){n.openTransaction(e,!0,function(a){var u=a.objectStore(e);(0,l.default)(t,function(e){u.put(e)}),a.oncomplete=function(){o(r?t[0]:t)},a.onerror=function(t){i(new Error("An error occurred while saving the entities to the "+e+" collection on the "+n.name+" IndexedDB database. "+t.target.error.message+"."))}},i)})}},{key:"removeById",value:function(e,t){var n=this;return new u.default(function(r,o){n.openTransaction(e,!0,function(i){var a=i.objectStore(e),u=a.get(t);a.delete(t),i.oncomplete=function(){var i=u.result;(0,s.isDefined)(i)?r({count:1}):o(new s.NotFoundError("An entity with id = "+t+" was not found in the "+e+" collection on the "+n.name+" IndexedDB database."))},i.onerror=function(){o(new s.NotFoundError("An entity with id = "+t+" was not found in the "+e+" collection on the "+n.name+" IndexedDB database."))}},o)})}},{key:"clear",value:function(){var t=this;return this.close(),new u.default(function(n,r){var o=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,i=o.deleteDatabase(t.name);i.onsuccess=function(){m={},n()},i.onerror=function(e){r(new Error("An error occurred while clearing the "+t.name+" IndexedDB database. "+e.target.error.message+"."))},i.onblocked=function(){r(new Error("The "+t.name+" IndexedDB database could not be cleared due to the operation being blocked."))}})}}]),t}();t.default={load:function(t){var n=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,r=new w(t);return!1===(0,s.isDefined)(n)?u.default.resolve(void 0):(0,s.isDefined)(b)?b?u.default.resolve(r):u.default.resolve(void 0):r.save("__testSupport",{_id:"1"}).then(function(){return b=!0,r}).catch(function(){b=!1})}}}).call(t,function(){return this}())},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(46),s=o(u),c=n(1),l=n(226),f=o(l),p=n(277),h=o(p),d=n(126),y=o(d),v=n(78),m=o(v),b=n(270),g=o(b),w=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",_={},O=void 0,E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kinvey";if(i(this,e),!1===(0,c.isDefined)(t))throw new Error("A name is required to use the WebSQL adapter.",t);if(!1===(0,g.default)(t))throw new Error("The name must be a string to use the WebSQL adapter",t);this.name=t}return a(e,[{key:"openDatabase",value:function(){var e=_[this.name];return!1===(0,c.isDefined)(e)&&(e=r.openDatabase(this.name,1,"Kinvey Cache",5e6),_[this.name]=e),e}},{key:"openTransaction",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.openDatabase(),a='"'+e+'"',u="sqlite_master"===e,l=(0,y.default)(t);return t=l?t:[[t,n]],new s.default(function(n,s){var f=o||!1===(0,m.default)(i.readTransaction);i[f?"transaction":"readTransaction"](function(e){o&&!1===u&&e.executeSql("CREATE TABLE IF NOT EXISTS "+a+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");var r=t.length,i=[];0===r?n(l?i:i.shift()):(0,h.default)(t,function(t){var o=t[0].replace("#{collection}",a);e.executeSql(o,t[1],function(e,t){var o={rowCount:t.rowsAffected,result:[]};if(t.rows.length>0)for(var a=0,s=t.rows.length;a<s;a+=1)try{var c=t.rows.item(a).value,f=u?c:JSON.parse(c);o.result.push(f)}catch(e){}i.push(o),0===(r-=1)&&n(l?i:i.shift())})})},function(t){if((t=(0,g.default)(t)?t:t.message)&&-1===t.indexOf("no such table"))return s(new c.NotFoundError("The "+e+" collection was not found on the "+r.name+" WebSQL database."));var n=["table",e];return r.openTransaction("sqlite_master","SELECT name AS value from #{collection} WHERE type = ? AND name = ?",n).then(function(t){return s(0===t.result.length?new c.NotFoundError("The "+e+" collection was not found on the "+r.name+" WebSQL database."):new Error("Unable to open a transaction for the "+e+" collection on the "+r.name+" WebSQL database."))}).catch(function(t){s(new Error("Unable to open a transaction for the "+e+" collection on the "+r.name+" WebSQL database.",t))})})})}},{key:"find",value:function(e){return this.openTransaction(e,"SELECT value FROM #{collection}",[]).then(function(e){return e.result})}},{key:"findById",value:function(e,t){var n=this;return this.openTransaction(e,"SELECT value FROM #{collection} WHERE key = ?",[t]).then(function(e){return e.result}).then(function(r){if(0===r.length)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" WebSQL database.");return r[0]})}},{key:"save",value:function(e,t){var n=[],r=!1;return(0,y.default)(t)||(r=!0,t=[t]),0===t.length?s.default.resolve(null):(t=(0,f.default)(t,function(e){return n.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e[w],JSON.stringify(e)]]),e}),this.openTransaction(e,n,null,!0).then(function(){return r?t[0]:t}))}},{key:"removeById",value:function(e,t){var n=this,r=[["SELECT value FROM #{collection} WHERE key = ?",[t]],["DELETE FROM #{collection} WHERE key = ?",[t]]];return this.openTransaction(e,r,null,!0).then(function(r){var o=r[0].result,i=r[1].rowCount;if(0===(i=i||o.length))throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" WebSQL database.");return{count:i}})}},{key:"clear",value:function(){var e=this;return this.openTransaction("sqlite_master","SELECT name AS value FROM #{collection} WHERE type = ?",["table"],!1).then(function(e){return e.result}).then(function(t){if(0===t.length)return null;var n=t.filter(function(e){return/^[a-zA-Z0-9-]{1,128}/.test(e)}).map(function(e){return["DROP TABLE IF EXISTS '"+e+"'"]});return e.openTransaction("sqlite_master",n,null,!0)}).then(function(){return _={},null})}}]),e}();t.default={load:function(e){var t=new E(e);return!1===(0,c.isDefined)(r.openDatabase)?s.default.resolve(void 0):(0,c.isDefined)(O)?O?s.default.resolve(t):s.default.resolve(void 0):t.save("__testSupport",{_id:"1"}).then(function(){return O=!0,t}).catch(function(){O=!1})}}}).call(t,n(47),function(){return this}())},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStorage=t.SessionStorage=t.LocalStorage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(46),l=o(c),f=n(1),p=n(209),h=o(p),d=n(360),y=o(d),v=n(296),m=o(v),b=n(277),g=o(b),w=n(310),_=o(w),O=n(308),E=o(O),k=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kinvey";u(this,e),this.name=t}return s(e,[{key:"masterCollectionName",get:function(){return this.name+"master"}}]),e}();t.default=j;var x=t.LocalStorage=function(e){function t(e){u(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=r.localStorage.getItem(n.masterCollectionName);return!1===(0,f.isDefined)(o)&&r.localStorage.setItem(n.masterCollectionName,JSON.stringify([])),n}return a(t,e),s(t,[{key:"_find",value:function(e){try{var t=r.localStorage.getItem(e);return(0,f.isDefined)(t)?l.default.resolve(JSON.parse(t)):l.default.resolve(t||[])}catch(e){return l.default.reject(e)}}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,E.default)(r,function(e){return e[k]===t});if(!1===(0,f.isDefined)(o))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var n=this;return this._find(this.masterCollectionName).then(function(t){return-1===(0,_.default)(t,e)&&(t.push(e),r.localStorage.setItem(n.masterCollectionName,JSON.stringify(t))),n.find(e)}).then(function(o){var i=(0,h.default)(o,k),a=(0,h.default)(t,k),u=Object.keys(i);return(0,g.default)(u,function(e){var t=i[e],n=a[e];(0,f.isDefined)(n)&&(a[e]=(0,y.default)(t,n))}),r.localStorage.setItem(""+n.name+e,JSON.stringify((0,m.default)(a))),t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,h.default)(r,k),i=o[t];if(!1===(0,f.isDefined)(i))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" memory database.");return delete o[t],n.save(e,(0,m.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){return(0,g.default)(t,function(t){r.localStorage.removeItem(""+e.name+t)}),r.localStorage.removeItem(e.masterCollectionName),null})}}],[{key:"load",value:function(e){if(r.localStorage){var n="__testSupport";try{return r.localStorage.setItem(n,n),r.localStorage.getItem(n),r.localStorage.removeItem(n),l.default.resolve(new t(e))}catch(e){return l.default.resolve(void 0)}}return l.default.resolve(void 0)}}]),t}(j);t.SessionStorage=function(e){function t(e){u(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=r.localStorage.getItem(n.masterCollectionName);return!1===(0,f.isDefined)(o)&&r.localStorage.setItem(n.masterCollectionName,JSON.stringify([])),n}return a(t,e),s(t,[{key:"_find",value:function(e){try{var t=r.localStorage.getItem(e);return(0,f.isDefined)(t)?l.default.resolve(JSON.parse(t)):l.default.resolve(t||[])}catch(e){return l.default.reject(e)}}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,E.default)(r,function(e){return e[k]===t});if(!1===(0,f.isDefined)(o))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var n=this;return this._find(this.masterCollectionName).then(function(t){return-1===(0,_.default)(t,e)&&(t.push(e),r.sessionStorage.setItem(n.masterCollectionName,JSON.stringify(t))),n.find(e)}).then(function(o){var i=(0,h.default)(o,k),a=(0,h.default)(t,k),u=Object.keys(i);return(0,g.default)(u,function(e){var t=i[e],n=a[e];(0,f.isDefined)(n)&&(a[e]=(0,y.default)(t,n))}),r.sessionStorage.setItem(""+n.name+e,JSON.stringify((0,m.default)(a))),t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,h.default)(r,k),i=o[t];if(!1===(0,f.isDefined)(i))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" memory database.");return delete o[t],n.save(e,(0,m.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){return(0,g.default)(t,function(t){r.sessionStorage.removeItem(""+e.name+t)}),r.sessionStorage.removeItem(e.masterCollectionName),null})}}],[{key:"load",value:function(e){if(r.sessionStorage){var t="__testSupport";try{return r.sessionStorage.setItem(t,t),r.sessionStorage.getItem(t),r.sessionStorage.removeItem(t),l.default.resolve(new x(e))}catch(e){return l.default.resolve(void 0)}}return l.default.resolve(void 0)}}]),t}(j),t.CookieStorage=function(e){function t(e){u(this,t);for(var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=document.cookie.split(";"),a=0,s=o.length;a<s;a+=1){for(var c=o[a];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(n.masterCollectionName)){var l=decodeURIComponent(c.substring(n.masterCollectionName.length,c.length));if(!1===(0,f.isDefined)(l)){var p=new Date;p.setTime(p.getTime()+31536e8),r.document.cookie=n.masterCollectionName+"="+encodeURIComponent(JSON.stringify([]))+"; expires="+p.toUTCString()+"; path=/"}}}return n}return a(t,e),s(t,[{key:"_find",value:function(e){for(var t=document.cookie.split(";"),n=0,r=t.length;n<r;n+=1){for(var o=t[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return l.default.resolve(JSON.parse(decodeURIComponent(o.substring(e.length,o.length))))}return l.default.resolve([])}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,E.default)(r,function(e){return e[k]===t});if(!1===(0,f.isDefined)(o))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var n=this;return this._find(this.masterCollectionName).then(function(t){if(-1===(0,_.default)(t,e)){t.push(e);var o=new Date;o.setTime(o.getTime()+31536e8),r.document.cookie=n.masterCollectionName+"="+encodeURIComponent(JSON.stringify(t))+"; expires="+o.toUTCString()+"; path=/"}return n.find(e)}).then(function(o){var i=(0,h.default)(o,k),a=(0,h.default)(t,k),u=Object.keys(i);(0,g.default)(u,function(e){var t=i[e],n=a[e];(0,f.isDefined)(n)&&(a[e]=(0,y.default)(t,n))});var s=new Date;return s.setTime(s.getTime()+31536e8),r.document.cookie=""+n.name+e+"="+encodeURIComponent(JSON.stringify((0,m.default)(a)))+"; expires="+s.toUTCString()+"; path=/",t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,h.default)(r,k),i=o[t];if(!1===(0,f.isDefined)(i))throw new f.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" memory database.");return delete o[t],n.save(e,(0,m.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){(0,g.default)(t,function(t){var n=new Date;n.setTime(n.getTime()+31536e8),r.document.cookie=""+e.name+t+"="+encodeURIComponent()+"; expires="+n.toUTCString()+"; path=/"});var n=new Date;return n.setTime(n.getTime()+31536e8),r.document.cookie=e.masterCollectionName+"="+encodeURIComponent()+"; expires="+n.toUTCString()+"; path=/",null})}}],[{key:"load",value:function(e){return void 0===r.document.cookie?l.default.resolve(void 0):l.default.resolve(new t(e))}}]),t}(j)}).call(t,n(47),function(){return this}())},function(e,t,n){var r=n(361),o=n(207),i=o(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){function r(e,t,n,l,f){e!==t&&a(t,function(a,c){if(s(a))f||(f=new o),u(e,t,c,n,r,l,f);else{var p=l?l(e[c],a,c+"",e,t,f):void 0;void 0===p&&(p=a),i(e,c,p)}},c)}var o=n(130),i=n(362),a=n(215),u=n(363),s=n(85),c=n(246);e.exports=r},function(e,t,n){function r(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(205),i=n(98);e.exports=r},function(e,t,n){function r(e,t,n,r,b,g,w){var _=e[n],O=t[n],E=w.get(O);if(E)return void o(e,n,E);var k=g?g(_,O,n+"",e,t,w):void 0,j=void 0===k;if(j){var x=l(O),P=!x&&p(O),T=!x&&!P&&v(O);k=O,x||P||T?l(_)?k=_:f(_)?k=u(_):P?(j=!1,k=i(O,!0)):T?(j=!1,k=a(O,!0)):k=[]:y(O)||c(O)?(k=_,c(_)?k=m(_):(!d(_)||r&&h(_))&&(k=s(O))):j=!1}j&&(w.set(O,k),b(k,O,r,g,w),w.delete(O)),o(e,n,k)}var o=n(362),i=n(249),a=n(266),u=n(250),s=n(267),c=n(123),l=n(126),f=n(201),p=n(153),h=n(78),d=n(85),y=n(294),v=n(157),m=n(364);e.exports=r},function(e,t,n){function r(e){return o(e,i(e))}var o=n(206),i=n(246);e.exports=r},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){e=e.toLowerCase();var t=/(chrome)\/([\w]+)/,n=/(firefox)\/([\w.]+)/,r=/(msie) ([\w.]+)/i,o=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(safari)\/([\w.]+)/;return t.exec(e)||n.exec(e)||r.exec(e)||o.exec(e)||i.exec(e)||[]}function s(){var t=[],n=void 0,r=void 0,o=void 0,i=void 0;null!==r&&void 0!==r||!e.navigator||(n=u(e.navigator.userAgent),r=n[1],o=n[2],i=e.navigator.platform),void 0!==e.angular&&t.push("angularjs/"+e.angular.version.full),void 0!==e.Backbone&&t.push("backbonejs/"+e.Backbone.VERSION),void 0!==e.Ember&&t.push("emberjs/"+e.Ember.VERSION),void 0!==e.jQuery&&t.push("jquery/"+e.jQuery.fn.jquery),void 0!==e.ko&&t.push("knockout/"+e.ko.version),void 0!==e.Zepto&&t.push("zeptojs");var a=["js-"+b.default.name+"/"+b.default.version];return 0!==t.length&&a.push("("+t.sort().join(", ")+")"),a.concat([r,o,i]).map(function(e){return e?e.toString().replace(/\s/g,"_").toLowerCase():"unknown"}).join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=n(366),p=r(f),h=n(46),d=r(h),y=n(78),v=r(y),m=n(373),b=r(m),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Middleware";return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),c(t,[{key:"handle",value:function(e){var t=this;return new d.default(function(n,r){var o=e.url,i=e.method,a=e.headers,u=e.body,s=e.timeout,c=e.followRedirect;a["X-Kinvey-Device-Information"]=t.deviceInformation,t.xhrRequest=(0,p.default)({method:i,url:o,headers:a,body:u,followRedirect:c,timeout:s},function(e,t,o){return(0,l.isDefined)(e)?r("ESOCKETTIMEDOUT"===e.code||"ETIMEDOUT"===e.code?new l.TimeoutError("The network request timed out."):new l.NetworkConnectionError("There was an error connecting to the network.",e)):n({response:{statusCode:t.statusCode,headers:t.headers,data:o}})})})}},{key:"cancel",value:function(){return(0,l.isDefined)(this.xhrRequest)&&(0,v.default)(this.xhrRequest.abort)&&this.xhrRequest.abort(),d.default.resolve()}},{key:"deviceInformation",get:function(){return s()}}]),t}(l.Middleware);t.default=g}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,n){var r=e;return l(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=p(t,{uri:e}),r.callback=n,r}function i(e,t,n){return t=o(e,t,n),a(t)}function a(e){function t(){4===l.readyState&&a()}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||u(l),w)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,_)}function a(){if(!h){var t;clearTimeout(d),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=_,o=null;return 0!==t?(r={body:n(),statusCode:t,method:v,headers:{},url:y,rawRequest:l},l.getAllResponseHeaders&&(r.headers=f(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),c(o,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var s=!1,c=function(t,n,r){s||(s=!0,e.callback(t,n,r))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var p,h,d,y=l.url=e.uri||e.url,v=l.method=e.method||"GET",m=e.body||e.data,b=l.headers=e.headers||{},g=!!e.sync,w=!1,_={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:l};if("json"in e&&!1!==e.json&&(w=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=o,l.onprogress=function(){},l.onabort=function(){h=!0},l.ontimeout=o,l.open(v,y,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(d=setTimeout(function(){if(!h){h=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),l.setRequestHeader)for(p in b)b.hasOwnProperty(p)&&l.setRequestHeader(p,b[p]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(m||null),l}function u(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function s(){}var c=n(367),l=n(368),f=n(369),p=n(372);e.exports=i,i.XMLHttpRequest=c.XMLHttpRequest||s,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,n,r){return n=o(t,n,r),n.method=e.toUpperCase(),a(n)}})},function(e,t){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,function(){return this}())},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n
;var r=Object.prototype.toString},function(e,t,n){var r=n(370),o=n(371),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));void 0===t[o]?t[o]=a:i(t[o])?t[o].push(a):t[o]=[t[o],a]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){function r(e,t,n){if(!u(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?o(e,t,n):"string"==typeof e?i(e,t,n):a(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;r<o;r++)c.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,o=e.length;r<o;r++)t.call(n,e.charAt(r),r,e)}function a(e,t,n){for(var r in e)c.call(e,r)&&t.call(n,e[r],r,e)}var u=n(368);e.exports=r;var s=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)r.call(n,o)&&(e[o]=n[o])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t){e.exports={_args:[[{raw:"kinvey-html5-sdk@3.5.0",scope:null,escapedName:"kinvey-html5-sdk",name:"kinvey-html5-sdk",rawSpec:"3.5.0",spec:"3.5.0",type:"version"},"/Users/Thomas/Documents/Kinvey/Development/SDKs/JavaScript/NativeScript/SDK"]],_from:"kinvey-html5-sdk@3.5.0",_id:"kinvey-html5-sdk@3.5.0",_inCache:!0,_location:"/kinvey-html5-sdk",_nodeVersion:"6.10.2",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/kinvey-html5-sdk-3.5.0.tgz_1492702122296_0.1853703400120139"},_npmUser:{name:"thomas.conner",email:"thomas.conner@me.com"},_npmVersion:"3.10.10",_phantomChildren:{},_requested:{raw:"kinvey-html5-sdk@3.5.0",scope:null,escapedName:"kinvey-html5-sdk",name:"kinvey-html5-sdk",rawSpec:"3.5.0",spec:"3.5.0",type:"version"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/kinvey-html5-sdk/-/kinvey-html5-sdk-3.5.0.tgz",_shasum:"24b2b2ac725eeaee0e25314450c1b3fd3bb1f0bd",_shrinkwrap:null,_spec:"kinvey-html5-sdk@3.5.0",_where:"/Users/Thomas/Documents/Kinvey/Development/SDKs/JavaScript/NativeScript/SDK",author:{name:"Kinvey"},bugs:{url:"https://github.com/Kinvey/html5-sdk/issues"},contributors:[{name:"Thomas Conner",email:"thomas@kinvey.com"}],dependencies:{"core-js":"2.4.1","es6-promise":"4.1.0","kinvey-js-sdk":"3.5.0",lodash:"4.17.4",xhr:"2.3.3"},description:"Kinvey JavaScript SDK for HTML5 applications.",devDependencies:{"babel-cli":"6.24.0","babel-core":"6.24.0","babel-eslint":"7.1.1","babel-plugin-inline-dotenv":"^1.1.1","babel-plugin-module-resolver":"2.5.0","babel-polyfill":"^6.9.0","babel-preset-es2015":"6.24.0","babel-preset-stage-2":"^6.0.15","babel-register":"6.24.0","browserstack-local":"^1.2.0","del-cli":"^0.2.0",eslint:"3.17.1","eslint-config-airbnb-base":"11.1.1","eslint-import-resolver-babel-module":"3.0.0","eslint-plugin-import":"2.2.0",expect:"^1.20.2","fs-extra":"2.1.1",istanbul:"1.1.0-alpha.1","json-loader":"^0.5.4",mocha:"3.2.0",nock:"9.0.9","regenerator-runtime":"0.10.3","selenium-standalone":"6.0.1",shelljs:"0.7.7","uglify-js":"2.8.12","wdio-mocha-framework":"0.5.9","wdio-spec-reporter":"0.1.0",webdriverio:"^4.4.0",webpack:"^1.13.0"},directories:{},dist:{shasum:"24b2b2ac725eeaee0e25314450c1b3fd3bb1f0bd",tarball:"https://registry.npmjs.org/kinvey-html5-sdk/-/kinvey-html5-sdk-3.5.0.tgz"},engines:{node:">=4.0"},gitHead:"349608c2e654387f4b4a65446f9b8afd0726f539",homepage:"http://www.kinvey.com",keywords:["Kinvey","JavaScript","HTML5"],license:"Apache-2.0",main:"./dist/index.js",maintainers:[{name:"kinvey",email:"opensource@kinvey.com"},{name:"thomas.conner",email:"thomas.conner@me.com"}],name:"kinvey-html5-sdk",optionalDependencies:{},peerDependencies:{"kinvey-js-sdk":"3.5.0"},readme:"# Kinvey HTML5 SDK [![Build Status](https://travis-ci.org/Kinvey/html5-sdk.svg?branch=master)](https://travis-ci.org/Kinvey/html5-sdk) [![Code Climate](https://codeclimate.com/github/Kinvey/html5-sdk/badges/gpa.svg)](https://codeclimate.com/github/Kinvey/html5-sdk)\n\n[Kinvey](http://www.kinvey.com) (pronounced Kin-vey, like convey) makes it ridiculously easy for developers to setup, use and operate a cloud backend for their mobile apps. They don't have to worry about connecting to various cloud services, setting up servers for their backend, or maintaining and scaling them.\n\nThis npm package makes it very easy to connect your HTML5 app with Kinvey.\n\n## How to use\n\n### 1. Sign up for Kinvey\nTo use the SDK, sign up for Kinvey if you have not already done so. Go to the [sign up](https://console.kinvey.com/#signup) page, and follow the steps provided.\n\n### 2. Install the SDK\nYou can install the module using npm:\n\n```bash\nnpm install kinvey-html5-sdk --save\n```\n\nor\n\nuse our [DevCenter Download Page](http://devcenter.kinvey.com/html5/downloads) to download the SDK and save it to a file name `kinvey-html5-sdk.js` in your project.\n\n### 3. Configure the SDK\nIf you installed the SDK with npm, include the sdk in your code using `require`.\n\n```javascript\nvar Kinvey = require('kinvey-html5-sdk');\n```\n\nIf you downloaded the SDK and saved it to a file, add a script tag to your main html file to load the SDK.\n\n```html\n<script src=\"path/to/kinvey-html5-sdk.min.js\"><\/script>\n```\n\nNext, use `Kinvey.initialize` to configure your app. Replace `<appKey>` and `<appSecret>` with your apps app key and secret. You can find these for your app using the [Kinvey Console App](https://console.kinvey.com).\n\n```javascript\nKinvey.initialize({\n    appKey: '<appKey>',\n    appSecret: '<appSecret>'\n})\n  .then(function(activeUser) {\n    // ...\n  });\n```\n\n## Whats next?\nYou are now ready to start building your awesome apps! Next we recommend diving into the [User guide](http://devcenter.kinvey.com/html5/guides/users) or [Data store guide](http://devcenter.kinvey.com/html5/guides/datastore) to learn more about our service, or explore the [sample apps](http://devcenter.kinvey.com/html5/samples) to go straight to working projects.\n\n## Build\nExecute `npm run build` to build the package.\n\n## Release\n[TravisCI](https://travis-ci.org/Kinvey/html5-sdk) will deploy the pacakge to [NPM](https://www.npmjs.com/package/kinvey-html5-sdk).\n\n1. Checkout the master branch.\n2. Update the CHANGELOG.md.\n3. Execute `npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease | from-git]`. See [Version Management](#version-management) for more info on incrementing the version.\n4. Done.\n\n### Version Management\nUpdating the package version should follow [Semantic Version 2.0.0](http://semver.org/):\n\n* Major (x.0.0): when making an incompatible API changes.\n* Minor (3.x.0): when adding functionality in a backwards-compatible manner.\n* Patch (3.0.x): when making backwards-compatible bug fixes or enhancements.\n\n## Test\n_Note: Before running any tests you will need to run `npm install` to install any dependencies required._\n\n### Unit Tests\nThe steps for running the unit tests is as follows:\n\n1. Open a terminal window and execute `npm test`.\n\n### End to End Tests\nThe steps for running the end to end tests is as follows:\n\n#### Start Selenium Web Server\n1. Open a terminal window.\n2. Change directory to the location of the project.\n3. Execute `npm run e2e:server`. __Keep this terminal window open.__\n\n#### Start App\n__Requirement:__ Execute `npm install -g yo generator-kinvey-html` to globally install [Yeoman](http://yeoman.io/) and [generator-kinvey-html](https://www.npmjs.com/package/generator-kinvey-html). You only need to do this once.\n\n1. Open a terminal window.\n2. Change directory to the location of the project.\n3. Execute `npm run e2e:app`. __Keep this terminal window open.__\n\n#### Run End to End Tests\n1. Open a terminal window.\n2. Change directory to the location of the project.\n3. Execute `npm run e2e:test`.\n\n## License\nSee [LICENSE](LICENSE) for details.\n\n## Contributing\nSee [CONTRIBUTING.md](CONTRIBUTING.md) for details on reporting bugs and making contributions.\n\n",readmeFilename:"README.md",repository:{type:"git",url:"git+ssh://git@github.com/Kinvey/html5-sdk.git"},scripts:{build:"npm run clean && npm run transpile && npm run bundle && npm run minify",bundle:"webpack --config webpack.config.js",clean:"del coverage dist s3",cover:"istanbul cover _mocha -- --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",docs:"esdoc -c esdoc.json","e2e:app":"npm run build && shjs ./scripts/e2e.js && node ./test/e2e/app","e2e:server":"selenium-standalone install --version=3.0.1 && selenium-standalone start","e2e:test":"wdio ./test/e2e/wdio.conf","e2e:test:browserstack":"wdio ./test/e2e/browserstack.conf",lint:"npm run lint:src","lint:src":"eslint src/**","lint:test":"eslint test/unit/**",minify:"uglifyjs --screw-ie8 --compress warnings=false --mangle --comments --output ./dist/kinvey-html5-sdk.min.js -- ./dist/kinvey-html5-sdk.js ",postversion:"git push && git push --tags",preversion:"del node_modules && npm install && npm test",s3:"npm run build && shjs ./scripts/s3.js",test:"mocha --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit","test:watch":"mocha -w --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",transpile:"babel src --out-dir dist"},version:"3.5.0"}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(331),c=n(375),l=r(c),f=n(78),p=r(f),h=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),u(n,[{key:"open",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",r=void 0,o=void 0,i=void 0,a=function(e){t.emit("loadstart",e)},u=function(e){t.emit("loadstop",e)},s=function(e){t.emit("error",e)},c=function(){clearInterval(r),i.close(),t.popupWindow=null,i&&(0,p.default)(i.removeEventListener)&&(i.removeEventListener("loadstart",o.loadStopCallback),i.removeEventListener("loadstop",o.loadStopCallback),i.removeEventListener("loaderror",o.loadErrorCallback),i.removeEventListener("exit",o.exitCallback)),t.emit("exit")};if(o={loadStartCallback:(0,l.default)(a,this),loadStopCallback:(0,l.default)(u,this),loadErrorCallback:(0,l.default)(s,this),exitCallback:(0,l.default)(c,this)},!(i=e.open(n,"_blank","toolbar=no,location=no")))throw new Error("The popup was blocked.");return(0,p.default)(i.addEventListener)&&(i.addEventListener("loadstart",o.loadStartCallback),i.addEventListener("loadstop",o.loadStopCallback),i.addEventListener("loaderror",o.loadErrorCallback),i.addEventListener("exit",o.exitCallback)),r=setInterval(function(){if(i.closed)o.exitCallback();else try{o.loadStopCallback({url:i.location.href})}catch(e){}},100),this.popupWindow=i,this}},{key:"close",value:function(){return this.popupWindow&&this.popupWindow.close(),this}}]),n}(s.EventEmitter);t.default=h}).call(t,function(){return this}())},function(e,t,n){var r=n(193),o=n(376),i=n(402),a=n(404),u=r(function(e,t,n){var r=1;if(n.length){var s=a(n,i(u));r|=32}return o(e,r,t,n,s)});u.placeholder={},e.exports=u},function(e,t,n){function r(e,t,n,r,O,E,k,j){var x=t&v;if(!x&&"function"!=typeof e)throw new TypeError(d);var P=r?r.length:0;if(P||(t&=~(g|w),r=O=void 0),k=void 0===k?k:_(h(k),0),j=void 0===j?j:h(j),P-=O?O.length:0,t&w){var T=r,S=O;r=O=void 0}var A=x?void 0:c(e),R=[e,t,n,r,O,T,S,E,k,j];if(A&&l(R,A),e=R[0],t=R[1],n=R[2],r=R[3],O=R[4],j=R[9]=void 0===R[9]?x?0:e.length:_(R[9]-P,0),!j&&t&(m|b)&&(t&=~(m|b)),t&&t!=y)C=t==m||t==b?a(e,t,j):t!=g&&t!=(y|g)||O.length?u.apply(void 0,R):s(e,t,n,r);else var C=i(e,t,n);return p((A?o:f)(C,R),e,t)}var o=n(377),i=n(379),a=n(381),u=n(382),s=n(405),c=n(390),l=n(406),f=n(397),p=n(398),h=n(311),d="Expected a function",y=1,v=2,m=8,b=16,g=32,w=64,_=Math.max;e.exports=r},function(e,t,n){var r=n(189),o=n(378),i=o?function(e,t){return o.set(e,t),e}:r;e.exports=i},function(e,t,n){var r=n(170),o=r&&new r;e.exports=o},function(e,t,n){function r(e,t,n){function r(){return(this&&this!==i&&this instanceof r?s:e).apply(u?n:this,arguments)}var u=t&a,s=o(e);return r}var o=n(380),i=n(81),a=1;e.exports=r},function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=o(e.prototype),r=e.apply(n,t);return i(r)?r:n}}var o=n(268),i=n(85);e.exports=r},function(e,t,n){function r(e,t,n){function r(){for(var i=arguments.length,p=Array(i),h=i,d=s(r);h--;)p[h]=arguments[h];var y=i<3&&p[0]!==d&&p[i-1]!==d?[]:c(p,d);return(i-=y.length)<n?u(e,t,a,r.placeholder,void 0,p,y,void 0,void 0,n-i):o(this&&this!==l&&this instanceof r?f:e,this,p)}var f=i(e);return r}var o=n(195),i=n(380),a=n(382),u=n(386),s=n(402),c=n(404),l=n(81);e.exports=r},function(e,t,n){function r(e,t,n,g,w,_,O,E,k,j){function x(){for(var h=arguments.length,d=Array(h),y=h;y--;)d[y]=arguments[y];if(A)var v=c(x),m=a(d,v);if(g&&(d=o(d,g,w,A)),_&&(d=i(d,_,O,A)),h-=m,A&&h<j){var b=f(d,v);return s(e,t,r,x.placeholder,n,d,b,E,k,j-h)}var I=T?n:this,M=S?I[e]:e;return h=d.length,E?d=l(d,E):R&&h>1&&d.reverse(),P&&k<h&&(d.length=k),this&&this!==p&&this instanceof x&&(M=C||u(M)),M.apply(I,d)}var P=t&m,T=t&h,S=t&d,A=t&(y|v),R=t&b,C=S?void 0:u(e);return x}var o=n(383),i=n(384),a=n(385),u=n(380),s=n(386),c=n(402),l=n(403),f=n(404),p=n(81),h=1,d=2,y=8,v=16,m=128,b=512;e.exports=r},function(e,t){function n(e,t,n,o){for(var i=-1,a=e.length,u=n.length,s=-1,c=t.length,l=r(a-u,0),f=Array(c+l),p=!o;++s<c;)f[s]=t[s];for(;++i<u;)(p||i<a)&&(f[n[i]]=e[i]);for(;l--;)f[s++]=e[i++];return f}var r=Math.max;e.exports=n},function(e,t){function n(e,t,n,o){for(var i=-1,a=e.length,u=-1,s=n.length,c=-1,l=t.length,f=r(a-s,0),p=Array(f+l),h=!o;++i<f;)p[i]=e[i];for(var d=i;++c<l;)p[d+c]=t[c];for(;++u<s;)(h||i<a)&&(p[d+n[u]]=e[i++]);return p}var r=Math.max;e.exports=n},function(e,t){function n(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}e.exports=n},function(e,t,n){function r(e,t,n,r,h,d,y,v,m,b){var g=t&l,w=g?y:void 0,_=g?void 0:y,O=g?d:void 0,E=g?void 0:d;t|=g?f:p,(t&=~(g?p:f))&c||(t&=~(u|s));var k=[e,t,h,O,w,E,_,v,m,b],j=n.apply(void 0,k);return o(e)&&i(j,k),j.placeholder=r,a(j,e,t)}var o=n(387),i=n(397),a=n(398),u=1,s=2,c=4,l=8,f=32,p=64;e.exports=r},function(e,t,n){function r(e){var t=a(e),n=u[t];if("function"!=typeof n||!(t in o.prototype))return!1;if(e===n)return!0;var r=i(n);return!!r&&e===r[0]}var o=n(388),i=n(390),a=n(392),u=n(394);e.exports=r},function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var o=n(268),i=n(389),a=4294967295;r.prototype=o(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t,n){var r=n(378),o=n(391),i=r?function(e){return r.get(e)}:o;e.exports=i},function(e,t){function n(){}e.exports=n},function(e,t,n){function r(e){for(var t=e.name+"",n=o[t],r=a.call(o,t)?n.length:0;r--;){var i=n[r],u=i.func;if(null==u||u==e)return i.name}return t}var o=n(393),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t){var n={};e.exports=n},function(e,t,n){function r(e){if(s(e)&&!u(e)&&!(e instanceof o)){if(e instanceof i)return e;if(f.call(e,"__wrapped__"))return c(e)}return new i(e)}var o=n(388),i=n(395),a=n(389),u=n(126),s=n(125),c=n(396),l=Object.prototype,f=l.hasOwnProperty;r.prototype=a.prototype,r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var o=n(268),i=n(389);r.prototype=o(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e){if(e instanceof o)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var o=n(388),i=n(395),a=n(250);e.exports=r},function(e,t,n){var r=n(377),o=n(200),i=o(r);e.exports=i},function(e,t,n){function r(e,t,n){var r=t+"";return a(e,i(r,u(o(r),n)))}var o=n(399),i=n(400),a=n(196),u=n(401);e.exports=r},function(e,t){function n(e){var t=e.match(r);return t?t[1].split(o):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,o=/,? & /;e.exports=n},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(r,"{\n/* [wrapped with "+t+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function r(e,t){return o(a,function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)}),e.sort()}var o=n(243),i=n(111),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=r},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length,r=a(t.length,n),u=o(e);r--;){var s=t[r];e[r]=i(s,n)?u[s]:void 0}return e}var o=n(250),i=n(156),a=Math.min;e.exports=r},function(e,t){function n(e,t){for(var n=-1,o=e.length,i=0,a=[];++n<o;){var u=e[n];u!==t&&u!==r||(e[n]=r,a[i++]=n)}return a}var r="__lodash_placeholder__";e.exports=n},function(e,t,n){function r(e,t,n,r){function s(){for(var t=-1,i=arguments.length,u=-1,f=r.length,p=Array(f+i),h=this&&this!==a&&this instanceof s?l:e;++u<f;)p[u]=r[u];for(;i--;)p[u++]=arguments[++t];return o(h,c?n:this,p)}var c=t&u,l=i(e);return s}var o=n(195),i=n(380),a=n(81),u=1;e.exports=r},function(e,t,n){function r(e,t){var n=e[1],r=t[1],y=n|r,v=y<(s|c|p),m=r==p&&n==f||r==p&&n==h&&e[7].length<=t[8]||r==(p|h)&&t[7].length<=t[8]&&n==f;if(!v&&!m)return e;r&s&&(e[2]=t[2],y|=n&s?0:l);var b=t[3];if(b){var g=e[3];e[3]=g?o(g,b,t[4]):b,e[4]=g?a(e[3],u):t[4]}return b=t[5],b&&(g=e[5],e[5]=g?i(g,b,t[6]):b,e[6]=g?a(e[5],u):t[6]),b=t[7],b&&(e[7]=b),r&p&&(e[8]=null==e[8]?t[8]:d(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=y,e}var o=n(383),i=n(384),a=n(404),u="__lodash_placeholder__",s=1,c=2,l=4,f=8,p=128,h=256,d=Math.min;e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheMiddleware=void 0;var r=n(408),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.CacheMiddleware=o.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=n(409),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"loadStorage",value:function(e){return new c.default(e)}}]),t}(u.CacheMiddleware);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(n(1),n(302)),c=r(s),l=n(410),f=r(l),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"loadAdapter",value:function(){return f.default.load(this.name)}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),u=r(a),s=n(1),c=n(411),l=r(c),f=n(270),p=r(f),h=n(126),d=r(h),y=void 0,v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kinvey";if(o(this,e),!1===(0,s.isDefined)(t))throw new Error("A name is required to use the SQLite adapter.",t);if(!1===(0,p.default)(t))throw new Error("The name must be a string to use the SQLite adapter",t);this.name=t}return i(e,[{key:"openTransaction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o='"'+e+'"',i="sqlite_master"===e,a=(0,d.default)(t);return t=a?t:[[t,n]],new l.default(this.name).then(function(e){return e.resultType(l.default.RESULTSASOBJECT),r&&!1===i?e.execSQL("CREATE TABLE IF NOT EXISTS "+o+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)").then(function(){return e}):e}).then(function(e){var n=[];return 0===t.length?a?n:n.shift():t.reduce(function(t,a){var u=a[0].replace("#{collection}",o);return t.then(function(){return!1===r?e.all(u,a[1]):e.execSQL(u,a[1])}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!1===r&&(0,d.default)(e)&&e.length>0)for(var t=0,o=e.length;t<o;t+=1)try{var a=e[t],u=i?a.value:JSON.parse(a.value);n.push(u)}catch(e){}else!0===r&&n.push(e);return n})},u.default.resolve())})}},{key:"find",value:function(e){return this.openTransaction(e,"SELECT value FROM #{collection}",[]).catch(function(){return[]})}},{key:"findById",value:function(e,t){var n=this;return this.openTransaction(e,"SELECT value FROM #{collection} WHERE key = ?",[t]).then(function(r){if(0===r.length)throw new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" SQLite database.");return r[0]}).catch(function(){throw new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" SQLite database.")})}},{key:"save",value:function(e,t){var n=[],r=!1;return(0,d.default)(t)||(r=!0,t=[t]),0===t.length?u.default.resolve(null):(t=t.map(function(e){return n.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e._id,JSON.stringify(e)]]),e}),this.openTransaction(e,n,null,!0).then(function(){return r?t[0]:t}))}},{key:"removeById",value:function(e,t){var n=this,r=[["SELECT value FROM #{collection} WHERE key = ?",[t]],["DELETE FROM #{collection} WHERE key = ?",[t]]];return this.openTransaction(e,r,null,!0).then(function(r){var o=r[0],i=r[1];if(0===(i=i||o.length))throw new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+n.name+" SQLite database.");return{count:i}})}},{key:"clear",value:function(){var e=this;return this.openTransaction("sqlite_master","SELECT name AS value FROM #{collection} WHERE type = ?",["table"],!1).then(function(t){if(0===t.length)return null;var n=t.filter(function(e){return/^[a-zA-Z0-9-]{1,128}/.test(e)}).map(function(e){return["DROP TABLE IF EXISTS '"+e+"'"]});return e.openTransaction("sqlite_master",n,null,!0)}).then(function(){return null})}}]),e}();t.default={load:function(e){var t=new v(e);return!1===(0,s.isDefined)(l.default)?u.default.resolve(void 0):(0,s.isDefined)(y)?y?u.default.resolve(t):u.default.resolve(void 0):t.save("__testSupport",{_id:"1"}).then(function(){return y=!0,t}).catch(function(){y=!1})}}},function(t,n){t.exports=e}])});